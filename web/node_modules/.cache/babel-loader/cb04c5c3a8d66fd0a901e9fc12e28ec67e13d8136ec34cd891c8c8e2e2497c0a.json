{"ast":null,"code":"import _objectSpread from\"/workspaces/udd-EmprendimientoBS/web/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// App.tsx\nimport React,{useEffect,useLayoutEffect,useMemo,useRef,useState,memo}from\"react\";import TeamworkMiniAnim from\"./componentes/TeamworkMiniAnim\";import EmpathyAnimacion from\"./componentes/EmpathyAnimacion\";import CreatividadAnimacion from\"./componentes/CreatividadAnimacion\";import PitchAnimacion from\"./componentes/PitchAnimacion\";/* ============ UTILES ============ */import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function mmss(sec){const s=Math.max(0,Math.floor(sec||0));const mStr=String(Math.floor(s/60)).padStart(2,\"0\");const sStr=String(s%60).padStart(2,\"0\");return\"\".concat(mStr,\":\").concat(sStr);}/* --THEME-- */const theme={rosa:\"#E91E63\",azul:\"#1976D2\",amarillo:\"#FFEB3B\",blanco:\"#FFFFFF\",surfaceAlt:\"#F7F9FC\",gris:\"#ECEFF1\",texto:\"#0D47A1\",muted:\"#6B7A90\",border:\"#E3E8EF\",shadow:\"0 16px 36px rgba(16,24,40,.14)\"};/* --GLOBAL CSS-- */const GlobalFormCSS=()=>/*#__PURE__*/_jsx(\"style\",{children:\"\\n  *{-webkit-tap-highlight-color:transparent;} input,textarea,select{box-sizing:border-box;max-width:100%} body{margin:0}\\n  button:focus-visible,input:focus-visible,textarea:focus-visible,select:focus-visible{outline:3px solid #93C5FD;outline-offset:2px}\\n  @keyframes crownFloat{0%{transform:translateY(0)}50%{transform:translateY(-6px)}100%{transform:translateY(0)}}\\n  @keyframes shimmer{0%{background-position:0% 0}100%{background-position:120% 0}}\\n  @keyframes fall{0%{transform:translateY(-10vh) rotate(0deg);opacity:1}100%{transform:translateY(110vh) rotate(360deg);opacity:.9}}\\n  @keyframes floatY{0%{transform:translateY(0)}50%{transform:translateY(-18px)}100%{transform:translateY(0)}}\\n  @keyframes pulseSoft{0%{transform:scale(1);opacity:.65}50%{transform:scale(1.06);opacity:.85}100%{transform:scale(1);opacity:.65}}\\n\"});/* --BASE STYLES-- */const appStyles={position:\"relative\",minHeight:\"100dvh\",overflowY:\"auto\",overflowX:\"hidden\",fontFamily:\"Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif\",color:theme.texto};const baseInput={width:\"100%\",padding:12,borderRadius:12,border:\"1px solid \".concat(theme.border),boxSizing:\"border-box\",maxWidth:\"100%\",background:theme.blanco};const panelBox={background:theme.blanco,border:\"1px solid \".concat(theme.border),borderRadius:16,padding:12,position:\"relative\",zIndex:2,boxShadow:theme.shadow};const badgeTitle={fontWeight:900,color:theme.azul,marginBottom:6};const smallHint={fontSize:12,opacity:.7,marginTop:8};const JOINED_KEY=\"udd_joined_room_v1\";const AutoCenter=_ref=>{let{children}=_ref;const contentRef=useRef(null);const[center,setCenter]=useState(true);const recompute=()=>{var _contentRef$current$o,_contentRef$current;const vp=window.innerHeight;const padding=48;const contentH=(_contentRef$current$o=(_contentRef$current=contentRef.current)===null||_contentRef$current===void 0?void 0:_contentRef$current.offsetHeight)!==null&&_contentRef$current$o!==void 0?_contentRef$current$o:0;setCenter(contentH+padding<=vp);};useLayoutEffect(()=>{recompute();const ro=new ResizeObserver(recompute);if(contentRef.current)ro.observe(contentRef.current);window.addEventListener(\"resize\",recompute);return()=>{ro.disconnect();window.removeEventListener(\"resize\",recompute);};},[]);return/*#__PURE__*/_jsx(\"div\",{style:{position:\"relative\",width:\"100%\",minHeight:\"100dvh\",display:\"flex\",flexDirection:\"column\",justifyContent:center?\"center\":\"flex-start\",alignItems:\"center\",padding:24},children:/*#__PURE__*/_jsx(\"div\",{ref:contentRef,style:{width:\"100%\",display:\"grid\",justifyItems:\"center\"},children:children})});};const Card=_ref2=>{let{title,subtitle,width=520,children,tight}=_ref2;return/*#__PURE__*/_jsxs(\"div\",{style:{width:\"clamp(320px,92vw,\".concat(width,\"px)\"),background:\"rgba(255,255,255,0.96)\",boxShadow:theme.shadow,border:\"1px solid \".concat(theme.border),borderRadius:20,padding:tight?18:24,textAlign:\"center\",backdropFilter:\"blur(2px)\",position:\"relative\",zIndex:3,margin:\"12px auto\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:0,marginBottom:8,fontSize:26,fontWeight:900,color:theme.rosa},children:title}),subtitle&&/*#__PURE__*/_jsx(\"p\",{style:{marginTop:0,marginBottom:16,color:theme.azul},children:subtitle}),children]});};const Btn=/*#__PURE__*/memo(_ref3=>{let{onClick,bg=theme.azul,fg=theme.blanco,label,full=true,disabled,variant=\"solid\"}=_ref3;return/*#__PURE__*/_jsx(\"button\",{onClick:()=>onClick===null||onClick===void 0?void 0:onClick(),disabled:disabled,style:{width:full?\"100%\":undefined,padding:\"12px 16px\",borderRadius:14,border:variant===\"outline\"?\"2px solid \".concat(theme.azul):\"none\",cursor:disabled?\"not-allowed\":\"pointer\",fontWeight:800,letterSpacing:.2,background:disabled?\"#cfd8dc\":variant===\"outline\"?\"transparent\":bg,color:disabled?\"#607d8b\":variant===\"outline\"?theme.azul:fg,boxShadow:variant===\"outline\"?\"none\":\"0 6px 12px rgba(0,0,0,.12)\",transition:\"transform .06s ease, opacity .15s ease, box-shadow .15s ease\",whiteSpace:\"nowrap\"},onMouseDown:e=>!disabled&&(e.currentTarget.style.transform=\"scale(.98)\"),onMouseUp:e=>!disabled&&(e.currentTarget.style.transform=\"scale(1)\"),onMouseEnter:e=>{if(!disabled&&variant===\"solid\")e.currentTarget.style.boxShadow=\"0 8px 16px rgba(0,0,0,.16)\";},onMouseLeave:e=>{if(!disabled&&variant===\"solid\")e.currentTarget.style.boxShadow=\"0 6px 12px rgba(0,0,0,.12)\";},children:label});});/* --FONDO-- */const Background=/*#__PURE__*/memo(()=>/*#__PURE__*/_jsxs(\"div\",{style:{position:\"fixed\",inset:0,pointerEvents:\"none\",overflow:\"hidden\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",inset:0,background:\"linear-gradient(145deg, \".concat(theme.rosa,\" 0%, \").concat(theme.azul,\" 60%)\")}}),/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",inset:0,background:\"radial-gradient(40% 35% at 85% 15%, \".concat(theme.amarillo,\"55, transparent 65%)\"),filter:\"blur(2px)\"}}),/*#__PURE__*/_jsx(Orb,{left:\"6%\",top:\"72%\",size:220,color:\"\".concat(theme.amarillo,\"55\"),delay:.2}),/*#__PURE__*/_jsx(Orb,{left:\"78%\",top:\"68%\",size:180,color:\"\".concat(theme.rosa,\"44\"),delay:.6}),/*#__PURE__*/_jsx(Orb,{left:\"12%\",top:\"18%\",size:140,color:\"\".concat(theme.azul,\"55\"),delay:.1}),/*#__PURE__*/_jsx(Wave,{color:\"\".concat(theme.azul),opacity:.18,top:100}),/*#__PURE__*/_jsx(Wave,{color:\"\".concat(theme.rosa),opacity:.14,top:170,reverse:true}),/*#__PURE__*/_jsx(GeoPiece,{left:\"70%\",top:\"22%\",size:140,color:\"\".concat(theme.blanco,\"18\"),rotate:true}),/*#__PURE__*/_jsx(GeoPiece,{left:\"28%\",top:\"78%\",size:160,color:\"\".concat(theme.blanco,\"14\")})]}));const Orb=_ref4=>{let{left,top,size,color,delay=0}=_ref4;return/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",left,top,width:size,height:size,borderRadius:\"50%\",background:color,filter:\"blur(6px)\",animation:\"floatY \".concat(5.5+Math.random()*2,\"s ease-in-out \").concat(delay,\"s infinite\")}});};const Wave=_ref5=>{let{color,opacity=.2,top=120,reverse}=_ref5;return/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 1440 320\",preserveAspectRatio:\"xMidYMid slice\",style:{position:\"absolute\",top,left:0,width:\"100%\",height:240,opacity,transform:reverse?\"scaleY(-1)\":undefined,animation:\"drift 12s ease-in-out infinite\"},children:/*#__PURE__*/_jsx(\"path\",{fill:color,d:\"M0,192 C240,240 480,240 720,192 C960,144 1200,144 1440,192 L1440,320 L0,320 Z\"})});};const GeoPiece=_ref6=>{let{left,top,size,color,rotate}=_ref6;return/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",left,top,width:size,height:size,borderRadius:26,background:color,transform:\"rotate(12deg)\",animation:rotate?\"pulseSoft 7s ease-in-out infinite\":\"floatY 8s ease-in-out infinite\",boxShadow:\"0 20px 40px rgba(0,0,0,.08)\"}});};/* ============ FLOW/STATE ============ */const FLOW_KEY=\"udd_flow_state_v1\",READY_KEY=\"udd_ready_teams_v1\",COINS_KEY=\"udd_coins_v1\";const THEMES_KEY=\"udd_themes_v1\",ANALYTICS_KEY=\"udd_analytics_v1\";function readJSON(key,fallback){try{const raw=localStorage.getItem(key);return raw?JSON.parse(raw):fallback;}catch(_unused){return fallback;}}function writeJSON(key,value){try{localStorage.setItem(key,JSON.stringify(value));}catch(_unused2){}}function normalizeFlow(f,initial){const base=_objectSpread(_objectSpread({},initial),f||{});return _objectSpread(_objectSpread({},base),{},{presentOrder:Array.isArray(f===null||f===void 0?void 0:f.presentOrder)?f.presentOrder:[],currentIdx:typeof(f===null||f===void 0?void 0:f.currentIdx)===\"number\"?f.currentIdx:0,pitchSeconds:typeof(f===null||f===void 0?void 0:f.pitchSeconds)===\"number\"?f.pitchSeconds:initial.pitchSeconds});}/* --STORAGE SIGNAL-- */function useStorageSignal(keys){let pollMs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:800;const[tick,setTick]=useState(0);useEffect(()=>{const onStorage=e=>{if(!e.key)return;if(keys.includes(e.key))setTick(t=>t+1);};window.addEventListener(\"storage\",onStorage);const id=window.setInterval(()=>setTick(t=>t+1),pollMs);return()=>{window.removeEventListener(\"storage\",onStorage);window.clearInterval(id);};},[keys,pollMs]);return tick;}/* --SHARED FLOW-- */function useSharedFlow(isTeacher,initial){const[flow,setFlow]=useState(()=>normalizeFlow(readJSON(FLOW_KEY,initial),initial));useEffect(()=>{const onStorage=e=>{if(e.key===FLOW_KEY&&e.newValue){try{const parsed=JSON.parse(e.newValue);setFlow(normalizeFlow(parsed,initial));}catch(_unused3){}}};window.addEventListener(\"storage\",onStorage);return()=>window.removeEventListener(\"storage\",onStorage);},[]);const publish=next=>{const newFlow=normalizeFlow(_objectSpread(_objectSpread({},flow),next),initial);setFlow(newFlow);writeJSON(FLOW_KEY,newFlow);try{window.dispatchEvent(new StorageEvent(\"storage\",{key:FLOW_KEY,newValue:JSON.stringify(newFlow)}));}catch(_unused4){}};useEffect(()=>{if(!isTeacher||!flow.running)return;const id=window.setInterval(()=>{setFlow(f=>{const left=Math.max(0,f.remaining-1);const nf=_objectSpread(_objectSpread({},f),{},{remaining:left,running:left>0&&f.running});writeJSON(FLOW_KEY,nf);try{window.dispatchEvent(new StorageEvent(\"storage\",{key:FLOW_KEY,newValue:JSON.stringify(nf)}));}catch(_unused5){};return nf;});},1000);return()=>window.clearInterval(id);},[isTeacher,flow.running]);const setStep=(step,remaining)=>publish({step,remaining:remaining!==null&&remaining!==void 0?remaining:flow.remaining,running:false});const startTimer=seconds=>publish({remaining:seconds!==null&&seconds!==void 0?seconds:flow.remaining,running:true});const pauseTimer=()=>publish({running:false});const resetTimer=seconds=>publish({remaining:seconds,running:false});return{flow,setStep,startTimer,pauseTimer,resetTimer,publish};}/* --ANALYTICS HOOK-- */function useAnalytics(){const[analytics,setAnalytics]=useState(()=>readJSON(ANALYTICS_KEY,{roomsCreated:0,challengeUsage:{},teams:[],reflections:[],feedbacks:[]}));useEffect(()=>{const onStorage=e=>{if(e.key===ANALYTICS_KEY&&e.newValue){try{setAnalytics(JSON.parse(e.newValue));}catch(_unused6){}}};window.addEventListener(\"storage\",onStorage);return()=>window.removeEventListener(\"storage\",onStorage);},[]);const update=updater=>{setAnalytics(prev=>{const next=updater(prev);writeJSON(ANALYTICS_KEY,next);try{window.dispatchEvent(new StorageEvent(\"storage\",{key:ANALYTICS_KEY,newValue:JSON.stringify(next)}));}catch(_unused7){};return next;});};return{analytics,update};}/* ===================== APP ===================== */export default function App(){const[mode,setMode]=useState(\"inicio\");const[equiposQty,setEquiposQty]=useState(4);const[roomCode,setRoomCode]=useState(\"\");const[groupName,setGroupName]=useState(\"\");const[miNombre,setMiNombre]=useState(\"\");const[miCarrera,setMiCarrera]=useState(\"\");const[integrantes,setIntegrantes]=useState([]);const[teamReady,setTeamReady]=useState(false);const[coins,setCoins]=useState(0);const isTablet=useMediaQuery(\"(max-width: 1180px)\");const isMobile=useMediaQuery(\"(max-width: 640px)\");const[joinedRoom,setJoinedRoom]=useState(()=>sessionStorage.getItem(JOINED_KEY)||\"\");// --- Login Admin ---\nconst[showAdminLogin,setShowAdminLogin]=useState(false);const[adminUser,setAdminUser]=useState(\"\");const[adminPass,setAdminPass]=useState(\"\");const[adminErr,setAdminErr]=useState(\"\");const initialFlow={step:\"lobby\",running:false,remaining:5*60,roomCode:\"\",expectedTeams:0,/* NUEVO */presentOrder:[],currentIdx:0,pitchSeconds:90};const isTeacher=mode===\"prof\";const{flow,setStep,startTimer,pauseTimer,resetTimer,publish}=useSharedFlow(isTeacher,initialFlow);const storageTick=useStorageSignal(mode===\"prof\"?[READY_KEY,COINS_KEY,FLOW_KEY,ANALYTICS_KEY,THEMES_KEY]:mode===\"alumno\"?[COINS_KEY,FLOW_KEY,ANALYTICS_KEY,THEMES_KEY]:[FLOW_KEY,ANALYTICS_KEY,THEMES_KEY],800);const readyNow=useMemo(()=>readyCount(),[storageTick,flow.roomCode,flow.expectedTeams]);const teamId=flow.roomCode&&(groupName||\"(sin-nombre)\")?\"\".concat(flow.roomCode,\"::\").concat((groupName||\"\").trim()||\"sin-nombre\"):\"\";const analyticsApi=useAnalytics();const{analytics,update}=analyticsApi;const markReady=()=>{const set=new Set(readJSON(READY_KEY,[]));if(teamId)set.add(teamId);const arr=Array.from(set);writeJSON(READY_KEY,arr);try{window.dispatchEvent(new StorageEvent(\"storage\",{key:READY_KEY,newValue:JSON.stringify(arr)}));}catch(_unused8){};if(teamId){const teamName=teamId.split(\"::\")[1]||\"Equipo\";update(a=>_objectSpread(_objectSpread({},a),{},{teams:[...a.teams,{roomCode:flow.roomCode,teamName,integrantes:integrantes.length?integrantes:[{nombre:miNombre||\"Integrante\",carrera:miCarrera||\"‚Äî\"}],ts:Date.now()}]}));}setTeamReady(true);};function readyCount(){const set=new Set(readJSON(READY_KEY,[]));return Array.from(set).filter(id=>id.startsWith(\"\".concat(flow.roomCode,\"::\"))).length;}const clearReadyForRoom=()=>{const arr=readJSON(READY_KEY,[]);const filtered=arr.filter(id=>!id.startsWith(\"\".concat(flow.roomCode,\"::\")));writeJSON(READY_KEY,filtered);try{window.dispatchEvent(new StorageEvent(\"storage\",{key:READY_KEY,newValue:JSON.stringify(filtered)}));}catch(_unused9){};};function teamsForCurrentRoom(analytics,roomCode){return analytics.teams.filter(t=>t.roomCode===roomCode).map(t=>t.teamName).filter(Boolean);}function getTeamsForRoom(analytics,roomCode){return teamsForCurrentRoom(analytics,roomCode);}function readyTeamNames(roomCode){const arr=readJSON(READY_KEY,[]);return new Set(arr.filter(id=>id.startsWith(\"\".concat(roomCode,\"::\"))).map(id=>id.split(\"::\")[1]||\"\"));}function pruneCoinsForRoom(roomCode){const map=readJSON(COINS_KEY,{});const ready=readyTeamNames(roomCode);const newMap=Object.fromEntries(Object.entries(map).filter(_ref7=>{let[key]=_ref7;if(!key.startsWith(\"\".concat(roomCode,\"::\")))return true;const team=key.split(\"::\")[1]||\"\";return ready.has(team);}));writeJSON(COINS_KEY,newMap);try{window.dispatchEvent(new StorageEvent(\"storage\",{key:COINS_KEY,newValue:JSON.stringify(newMap)}));}catch(_unused0){}}useEffect(()=>{if(!teamId||mode!==\"alumno\"||!teamReady)return;const map=readJSON(COINS_KEY,{});map[teamId]=coins;writeJSON(COINS_KEY,map);try{window.dispatchEvent(new StorageEvent(\"storage\",{key:COINS_KEY,newValue:JSON.stringify(map)}));}catch(_unused1){}},[coins,teamId,mode,teamReady]);const ranking=useMemo(()=>{const map=readJSON(COINS_KEY,{});const ready=readyTeamNames(flow.roomCode);const pairs=Object.entries(map).filter(_ref8=>{let[id]=_ref8;return id.startsWith(\"\".concat(flow.roomCode,\"::\"));}).map(_ref9=>{let[id,v]=_ref9;return{equipo:id.split(\"::\")[1]||\"Equipo\",total:v||0};}).filter(_ref0=>{let{equipo}=_ref0;return ready.has(equipo);});return pairs.sort((a,b)=>b.total-a.total);},[flow.roomCode,flow.step,storageTick]);/* --F1: Spot the Difference-- */const[diffs,setDiffs]=useState([{x:.2,y:.25,r:.05,zone:0},{x:.35,y:.7,r:.05,zone:1},{x:.68,y:.35,r:.05,zone:2},{x:.8,y:.7,r:.05,zone:3}]);const[hintsLeft,setHintsLeft]=useState(2);const spotRef=useRef(null);const clickSpot=e=>{if(!spotRef.current||!flow.running)return;const rect=spotRef.current.getBoundingClientRect();const cx=(e.clientX-rect.left)/rect.width;const cy=(e.clientY-rect.top)/rect.height;setDiffs(arr=>arr.map(d=>{if(d.found)return d;const dx=d.x-cx,dy=d.y-cy;const dist=Math.hypot(dx,dy);if(dist<d.r){setCoins(c=>c+1);return _objectSpread(_objectSpread({},d),{},{found:true});}return d;}));};const useHint=()=>{if(hintsLeft<=0||!spotRef.current)return;const hidden=diffs.find(d=>!d.found);if(!hidden)return;setHintsLeft(h=>h-1);setCoins(c=>Math.max(0,c-1));const tip=document.createElement(\"div\");Object.assign(tip.style,{position:\"absolute\",left:\"\".concat(hidden.x*100,\"%\"),top:\"\".concat(hidden.y*100,\"%\"),transform:\"translate(-50%,-50%)\",width:\"\".concat(hidden.r*150,\"px\"),height:\"\".concat(hidden.r*150,\"px\"),border:\"3px dashed \".concat(theme.amarillo),borderRadius:\"50%\",pointerEvents:\"none\"});spotRef.current.appendChild(tip);setTimeout(()=>tip.remove(),1200);};/* --F1: Matrix-- */const size=5;const makeGrid=()=>Array.from({length:size},()=>Array.from({length:size},()=>false));const[goal]=useState(()=>{const g=makeGrid();[[1,1],[1,2],[1,3],[2,0],[2,4],[3,1],[3,2],[3,3],[4,2]].forEach(_ref1=>{let[r,c]=_ref1;return g[r][c]=true;});return g;});const[grid,setGrid]=useState(()=>makeGrid());const[scored,setScored]=useState(()=>makeGrid());const toggleCell=(r,c)=>{if(!flow.running)return;setGrid(prev=>{const next=prev.map(row=>row.slice());next[r][c]=!next[r][c];if(next[r][c]===goal[r][c]&&!scored[r][c]){setCoins(cn=>cn+1);setScored(sc=>{const cp=sc.map(row=>row.slice());cp[r][c]=true;return cp;});}return next;});};/* --F2: Empat√≠a-- */const EMPATIA_FIELDS=[{key:\"perfil\",label:\"Perfil\"},{key:\"entorno\",label:\"Entorno\"},{key:\"emociones\",label:\"Emociones\"},{key:\"necesidades\",label:\"Necesidades\"},{key:\"limitaciones\",label:\"Limitaciones\"},{key:\"motivaciones\",label:\"Motivaciones\"}];const[empatia,setEmpatia]=useState({perfil:\"\",entorno:\"\",emociones:\"\",necesidades:\"\",limitaciones:\"\",motivaciones:\"\"});const[activeBubble,setActiveBubble]=useState(\"perfil\");const onEmpatiaChange=(k,v)=>{setEmpatia(prev=>{var _prev$k;const wasEmpty=!((_prev$k=prev[k])!==null&&_prev$k!==void 0&&_prev$k.trim());const next=_objectSpread(_objectSpread({},prev),{},{[k]:v});if(wasEmpty&&next[k].trim())setCoins(c=>c+1);return next;});};/* --TEMAS/Desaf√≠os */const defaultTHEMES={salud:{label:\"Salud\",desafios:[{titulo:\"Desaf√≠o 1\",descripcion:\"Mejorar acceso a atenci√≥n b√°sica en barrios alejados.\"},{titulo:\"Desaf√≠o 2\",descripcion:\"Reducir tiempos de espera en consultas no cr√≠ticas.\"},{titulo:\"Desaf√≠o 3\",descripcion:\"Apoyo a cuidadores de adultos mayores.\"}],persona:{nombre:\"Mar√≠a\",edad:62,bio:\"Cuida a su pareja con movilidad reducida; vive a 40 min del centro de salud.\"}},sustentabilidad:{label:\"Sustentabilidad\",desafios:[{titulo:\"Desaf√≠o 1\",descripcion:\"Disminuir residuos en campus y comunidad.\"},{titulo:\"Desaf√≠o 2\",descripcion:\"Optimizar uso de agua y energ√≠a en hogares.\"},{titulo:\"Desaf√≠o 3\",descripcion:\"Movilidad sostenible para trayectos cortos.\"}],persona:{nombre:\"Diego\",edad:24,bio:\"Estudiante que vive en residencia; quiere reducir su huella y ahorrar.\"}},educacion:{label:\"Educaci√≥n\",desafios:[{titulo:\"Desaf√≠o 1\",descripcion:\"Motivar h√°bitos de estudio en estudiantes con poco tiempo.\"},{titulo:\"Desaf√≠o 2\",descripcion:\"Facilitar aprendizaje pr√°ctico en primer a√±o.\"},{titulo:\"Desaf√≠o 3\",descripcion:\"Mejorar integraci√≥n de estudiantes internacionales.\"}],persona:{nombre:\"Aisha\",edad:19,bio:\"Estudiante internacional de primer a√±o; barrera idiom√°tica y poco tiempo.\"}}};const[THEMES,setTHEMES]=useState(()=>readJSON(THEMES_KEY,defaultTHEMES));const saveTHEMES=next=>{setTHEMES(next);writeJSON(THEMES_KEY,next);try{window.dispatchEvent(new StorageEvent(\"storage\",{key:THEMES_KEY,newValue:JSON.stringify(next)}));}catch(_unused10){}};const[temaSel,setTemaSel]=useState(\"salud\");const[desafioIndex,setDesafioIndex]=useState(0);const desafioActual=THEMES[temaSel].desafios[desafioIndex];/* --Bubbles size-- */const isTabletMedia=useMediaQuery(\"(max-width: 1180px)\");const isMobileMedia=useMediaQuery(\"(max-width: 640px)\");const bubbleSize=isMobileMedia?84:isTabletMedia?96:108;const centerBubbleSize=isMobileMedia?115:isTabletMedia?128:138;const bubblePositions=useMemo(()=>({perfil:{left:\"8%\",top:\"12%\"},limitaciones:{left:\"26%\",top:\"8%\"},motivaciones:{right:\"26%\",top:\"8%\"},entorno:{right:\"8%\",top:\"12%\"},emociones:{left:\"10%\",bottom:\"10%\"},necesidades:{right:\"10%\",bottom:\"10%\"}}),[isTabletMedia,isMobileMedia]);/* --Alumno F1 Tab-- */const[f1Tab,setF1Tab]=useState(\"spot\");/* --UI helpers-- */const VideoSpace=_ref10=>{let{title}=_ref10;return/*#__PURE__*/_jsx(Card,{title:\"Por qu\\xE9 es importante: \".concat(title),subtitle:\"(Video corto explicativo)\",width:900,children:/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",aspectRatio:\"16/9\",background:theme.gris,borderRadius:16,border:\"2px dashed \".concat(theme.border),display:\"flex\",alignItems:\"center\",justifyContent:\"center\",color:\"#90A4AE\",fontWeight:700,pointerEvents:\"none\"},children:\"Video aqu\\xED\"})});};const Instructions=_ref11=>{let{title,bullets}=_ref11;return/*#__PURE__*/_jsx(Card,{title:\"Instrucciones\",subtitle:title,width:900,tight:true,children:/*#__PURE__*/_jsx(\"div\",{style:{textAlign:\"left\"},children:/*#__PURE__*/_jsx(\"ol\",{children:bullets.map((b,i)=>/*#__PURE__*/_jsx(\"li\",{dangerouslySetInnerHTML:{__html:b}},i))})})});};const BigTimer=_ref12=>{let{label,defaultSec}=_ref12;return/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},panelBox),{},{textAlign:\"center\"}),children:[label&&/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:900,color:theme.azul,marginBottom:6},children:label}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:64,fontWeight:900,letterSpacing:1,marginBottom:12},children:mmss(flow.remaining)}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:8,justifyContent:\"center\",flexWrap:\"wrap\"},children:[/*#__PURE__*/_jsx(Btn,{onClick:()=>startTimer(),label:\"\\u25B6 Iniciar\",full:false}),/*#__PURE__*/_jsx(Btn,{onClick:()=>pauseTimer(),label:\"\\u23F8 Pausa\",full:false}),/*#__PURE__*/_jsx(Btn,{onClick:()=>resetTimer(defaultSec),label:\"\\u27F2 Reset\",full:false,variant:\"outline\"})]})]});};/* ===================== SCREENS ===================== */{/* --INICIO  */}if(mode===\"inicio\")return/*#__PURE__*/_jsxs(\"div\",{style:appStyles,children:[/*#__PURE__*/_jsx(Background,{}),/*#__PURE__*/_jsx(GlobalFormCSS,{}),/*#__PURE__*/_jsx(AutoCenter,{children:!showAdminLogin?/*#__PURE__*/_jsx(Card,{title:\"Juego de Emprendimiento UDD\",subtitle:\"Selecciona tu perfil\",width:900,children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:12,marginTop:12,flexWrap:\"wrap\",justifyContent:\"center\"},children:[/*#__PURE__*/_jsx(Btn,{onClick:()=>setMode(\"prof\"),label:\"\\uD83D\\uDC69\\u200D\\uD83C\\uDFEB Profesor\"}),/*#__PURE__*/_jsx(Btn,{onClick:()=>setMode(\"alumno\"),bg:theme.rosa,label:\"\\uD83E\\uDDD1\\u200D\\uD83C\\uDF93 Alumno\"}),/*#__PURE__*/_jsx(Btn,{onClick:()=>{setShowAdminLogin(true);setAdminUser(\"\");setAdminPass(\"\");setAdminErr(\"\");},bg:theme.amarillo,fg:theme.texto,label:\"\\uD83D\\uDEE0\\uFE0F Administrador\"})]})}):/*#__PURE__*/_jsx(Card,{title:\"Acceso Administrador\",subtitle:\"Ingresa tus credenciales\",width:520,children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gap:10,marginTop:8},children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Usuario\",value:adminUser,onChange:e=>setAdminUser(e.target.value),style:baseInput}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Contrase\\xF1a\",type:\"password\",value:adminPass,onChange:e=>setAdminPass(e.target.value),style:baseInput,onKeyDown:e=>{if(e.key===\"Enter\"){if(adminUser===\"1\"&&adminPass===\"1\"){setMode(\"admin\");setShowAdminLogin(false);setAdminUser(\"\");setAdminPass(\"\");setAdminErr(\"\");}else{setAdminErr(\"Usuario o contrase√±a incorrectos\");}}}}),adminErr&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"#D32F2F\",fontWeight:700,fontSize:13},children:adminErr}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:10,justifyContent:\"space-between\",marginTop:6},children:[/*#__PURE__*/_jsx(Btn,{label:\"\\u2B05 Volver\",bg:theme.amarillo,fg:theme.texto,full:false,onClick:()=>{setShowAdminLogin(false);setAdminErr(\"\");}}),/*#__PURE__*/_jsx(Btn,{label:\"Ingresar\",full:false,onClick:()=>{if(adminUser===\"1\"&&adminPass===\"1\"){setMode(\"admin\");setShowAdminLogin(false);setAdminUser(\"\");setAdminPass(\"\");setAdminErr(\"\");}else{setAdminErr(\"Usuario o contrase√±a incorrectos\");}}})]})]})})})]});{/* --ADMIN-- */}if(mode===\"admin\"){return/*#__PURE__*/_jsxs(\"div\",{style:appStyles,children:[/*#__PURE__*/_jsx(Background,{}),/*#__PURE__*/_jsx(GlobalFormCSS,{}),/*#__PURE__*/_jsx(AutoCenter,{children:/*#__PURE__*/_jsx(AdminDashboard,{analytics:analytics,THEMES:THEMES,setTHEMES:saveTHEMES,flow:flow,onBack:()=>setMode(\"inicio\"),ranking:ranking,clearMetrics:()=>update(()=>({roomsCreated:0,challengeUsage:{},teams:[],reflections:[],feedbacks:[]}))})})]});}{/* --PROFESOR-- */}if(mode===\"prof\"){var _flow$presentOrder$fl,_flow$presentOrder;return/*#__PURE__*/_jsxs(\"div\",{style:appStyles,children:[/*#__PURE__*/_jsx(Background,{}),/*#__PURE__*/_jsx(GlobalFormCSS,{}),/*#__PURE__*/_jsxs(AutoCenter,{children:[!flow.roomCode?/*#__PURE__*/_jsx(Card,{title:\"Crear Nueva Sala\",subtitle:\"Define cantidad de equipos\",width:820,children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"1fr 1fr\",gap:12},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{fontSize:12,fontWeight:800,color:theme.azul},children:\"Cantidad de equipos\"}),/*#__PURE__*/_jsxs(\"select\",{value:String(equiposQty),onChange:e=>setEquiposQty(Number(e.target.value)),style:_objectSpread(_objectSpread({},baseInput),{},{padding:10,marginTop:6}),children:[/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"3\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"4\"})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{alignSelf:\"end\"},children:/*#__PURE__*/_jsx(Btn,{onClick:()=>{const code=generateCode();writeJSON(READY_KEY,[]);try{window.dispatchEvent(new StorageEvent(\"storage\",{key:READY_KEY,newValue:JSON.stringify([])}));}catch(_unused11){}writeJSON(COINS_KEY,{});try{window.dispatchEvent(new StorageEvent(\"storage\",{key:COINS_KEY,newValue:JSON.stringify({})}));}catch(_unused12){}publish({roomCode:code,expectedTeams:equiposQty,step:\"lobby\",remaining:5*60,running:false});update(a=>_objectSpread(_objectSpread({},a),{},{roomsCreated:a.roomsCreated+1}));},bg:theme.rosa,label:\"Generar C\\xF3digo\"})})]})}):null,flow.roomCode&&flow.step===\"lobby\"&&/*#__PURE__*/_jsxs(\"div\",{style:{width:\"clamp(320px,92vw,1100px)\",display:\"grid\",gridTemplateColumns:\"1fr 320px\",gap:12},children:[/*#__PURE__*/_jsxs(Card,{title:\"Sala creada\",subtitle:\"Comparte el c\\xF3digo y espera a los equipos\",width:700,children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:32,fontFamily:\"Roboto Mono, ui-monospace, SFMono-Regular, Menlo, monospace\",marginBottom:8,color:theme.azul},children:flow.roomCode}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:13,opacity:.8,marginBottom:12},children:[\"Equipos listos: \",/*#__PURE__*/_jsx(\"b\",{children:readyNow}),\" / \",/*#__PURE__*/_jsx(\"b\",{children:flow.expectedTeams})]}),/*#__PURE__*/_jsx(Btn,{onClick:()=>{if(readyNow<flow.expectedTeams)return;setStep(\"f1_video\");},label:\"Continuar con todos\",disabled:readyNow<flow.expectedTeams})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gap:12,alignContent:\"start\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:panelBox,children:[/*#__PURE__*/_jsx(\"div\",{style:badgeTitle,children:\"\\uD83D\\uDC65 Equipos creados\"}),teamsForCurrentRoom(analytics,flow.roomCode).length===0?/*#__PURE__*/_jsx(\"div\",{style:{opacity:.7},children:\"A\\xFAn no se crean grupos\\u2026\"}):/*#__PURE__*/_jsx(\"div\",{style:{display:\"grid\",gap:6},children:teamsForCurrentRoom(analytics,flow.roomCode).map((name,i)=>/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"1fr auto\",gap:8},children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"b\",{children:name})}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:12,opacity:.7},children:[\"#\",i+1]})]},i))})]}),/*#__PURE__*/_jsxs(\"div\",{style:panelBox,children:[/*#__PURE__*/_jsx(\"div\",{style:badgeTitle,children:\"\\u2705 Marcados \\u201Clisto\\u201D\"}),(()=>{const readySet=readyTeamNames(flow.roomCode);const all=teamsForCurrentRoom(analytics,flow.roomCode);const readyList=all.filter(t=>readySet.has(t));return readyList.length===0?/*#__PURE__*/_jsx(\"div\",{style:{opacity:.7},children:\"Sin equipos listos a\\xFAn\\u2026\"}):/*#__PURE__*/_jsx(\"div\",{style:{display:\"grid\",gap:6},children:readyList.map((t,i)=>/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u2022 \",/*#__PURE__*/_jsx(\"b\",{children:t})]},i))});})()]})]})]}),flow.step===\"f1_video\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:12},children:/*#__PURE__*/_jsx(TeamworkMiniAnim,{loop:true})}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\"},children:/*#__PURE__*/_jsx(Btn,{onClick:()=>setStep(\"f1_instr\"),label:\"Continuar con todos\",full:false})})]}),flow.step===\"f1_instr\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Instructions,{title:\"Fase 1 \\u2014 Trabajo en equipo\",bullets:[\"Juego 1: <b>Spot the Difference</b>.\",\"Juego 2: <b>Matriz de luces</b>.\",\"El tiempo es compartido; ustedes deciden c√≥mo distribuirlo.\"]}),/*#__PURE__*/_jsx(Btn,{onClick:()=>{resetTimer(5*60);setStep(\"f1_activity\",5*60);},label:\"Abrir juegos y timer\",full:false})]}),flow.step===\"f1_activity\"&&/*#__PURE__*/_jsxs(Card,{title:\"Fase 1 \\u2014 En curso\",subtitle:\"Timer visible para todos\",width:720,children:[/*#__PURE__*/_jsx(BigTimer,{label:\"Tiempo F1 (Diferencias/Matriz)\",defaultSec:5*60}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\",marginTop:12},children:/*#__PURE__*/_jsx(Btn,{onClick:()=>setStep(\"f1_rank\"),label:\"Terminar y ver ranking\",full:false})})]}),flow.step===\"f1_rank\"&&/*#__PURE__*/_jsxs(Card,{title:\"Ranking \\u2014 Fase 1\",subtitle:\"Resultados en vivo\",width:900,children:[/*#__PURE__*/_jsx(ConfettiBurst,{}),/*#__PURE__*/_jsx(RankingBars,{data:ranking,onContinue:()=>setStep(\"f2_video\")})]}),flow.step===\"f2_video\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:12},children:/*#__PURE__*/_jsx(EmpathyAnimacion,{loop:true})}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\"},children:/*#__PURE__*/_jsx(Btn,{onClick:()=>setStep(\"f2_instr\"),label:\"Continuar con todos\",full:false})})]}),flow.step===\"f2_instr\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Instructions,{title:\"Fase 2 \\u2014 Empat\\xEDa\",bullets:[\"Elige tem√°tica y desaf√≠o.\",\"Completen el <b>mapa de empat√≠a</b> (10:00).\"]}),/*#__PURE__*/_jsx(Btn,{onClick:()=>setStep(\"f2_theme\"),label:\"Ir a Tem\\xE1tica y Desaf\\xEDo\",full:false})]}),flow.step===\"f2_theme\"&&/*#__PURE__*/_jsxs(Card,{title:\"Tem\\xE1ticas y desaf\\xEDo\",subtitle:\"Cuando est\\xE9n listos, inicia el mapa\",width:980,children:[/*#__PURE__*/_jsx(ThemeChallengeSection,{THEMES:THEMES,temaSel:temaSel,setTemaSel:setTemaSel,desafioIndex:desafioIndex,setDesafioIndex:setDesafioIndex,desafioActual:desafioActual,isTablet:isTablet,onContinue:()=>{}}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\",marginTop:12},children:/*#__PURE__*/_jsx(Btn,{onClick:()=>{update(a=>{const key=\"\".concat(temaSel,\"#\").concat(desafioIndex);const usage=_objectSpread({},a.challengeUsage);usage[key]=(usage[key]||0)+1;return _objectSpread(_objectSpread({},a),{},{challengeUsage:usage});});resetTimer(10*60);setStep(\"f2_activity\",10*60);},label:\"Abrir mapa y timer\",full:false})})]}),flow.step===\"f2_activity\"&&/*#__PURE__*/_jsxs(Card,{title:\"Fase 2 \\u2014 En curso\",subtitle:\"Mapa de empat\\xEDa (timer)\",width:720,children:[/*#__PURE__*/_jsx(BigTimer,{label:\"Tiempo F2 (Empat\\xEDa)\",defaultSec:10*60}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\",marginTop:12},children:/*#__PURE__*/_jsx(Btn,{onClick:()=>setStep(\"f2_rank\"),label:\"Terminar y ver ranking\",full:false})})]}),flow.step===\"f2_rank\"&&/*#__PURE__*/_jsx(Card,{title:\"Ranking \\u2014 Fase 2\",subtitle:\"Resultados en vivo\",width:900,children:/*#__PURE__*/_jsx(RankingBars,{data:ranking,onContinue:()=>setStep(\"f3_video\")})}),flow.step===\"f3_video\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:12},children:/*#__PURE__*/_jsx(CreatividadAnimacion,{loop:true})}),/*#__PURE__*/_jsx(Btn,{onClick:()=>{resetTimer(15*60);setStep(\"f3_activity\",15*60);},label:\"Abrir actividad y timer\",full:false})]}),flow.step===\"f3_activity\"&&/*#__PURE__*/_jsxs(Card,{title:\"Fase 3 \\u2014 En curso\",subtitle:\"Creatividad (timer)\",width:720,children:[/*#__PURE__*/_jsx(BigTimer,{label:\"Tiempo F3 (Creatividad)\",defaultSec:15*60}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\",marginTop:12},children:/*#__PURE__*/_jsx(Btn,{onClick:()=>setStep(\"f3_rank\"),label:\"Terminar y ver ranking\",full:false})})]}),flow.step===\"f3_rank\"&&/*#__PURE__*/_jsx(Card,{title:\"Ranking \\u2014 Fase 3\",subtitle:\"Resultados en vivo\",width:900,children:/*#__PURE__*/_jsx(RankingBars,{data:ranking,onContinue:()=>setStep(\"f4_video\")})}),flow.step===\"f4_video\"&&/*#__PURE__*/_jsx(PitchAnimacion,{showContinue:true,onContinue:()=>{resetTimer(10*60);setStep(\"f4_prep\",10*60);}}),flow.step===\"f4_prep\"&&/*#__PURE__*/_jsxs(Card,{title:\"Fase 4 \\u2014 Preparaci\\xF3n del Pitch\",subtitle:\"Timer visible\",width:720,children:[/*#__PURE__*/_jsx(BigTimer,{label:\"Tiempo F4 (Preparaci\\xF3n)\",defaultSec:10*60}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\",marginTop:12},children:/*#__PURE__*/_jsx(Btn,{onClick:()=>setStep(\"f4_wheel\"),label:\"Ir a RUEDA de orden\",full:false})})]}),flow.step===\"f4_wheel\"&&/*#__PURE__*/_jsx(Card,{title:\"Fase 4 \\u2014 Orden de Presentaci\\xF3n\",subtitle:\"Gira la ruleta o genera orden aleatorio\",width:980,children:/*#__PURE__*/_jsx(WheelOrder,{teams:getTeamsForRoom(analytics,flow.roomCode),onConfirm:order=>{publish({presentOrder:order,currentIdx:0});resetTimer(flow.pitchSeconds);setStep(\"f4_present\",flow.pitchSeconds);}})}),flow.step===\"f4_present\"&&/*#__PURE__*/_jsx(PresentStageTeacher,{currentTeam:(_flow$presentOrder$fl=(_flow$presentOrder=flow.presentOrder)===null||_flow$presentOrder===void 0?void 0:_flow$presentOrder[flow.currentIdx])!==null&&_flow$presentOrder$fl!==void 0?_flow$presentOrder$fl:\"-\",pitchSec:flow.pitchSeconds,startTimer:()=>startTimer(),pauseTimer:()=>pauseTimer(),resetTimer:s=>resetTimer(s),remaining:flow.remaining,onNext:()=>{const nextIdx=flow.currentIdx+1;if(nextIdx>=flow.presentOrder.length){setStep(\"f5_video\");}else{publish({currentIdx:nextIdx});resetTimer(flow.pitchSeconds);setStep(\"f4_present\",flow.pitchSeconds);}}}),flow.step===\"f5_video\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(VideoSpace,{title:\"Evaluaci\\xF3n y retroalimentaci\\xF3n\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\",marginTop:12},children:/*#__PURE__*/_jsx(Btn,{onClick:()=>setStep(\"f5_eval\"),label:\"Abrir evaluaci\\xF3n\",full:false})})]}),flow.step===\"f5_eval\"&&/*#__PURE__*/_jsxs(Card,{title:\"Fase 5 \\u2014 Evaluaci\\xF3n\",subtitle:\"Cada equipo califica a los dem\\xE1s\",width:900,children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:13,opacity:.8,marginBottom:12},children:\"Los estudiantes ver\\xE1n una interfaz con 6 criterios (deslizadores 0\\u20135) y comentario opcional. Cada punto suma 1 moneda al equipo evaluado.\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",gap:10,justifyContent:\"center\"},children:/*#__PURE__*/_jsx(Btn,{onClick:()=>setStep(\"f5_rank\"),label:\"Ver ranking actualizado\",full:false})})]}),flow.step===\"f5_rank\"&&/*#__PURE__*/_jsx(Card,{title:\"Ranking \\u2014 Fase 5\",subtitle:\"Resultados en vivo\",width:900,children:/*#__PURE__*/_jsx(RankingBars,{data:ranking,onContinue:()=>setStep(\"f6_video\")})}),flow.step===\"f6_video\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(VideoSpace,{title:\"Cierre y reflexi\\xF3n\"}),/*#__PURE__*/_jsx(Btn,{onClick:()=>setStep(\"f6_close\"),label:\"Ir a cierre\",full:false})]}),flow.step===\"f6_close\"&&/*#__PURE__*/_jsxs(Card,{title:\"Cierre y Apoyo\",subtitle:\"Reflexi\\xF3n final (demo)\",width:900,tight:true,children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"left\"},children:[/*#__PURE__*/_jsx(\"p\",{style:{marginTop:0},children:\"\\uD83C\\uDF89 \\xA1Felicitaciones! Pidan a cada equipo escribir su reflexi\\xF3n final.\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"(Vista profesor) \\u2014 Aqu\\xED solo mostramos un ejemplo\",style:_objectSpread(_objectSpread({},baseInput),{},{minHeight:120})})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\",gap:10,marginTop:12},children:/*#__PURE__*/_jsx(Btn,{onClick:()=>setStep(\"qr\"),bg:theme.azul,label:\"Ir a QR\",full:false})})]}),flow.step===\"qr\"&&/*#__PURE__*/_jsxs(Card,{title:\"\\xA1Eval\\xFAa el juego!\",subtitle:\"Escanea el c\\xF3digo QR con tu celular\",width:700,children:[/*#__PURE__*/_jsx(\"div\",{style:{width:260,height:260,margin:\"12px auto\",background:\"#fff\",border:\"3px dashed \".concat(theme.border),borderRadius:16,display:\"grid\",placeItems:\"center\",color:\"#90A4AE\",fontWeight:800},children:\"QR aqu\\xED\"}),/*#__PURE__*/_jsx(Btn,{onClick:()=>{// reset de sala\npublish({roomCode:\"\",expectedTeams:0,step:\"lobby\",remaining:5*60,running:false});clearReadyForRoom();writeJSON(COINS_KEY,{});try{window.dispatchEvent(new StorageEvent(\"storage\",{key:COINS_KEY,newValue:JSON.stringify({})}));}catch(_unused13){}},bg:theme.rosa,label:\"Terminar\",full:false})]})]})]});}{/* ================= ALUMNO ================= */}if(mode===\"alumno\"){return/*#__PURE__*/_jsxs(\"div\",{style:appStyles,children:[/*#__PURE__*/_jsx(Background,{}),/*#__PURE__*/_jsx(GlobalFormCSS,{}),/*#__PURE__*/_jsxs(AutoCenter,{children:[(!joinedRoom||joinedRoom!==flow.roomCode)&&/*#__PURE__*/_jsxs(Card,{title:\"Alumno\",subtitle:\"Ingresa el c\\xF3digo de sala para continuar\",width:520,children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"C\\xF3digo de sala\",value:roomCode,onChange:e=>setRoomCode(e.target.value.toUpperCase()),style:_objectSpread(_objectSpread({},baseInput),{},{textAlign:\"center\",fontWeight:700,marginBottom:14})}),/*#__PURE__*/_jsx(Btn,{onClick:()=>{const f=readJSON(FLOW_KEY,initialFlow);if(!f.roomCode){alert(\"A√∫n no hay sala activa. Espera al profesor.\");return;}if(f.roomCode!==roomCode.trim()){alert(\"C√≥digo incorrecto. Verifica con el profesor.\");return;}sessionStorage.setItem(JOINED_KEY,f.roomCode);setJoinedRoom(f.roomCode);},label:\"Entrar a la sala\"}),/*#__PURE__*/_jsx(Btn,{onClick:()=>setMode(\"inicio\"),bg:theme.amarillo,fg:theme.texto,label:\"\\u2B05 Back\"})]}),joinedRoom===flow.roomCode&&flow.roomCode&&!teamReady&&/*#__PURE__*/_jsxs(Card,{title:\"Sala \".concat(flow.roomCode),subtitle:\"Crea tu grupo y marca listo\",width:980,children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:isTablet?\"1fr\":\"1fr 1fr auto\",gap:10,marginBottom:12},children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Nombre de grupo\",value:groupName,onChange:e=>setGroupName(e.target.value),style:baseInput}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"1fr 1fr\",gap:10},children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Tu nombre\",value:miNombre,onChange:e=>setMiNombre(e.target.value),style:baseInput}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Tu carrera\",value:miCarrera,onChange:e=>setMiCarrera(e.target.value),style:baseInput})]}),/*#__PURE__*/_jsx(Btn,{onClick:()=>{if(!groupName.trim()){alert(\"Primero escribe el nombre del grupo.\");return;}setIntegrantes(arr=>[...arr,{nombre:miNombre||\"Integrante\",carrera:miCarrera||\"‚Äî\"}]);setMiNombre(\"\");setMiCarrera(\"\");},bg:theme.rosa,label:\"Agregar integrante\",full:false})]}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"left\",maxHeight:220,overflowY:\"auto\",padding:8,border:\"1px dashed \".concat(theme.border),borderRadius:12,background:\"#fff\"},children:[integrantes.length===0&&/*#__PURE__*/_jsx(\"div\",{style:{opacity:.7},children:\"A\\xFAn no hay integrantes\\u2026\"}),integrantes.map((p,i)=>/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"40px 1fr 1fr\",gap:10,padding:\"8px 0\",alignItems:\"center\",borderBottom:i<integrantes.length-1?\"1px solid #eee\":\"none\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:800,color:theme.azul},children:[i+1,\".\"]}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:700},children:p.nombre}),/*#__PURE__*/_jsx(\"div\",{style:{opacity:.8},children:p.carrera})]},i))]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:10,marginTop:12,justifyContent:\"space-between\",flexWrap:\"wrap\"},children:[/*#__PURE__*/_jsx(Btn,{onClick:()=>setMode(\"inicio\"),bg:theme.amarillo,fg:theme.texto,label:\"\\u2B05 Back\",full:false}),/*#__PURE__*/_jsx(Btn,{onClick:markReady,label:\"Marcar listo y esperar al profesor\",full:false,disabled:!groupName.trim()})]})]}),joinedRoom===flow.roomCode&&flow.roomCode&&teamReady&&flow.step===\"lobby\"&&/*#__PURE__*/_jsxs(Card,{title:\"Esperando al profesor\",subtitle:\"A\\xFAn no inicia la fase 1\",width:720,children:[/*#__PURE__*/_jsx(\"div\",{style:{textAlign:\"center\",fontSize:18,padding:20},children:\"\\u23F3 Esperando a que el profesor comience...\"}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\",opacity:.7,fontSize:14},children:[\"Verifica en la sala del profesor que tu grupo aparece como \",/*#__PURE__*/_jsx(\"b\",{children:\"listo\"}),\".\"]})]}),flow.step===\"f1_video\"&&/*#__PURE__*/_jsx(TeamworkMiniAnim,{}),flow.step===\"f1_instr\"&&/*#__PURE__*/_jsx(Instructions,{title:\"Fase 1 \\u2014 Trabajo en equipo\",bullets:[\"El profesor controla el tiempo y el avance.\",\"Usa las pesta√±as para cambiar entre <b>Diferencias</b> y <b>Matriz</b>.\",\"Ambos comparten el mismo temporizador.\"]}),flow.step===\"f1_activity\"&&/*#__PURE__*/_jsxs(Card,{title:\"Fase 1 \\u2014 Actividades\",subtitle:\"Tiempo: \".concat(mmss(flow.remaining),\" \\xB7 Monedas: \").concat(coins),width:1100,children:[/*#__PURE__*/_jsx(\"div\",{style:{position:\"sticky\",top:12,zIndex:5,background:\"transparent\",paddingBottom:6,marginBottom:10},children:/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",gap:8,overflowX:\"auto\"},children:[{key:\"spot\",label:\"üîé Diferencias\"},{key:\"matrix\",label:\"üî≤ Matriz\"}].map(t=>{const active=f1Tab===t.key;return/*#__PURE__*/_jsx(\"button\",{onClick:()=>setF1Tab(t.key),style:{padding:\"8px 12px\",borderRadius:12,border:\"2px solid \".concat(active?theme.rosa:theme.border),background:active?\"#FFF3F7\":\"#fff\",fontWeight:800,cursor:\"pointer\",whiteSpace:\"nowrap\"},children:t.label},t.key);})})}),f1Tab===\"spot\"?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:13,marginBottom:8,opacity:.9},children:[\"Toca en la \",/*#__PURE__*/_jsx(\"b\",{children:\"imagen izquierda\"}),\" donde veas una diferencia. Puedes usar hasta 2 pistas (\\u22121 moneda).\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:isTablet?\"1fr\":\"1fr 1fr\",gap:16},children:[/*#__PURE__*/_jsxs(\"div\",{ref:spotRef,onClick:clickSpot,style:{position:\"relative\",width:\"100%\",aspectRatio:\"16/7\",background:\"#fff\",borderRadius:16,overflow:\"hidden\",cursor:flow.running?\"crosshair\":\"not-allowed\",border:\"1px solid \".concat(theme.border)},children:[/*#__PURE__*/_jsxs(\"svg\",{viewBox:\"0 0 100 100\",preserveAspectRatio:\"none\",style:{position:\"absolute\",inset:0,width:\"100%\",height:\"100%\"},children:[/*#__PURE__*/_jsx(\"rect\",{x:\"5\",y:\"10\",width:\"20\",height:\"20\",fill:\"#90CAF9\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"50\",cy:\"25\",r:\"10\",fill:\"#F48FB1\"}),/*#__PURE__*/_jsx(\"polygon\",{points:\"80,15 90,35 70,35\",fill:\"#A5D6A7\"}),/*#__PURE__*/_jsx(\"polygon\",{points:\"30,70 40,90 20,90\",fill:theme.amarillo})]}),/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",inset:0,display:\"grid\",gridTemplateColumns:\"1fr 1fr\",gridTemplateRows:\"1fr 1fr\"},children:[\"A\",\"B\",\"C\",\"D\"].map(z=>/*#__PURE__*/_jsx(\"div\",{style:{outline:\"1px dashed rgba(0,0,0,.06)\",padding:6,fontSize:12,color:\"#78909C\"},children:z},z))}),diffs.filter(d=>d.found).map((d,i)=>/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",left:\"\".concat(d.x*100,\"%\"),top:\"\".concat(d.y*100,\"%\"),transform:\"translate(-50%,-50%)\",width:d.r*200,height:d.r*200,borderRadius:\"50%\",border:\"3px solid \".concat(theme.rosa),boxShadow:\"0 0 0 4px rgba(233,30,99,.2)\"}},i))]}),/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({position:\"relative\",width:\"100%\",aspectRatio:\"16/7\"},panelBox),{},{overflow:\"hidden\"}),children:/*#__PURE__*/_jsxs(\"svg\",{viewBox:\"0 0 100 100\",preserveAspectRatio:\"none\",style:{position:\"absolute\",inset:0,width:\"100%\",height:\"100%\"},children:[/*#__PURE__*/_jsx(\"rect\",{x:\"5\",y:\"10\",width:\"20\",height:\"22\",fill:\"#90CAF9\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"50\",cy:\"25\",r:\"9\",fill:\"#F48FB1\"}),/*#__PURE__*/_jsx(\"polygon\",{points:\"82,17 92,37 72,37\",fill:\"#A5D6A7\"}),/*#__PURE__*/_jsx(\"rect\",{x:\"22\",y:\"80\",width:\"16\",height:\"8\",fill:theme.amarillo})]})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:10,justifyContent:\"space-between\",alignItems:\"center\",marginTop:12,flexWrap:\"wrap\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:13,opacity:.8},children:[\"Encontradas: \",diffs.filter(d=>d.found).length,\"/4 \\xB7 Pistas: \",hintsLeft]}),/*#__PURE__*/_jsx(Btn,{onClick:useHint,bg:theme.amarillo,fg:theme.texto,label:\"\\uD83D\\uDCA1 Pista (\\u22121)\",full:false,disabled:hintsLeft<=0||!flow.running})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:13,marginBottom:8,opacity:.9},children:[\"Reproduce el \",/*#__PURE__*/_jsx(\"b\",{children:\"patr\\xF3n objetivo\"}),\" en tu tablero. El tiempo sigue corriendo.\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:isTablet?\"1fr\":\"1fr 1fr\",gap:16,alignItems:\"start\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:panelBox,children:[/*#__PURE__*/_jsx(\"div\",{style:badgeTitle,children:\"Patr\\xF3n objetivo\"}),/*#__PURE__*/_jsx(GridView,{readOnly:true,grid:goal,size:5,onClickCell:()=>{}}),/*#__PURE__*/_jsxs(\"div\",{style:smallHint,children:[\"Celdas encendidas: \",goal.flat().filter(Boolean).length]})]}),/*#__PURE__*/_jsxs(\"div\",{style:panelBox,children:[/*#__PURE__*/_jsx(\"div\",{style:badgeTitle,children:\"Tablero del equipo\"}),/*#__PURE__*/_jsx(GridView,{grid:grid,size:5,onClickCell:toggleCell}),/*#__PURE__*/_jsxs(\"div\",{style:smallHint,children:[\"Progreso: \",grid.flat().filter((v,i)=>v===goal.flat()[i]).length,\"/\",5*5,\" coincidencias\"]})]})]})]})]}),flow.step===\"f1_rank\"&&/*#__PURE__*/_jsx(Card,{title:\"Ranking \\u2014 Fase 1\",subtitle:\"Resultados en vivo\",width:900,children:/*#__PURE__*/_jsx(RankingBars,{data:ranking,onContinue:()=>setStep(\"f2_video\")})}),flow.step===\"f2_video\"&&/*#__PURE__*/_jsx(EmpathyAnimacion,{loop:true}),flow.step===\"f2_instr\"&&/*#__PURE__*/_jsx(Instructions,{title:\"Fase 2 \\u2014 Empat\\xEDa\",bullets:[\"El profesor anunciar√° la tem√°tica/desaf√≠o.\",\"Completa el mapa de empat√≠a. El tiempo lo controla el profesor.\"]}),flow.step===\"f2_theme\"&&/*#__PURE__*/_jsx(Card,{title:\"Tem\\xE1tica y desaf\\xEDo\",subtitle:\"Esperando al profesor para iniciar el mapa\",width:980,children:/*#__PURE__*/_jsx(ThemeChallengeSection,{THEMES:THEMES,temaSel:temaSel,setTemaSel:setTemaSel,desafioIndex:desafioIndex,setDesafioIndex:setDesafioIndex,desafioActual:desafioActual,isTablet:isTablet,onContinue:()=>{}})}),flow.step===\"f2_activity\"&&/*#__PURE__*/_jsx(Card,{title:\"Etapa 2 \\u2014 \".concat(THEMES[temaSel].label,\": \").concat(desafioActual.titulo),subtitle:\"Tiempo: \".concat(mmss(flow.remaining),\" \\xB7 Monedas: \").concat(coins),width:1100,children:/*#__PURE__*/_jsx(EmpathySection,{isTablet:isTablet,isMobile:isMobile,bubbleSize:bubbleSize,centerBubbleSize:centerBubbleSize,bubblePositions:bubblePositions,EMPATIA_FIELDS:EMPATIA_FIELDS,empatia:empatia,setActiveBubble:setActiveBubble,activeBubble:activeBubble,onEmpatiaChange:onEmpatiaChange})}),flow.step===\"f2_rank\"&&/*#__PURE__*/_jsx(Card,{title:\"Ranking \\u2014 Fase 2\",subtitle:\"Resultados en vivo\",width:900,children:/*#__PURE__*/_jsx(RankingBars,{data:ranking,onContinue:()=>setStep(\"f3_video\")})}),flow.step===\"f3_video\"&&/*#__PURE__*/_jsx(CreatividadAnimacion,{loop:true}),flow.step===\"f3_activity\"&&/*#__PURE__*/_jsx(Card,{title:\"Etapa 3 \\u2014 Creatividad (LEGO)\",subtitle:\"Tiempo: \".concat(mmss(flow.remaining),\" \\xB7 Monedas: \").concat(coins),width:900,children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:isTablet?\"1fr\":\"1fr 1fr\",gap:10,alignItems:\"center\"},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{marginTop:0},children:\"Sube una foto de tu soluci\\xF3n (demo):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{marginTop:0},children:\"Mini-retos (3 monedas c/u):\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"grid\",gap:8},children:[\"Prototipo montado\",\"Soluci√≥n explicada\",\"Foto clara\"].map(r=>/*#__PURE__*/_jsx(Btn,{onClick:()=>setCoins(c=>c+3),bg:\"#C8E6C9\",fg:\"#1B5E20\",label:\"\\u2714 \".concat(r)},r))})]})]})}),flow.step===\"f3_rank\"&&/*#__PURE__*/_jsx(Card,{title:\"Ranking \\u2014 Fase 3\",subtitle:\"Resultados en vivo\",width:900,children:/*#__PURE__*/_jsx(RankingBars,{data:ranking,onContinue:()=>setStep(\"f4_video\")})}),flow.step===\"f4_video\"&&/*#__PURE__*/_jsx(PitchAnimacion,{}),flow.step===\"f4_prep\"&&/*#__PURE__*/_jsx(Card,{title:\"Etapa 4 \\u2014 Comunicaci\\xF3n (preparaci\\xF3n)\",subtitle:\"Tiempo: \".concat(mmss(flow.remaining)),width:1100,tight:true,children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:isTablet?\"1fr\":\"380px 1fr\",gap:12,textAlign:\"left\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread({},panelBox),children:[/*#__PURE__*/_jsx(\"div\",{style:badgeTitle,children:\"Estructura recomendada\"}),/*#__PURE__*/_jsxs(\"ol\",{style:{marginTop:0,paddingLeft:18},children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Hook\"}),\" (problema en 1 frase)\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Usuario\"}),\" y evidencia breve\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Soluci\\xF3n\"}),\" y c\\xF3mo funciona\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Valor\"}),\" (qu\\xE9 mejora, m\\xE9tricas)\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Impacto\"}),\" y pr\\xF3ximos pasos\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread({},panelBox),children:[/*#__PURE__*/_jsx(\"div\",{style:badgeTitle,children:\"Borrador del pitch\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Escribe tu pitch...\",style:_objectSpread(_objectSpread({},baseInput),{},{minHeight:260})})]})]})}),flow.step===\"f4_present\"&&/*#__PURE__*/_jsx(EvaluationPanelStudent,{roomCode:flow.roomCode,teams:getTeamsForRoom(analytics,flow.roomCode),analyticsUpdate:update,fromTeam:teamId.split(\"::\")[1]||\"Equipo\"}),flow.step===\"f5_video\"&&/*#__PURE__*/_jsx(Card,{title:\"\\xA1Eval\\xFAa el juego!\",subtitle:\"Escanea el c\\xF3digo QR con tu celular\",width:700,children:/*#__PURE__*/_jsx(\"div\",{style:{width:260,height:260,margin:\"12px auto\",background:\"#fff\",border:\"3px dashed \".concat(theme.border),borderRadius:16,display:\"grid\",placeItems:\"center\",color:\"#90A4AE\",fontWeight:800},children:\"QR aqu\\xED\"})}),flow.step===\"f5_rank\"&&/*#__PURE__*/_jsx(Card,{title:\"Ranking \\u2014 Fase 5\",subtitle:\"Resultados en vivo\",width:900,children:/*#__PURE__*/_jsx(RankingBars,{data:ranking,onContinue:()=>setStep(\"f6_video\")})}),flow.step===\"f6_video\"&&/*#__PURE__*/_jsx(VideoSpace,{title:\"Cierre y reflexi\\xF3n\"}),flow.step===\"f6_close\"&&/*#__PURE__*/_jsx(Card,{title:\"Cierre y Apoyo\",subtitle:\"Monedas finales: \".concat(coins),width:900,tight:true,children:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"left\"},children:[/*#__PURE__*/_jsx(\"p\",{style:{marginTop:0},children:\"\\uD83C\\uDF89 \\xA1Felicitaciones! Escribe tu reflexi\\xF3n final.\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"reflexionText\",placeholder:\"Escribe tu reflexi\\xF3n...\",style:_objectSpread(_objectSpread({},baseInput),{},{minHeight:120})}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"flex-end\",marginTop:8},children:/*#__PURE__*/_jsx(Btn,{label:\"Enviar reflexi\\xF3n\",full:false,onClick:()=>{const ta=document.getElementById(\"reflexionText\");const text=((ta===null||ta===void 0?void 0:ta.value)||\"\").trim();if(!text){alert(\"Escribe una reflexi√≥n primero\");return;}const teamName=teamId.split(\"::\")[1]||\"Equipo\";update(a=>_objectSpread(_objectSpread({},a),{},{reflections:[...a.reflections,{roomCode:flow.roomCode,teamName,text,ts:Date.now()}]}));alert(\"¬°Gracias! Reflexi√≥n registrada.\");if(ta)ta.value=\"\";}})})]})}),flow.step===\"qr\"&&/*#__PURE__*/_jsx(Card,{title:\"\\xA1Eval\\xFAa el juego!\",subtitle:\"Escanea el c\\xF3digo QR con tu celular\",width:700,children:/*#__PURE__*/_jsx(\"div\",{style:{width:260,height:260,margin:\"12px auto\",background:\"#fff\",border:\"3px dashed \".concat(theme.border),borderRadius:16,display:\"grid\",placeItems:\"center\",color:\"#90A4AE\",fontWeight:800},children:\"QR aqu\\xED\"})})]})]});}return null;}/* ===================== REUSABLES ===================== */function GridView(_ref13){let{grid,size,onClickCell,readOnly}=_ref13;const isTablet=useMediaQuery(\"(max-width: 1180px)\");const isMobile=useMediaQuery(\"(max-width: 640px)\");const cell=isMobile?22:isTablet?28:34;return/*#__PURE__*/_jsx(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"repeat(\".concat(size,\", \").concat(cell,\"px)\"),gap:6,justifyContent:\"center\"},children:grid.map((row,r)=>row.map((on,c)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>!readOnly&&onClickCell(r,c),style:{width:cell,height:cell,borderRadius:8,border:\"1px solid \".concat(theme.border),background:on?theme.rosa:\"#FFFFFF\",boxShadow:on?\"inset 0 0 0 3px rgba(233,30,99,.15)\":\"none\",cursor:readOnly?\"default\":\"pointer\"}},\"\".concat(r,\"-\").concat(c))))});}/* --Tema/Desaf√≠o UI-- */function ThemeChallengeSection(_ref14){let{THEMES,temaSel,setTemaSel,desafioIndex,setDesafioIndex,desafioActual,isTablet,onContinue}=_ref14;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",gap:8,justifyContent:\"center\",marginBottom:12,flexWrap:\"wrap\",position:\"relative\",zIndex:3},children:Object.keys(THEMES).map(key=>{const active=temaSel===key;return/*#__PURE__*/_jsx(Btn,{onClick:()=>setTemaSel(key),bg:active?theme.azul:\"#BBDEFB\",fg:active?theme.blanco:theme.texto,label:THEMES[key].label,full:false},String(key));})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:isTablet?\"1fr\":\"280px 1fr 360px\",gap:16,alignItems:\"start\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:panelBox,children:[/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},badgeTitle),{},{marginBottom:8}),children:\"Desaf\\xEDos\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"grid\",gap:8},children:THEMES[temaSel].desafios.map((d,idx)=>{const active=desafioIndex===idx;return/*#__PURE__*/_jsx(\"button\",{onClick:()=>setDesafioIndex(idx),style:{textAlign:\"left\",padding:10,borderRadius:12,border:\"2px solid \".concat(active?theme.rosa:theme.border),background:active?\"#FFF3F7\":\"#fff\",fontWeight:700,cursor:\"pointer\"},children:d.titulo},idx);})})]}),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},panelBox),{},{padding:10}),children:[/*#__PURE__*/_jsx(\"div\",{style:_objectSpread(_objectSpread({},badgeTitle),{},{marginBottom:6}),children:\"Video de contexto\"}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",aspectRatio:\"16/9\",background:theme.surfaceAlt,borderRadius:12,border:\"2px dashed \".concat(theme.border),display:\"grid\",placeItems:\"center\",color:\"#90A4AE\",fontWeight:700,pointerEvents:\"none\"},children:\"Video aqu\\xED\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},panelBox),{},{textAlign:\"left\",padding:16}),children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:900,color:theme.rosa,marginBottom:6},children:desafioActual.titulo}),/*#__PURE__*/_jsx(\"p\",{style:{marginTop:0},children:desafioActual.descripcion}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"auto 1fr\",gap:12,alignItems:\"center\",background:\"#FAFAFA\",padding:10,borderRadius:12,border:\"1px solid #eee\",marginBottom:10},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:56,height:56,borderRadius:\"50%\",background:theme.rosa,color:theme.blanco,display:\"grid\",placeItems:\"center\",fontWeight:900,boxShadow:\"0 0 0 4px rgba(233,30,99,.15)\"},children:THEMES[temaSel].persona.nombre.charAt(0)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:800,color:theme.azul},children:[THEMES[temaSel].persona.nombre,\" \\xB7 \",THEMES[temaSel].persona.edad,\" a\\xF1os\"]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:13,opacity:.85},children:THEMES[temaSel].persona.bio})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"flex-end\"},children:/*#__PURE__*/_jsx(Btn,{onClick:onContinue,label:\"Elegir y continuar\",full:false})})]})]})]});}/* ===================== REUSABLES (resto de componentes) ===================== *//* --(mapa de empat√≠a) -- */function EmpathySection(props){var _EMPATIA_FIELDS$find,_EMPATIA_FIELDS$find2;const{isTablet,isMobile,bubbleSize,centerBubbleSize,bubblePositions,EMPATIA_FIELDS,empatia,setActiveBubble,activeBubble,onEmpatiaChange}=props;return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:isTablet?\"1fr\":\"420px 1fr\",gap:16,textAlign:\"left\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({position:\"relative\",height:isMobile?300:340},panelBox),{},{overflow:\"hidden\"}),children:[/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",left:\"50%\",top:\"55%\",transform:\"translate(-50%,-50%)\",width:centerBubbleSize,height:centerBubbleSize,borderRadius:\"50%\",background:\"#FFF3F7\",border:\"3px solid \".concat(theme.rosa),display:\"grid\",placeItems:\"center\",fontWeight:900,color:theme.rosa,textAlign:\"center\",padding:12},children:\"Persona\"}),EMPATIA_FIELDS.map(f=>{var _empatia$f$key;const filled=!!((_empatia$f$key=empatia[f.key])!==null&&_empatia$f$key!==void 0&&_empatia$f$key.trim());const active=activeBubble===f.key;return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveBubble(f.key),style:_objectSpread(_objectSpread({position:\"absolute\"},bubblePositions[f.key]||{}),{},{width:bubbleSize,height:bubbleSize,borderRadius:\"50%\",border:\"3px solid \".concat(active?theme.azul:theme.rosa),background:filled?\"#E1F5FE\":\"#FFFDE7\",color:theme.texto,fontWeight:800,cursor:\"pointer\",boxShadow:active?\"0 0 0 6px rgba(25,118,210,.15)\":\"0 6px 14px rgba(0,0,0,.08)\"}),title:f.label,children:[filled?\"‚úî \":\"\",f.label]},f.key);})]}),/*#__PURE__*/_jsxs(\"div\",{style:panelBox,children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:900,color:theme.azul,marginBottom:6},children:(_EMPATIA_FIELDS$find=EMPATIA_FIELDS.find(x=>x.key===activeBubble))===null||_EMPATIA_FIELDS$find===void 0?void 0:_EMPATIA_FIELDS$find.label}),/*#__PURE__*/_jsx(\"textarea\",{value:empatia[activeBubble],onChange:e=>onEmpatiaChange(activeBubble,e.target.value),placeholder:\"Escribe sobre \".concat((_EMPATIA_FIELDS$find2=EMPATIA_FIELDS.find(x=>x.key===activeBubble))===null||_EMPATIA_FIELDS$find2===void 0?void 0:_EMPATIA_FIELDS$find2.label,\"...\"),style:_objectSpread(_objectSpread({},baseInput),{},{minHeight:160})}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,opacity:.75,marginTop:8},children:\"Consejos: ejemplos concretos, verbos en acci\\xF3n, datos o citas del usuario.\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:13,opacity:.85,marginTop:12},children:[\"Completadas: \",EMPATIA_FIELDS.filter(f=>empatia[f.key].trim()).length,\"/\",EMPATIA_FIELDS.length]})]})]});}/* --Confetti-- */const ConfettiBurst=()=>{const[items,setItems]=useState([]);useEffect(()=>{const EMOJIS=[\"üéâ\",\"üéä\",\"‚ú®\",\"üèÜ\",\"üéà\",\"üí•\",\"‚≠ê\"];const arr=Array.from({length:28}).map((_,i)=>({id:i,left:Math.random()*100,delay:Math.random()*.8,emoji:EMOJIS[Math.floor(Math.random()*EMOJIS.length)]}));setItems(arr);const t=setTimeout(()=>setItems([]),2500);return()=>clearTimeout(t);},[]);return/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",inset:0,overflow:\"hidden\",pointerEvents:\"none\"},children:items.map(p=>/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",top:-20,left:\"\".concat(p.left,\"%\"),fontSize:22,animation:\"fall \".concat(1.8+Math.random()*.9,\"s ease-in \").concat(p.delay,\"s forwards\")},children:p.emoji},p.id))});};/* --RankingBars-- */function RankingBars(_ref15){let{data,onContinue}=_ref15;const[mounted,setMounted]=useState(false);useEffect(()=>setMounted(true),[]);const max=Math.max(1,...data.map(d=>d.total||0));return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread({},panelBox),children:[data.length===0&&/*#__PURE__*/_jsx(\"div\",{style:{opacity:.7},children:\"A\\xFAn no hay datos de equipos\\u2026\"}),data.map((r,i)=>{const pct=Math.round(r.total/max*100);const isFirst=i===0;const isLast=i===data.length-1;const secondOrThird=!isFirst&&!isLast;const barBg=isFirst?\"linear-gradient(90deg, \".concat(theme.amarillo,\", #FFF59D, \").concat(theme.amarillo,\")\"):secondOrThird?\"linear-gradient(90deg, \".concat(theme.azul,\"22, \").concat(theme.azul,\"66)\"):\"#CFD8DC\";return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"56px 1fr 90px\",gap:8,alignItems:\"center\",marginBottom:12},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:900,fontSize:18,color:theme.blanco,textShadow:\"0 1px 2px rgba(0,0,0,.3)\"},children:[i+1,isFirst&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:22,lineHeight:\"16px\",animation:\"crownFloat 1.6s ease-in-out infinite\"},children:\"\\uD83D\\uDC51\"}),isLast&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:18,lineHeight:\"16px\"},children:\"\\uD83D\\uDD17\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{position:\"relative\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{position:\"absolute\",left:10,top:-18,fontWeight:800,color:isLast?\"#607D8B\":theme.texto},children:[r.equipo,i===1&&data.length>=2?\" ü•à\":i===2&&data.length>=3?\" ü•â\":\"\"]}),/*#__PURE__*/_jsx(\"div\",{style:{height:28,background:\"#F1F5F9\",borderRadius:14,overflow:\"hidden\",boxShadow:\"inset 0 0 0 1px #e2e8f0\"},children:/*#__PURE__*/_jsx(\"div\",{style:{height:\"100%\",width:mounted?\"\".concat(pct,\"%\"):0,transition:\"width .9s ease\",background:barBg,backgroundSize:isFirst?\"200% 100%\":undefined,animation:isFirst?\"shimmer 2.4s linear infinite\":undefined,borderRadius:14,position:\"relative\",filter:isLast?\"grayscale(.3)\":\"none\"}})})]}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:\"right\",fontWeight:900,fontSize:18},children:r.total})]},r.equipo);})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\",gap:10,marginTop:12},children:/*#__PURE__*/_jsx(Btn,{onClick:onContinue,label:\"Continuar\",full:false})})]});}/* --Ruleta/Orden presentaciones (profesor)-- */function WheelOrder(_ref16){let{teams,onConfirm}=_ref16;const[order,setOrder]=useState([]);const remaining=teams.filter(t=>!order.includes(t));return/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread({},panelBox),children:[/*#__PURE__*/_jsx(\"div\",{style:_objectSpread({},badgeTitle),children:\"Ruleta / Orden aleatorio\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gap:10},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"1fr 1fr\",gap:10},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:800,marginBottom:6},children:\"Equipos disponibles\"}),/*#__PURE__*/_jsx(\"div\",{style:{border:\"1px dashed \".concat(theme.border),borderRadius:12,padding:10,background:\"#fff\",minHeight:80},children:remaining.length===0?/*#__PURE__*/_jsx(\"div\",{style:{opacity:.6},children:\"Sin equipos pendientes\"}):remaining.map((t,i)=>/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u2022 \",t]},i))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:800,marginBottom:6},children:\"Orden elegido\"}),/*#__PURE__*/_jsx(\"div\",{style:{border:\"1px dashed \".concat(theme.border),borderRadius:12,padding:10,background:\"#fff\",minHeight:80},children:order.length===0?/*#__PURE__*/_jsx(\"div\",{style:{opacity:.6},children:\"A\\xFAn no hay orden\\u2026\"}):order.map((t,i)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"b\",{children:[i+1,\".\"]}),\" \",t]},i))})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:8,flexWrap:\"wrap\"},children:[/*#__PURE__*/_jsx(Btn,{full:false,label:\"\\uD83C\\uDFB0 Girar (agrega 1 equipo)\",onClick:()=>{if(remaining.length===0)return;const next=remaining[Math.floor(Math.random()*remaining.length)];setOrder(o=>[...o,next]);}}),/*#__PURE__*/_jsx(Btn,{full:false,variant:\"outline\",label:\"\\uD83C\\uDFB2 Girar 3 veces\",onClick:()=>{let pool=remaining.slice();const picks=[];for(let i=0;i<3&&pool.length;i++){const idx=Math.floor(Math.random()*pool.length);picks.push(pool[idx]);pool.splice(idx,1);}setOrder(o=>[...o,...picks]);}}),/*#__PURE__*/_jsx(Btn,{full:false,variant:\"outline\",label:\"\\uD83D\\uDD00 Generar todo al azar\",onClick:()=>setOrder(o=>[...o,...shuffle(remaining)])}),/*#__PURE__*/_jsx(Btn,{full:false,bg:\"#F44336\",label:\"\\u21BA Limpiar\",onClick:()=>setOrder([])}),/*#__PURE__*/_jsx(\"div\",{style:{marginLeft:\"auto\"},children:/*#__PURE__*/_jsx(Btn,{full:false,label:\"\\u2705 Confirmar orden y comenzar\",onClick:()=>{const finalOrder=order.length?order:[...shuffle(teams)];onConfirm(finalOrder);}})})]})]})]});}/* --Escenario Pitch (profesor) -- */function PresentStageTeacher(_ref17){let{currentTeam,onNext,pitchSec,startTimer,pauseTimer,resetTimer,remaining}=_ref17;return/*#__PURE__*/_jsx(\"div\",{style:{display:\"grid\",gap:12},children:/*#__PURE__*/_jsxs(Card,{title:\"Pitch en curso\",subtitle:\"Presenta: \".concat(currentTeam),width:900,children:[/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",aspectRatio:\"16/7\",borderRadius:16,border:\"2px solid \".concat(theme.border),display:\"grid\",placeItems:\"center\",background:\"linear-gradient(135deg,#fff 0%, #F1F5F9 60%)\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:28,fontWeight:900,color:theme.azul},children:[\"\\uD83C\\uDFA4 Escenario \\u2014 \",currentTeam]})}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:12},children:/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},panelBox),{},{textAlign:\"center\"}),children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:900,color:theme.azul,marginBottom:6},children:\"Tiempo de pitch\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:64,fontWeight:900,letterSpacing:1,marginBottom:12},children:mmss(remaining)}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:8,justifyContent:\"center\",flexWrap:\"wrap\"},children:[/*#__PURE__*/_jsx(Btn,{onClick:()=>startTimer(),label:\"\\u25B6 Iniciar\",full:false}),/*#__PURE__*/_jsx(Btn,{onClick:()=>pauseTimer(),label:\"\\u23F8 Pausa\",full:false}),/*#__PURE__*/_jsx(Btn,{onClick:()=>resetTimer(pitchSec),label:\"\\u27F2 Reset\",full:false,variant:\"outline\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\",marginTop:12},children:/*#__PURE__*/_jsx(Btn,{onClick:onNext,label:\"Siguiente grupo\",full:false})})]})});}function EvaluationPanelStudent(_ref18){let{roomCode,teams,analyticsUpdate,fromTeam}=_ref18;const[active,setActive]=useState(teams[0]||\"\");const[ratingsByTeam,setRatingsByTeam]=useState(()=>Object.fromEntries(teams.map(t=>[t,[0,0,0,0,0,0]])));const[commentByTeam,setCommentByTeam]=useState(()=>Object.fromEntries(teams.map(t=>[t,\"\"])));useEffect(()=>{if(teams.length&&!active)setActive(teams[0]);},[teams,active]);const rate=(team,idx,value)=>{setRatingsByTeam(prev=>{const current=prev[team]||[0,0,0,0,0,0];const next=current.slice();const old=current[idx]||0;next[idx]=value;const delta=value-old;if(delta!==0)awardCoinsToTeam(roomCode,team,delta);return _objectSpread(_objectSpread({},prev),{},{[team]:next});});};const submitFeedback=team=>{const ratings=ratingsByTeam[team]||[0,0,0,0,0,0];const comment=(commentByTeam[team]||\"\").trim();analyticsUpdate(a=>_objectSpread(_objectSpread({},a),{},{feedbacks:[...a.feedbacks,{roomCode,fromTeam,targetTeam:team,ratings,comment:comment||undefined,ts:Date.now()}]}));alert(\"¬°Gracias! Evaluaci√≥n registrada para \"+team);};return/*#__PURE__*/_jsxs(Card,{title:\"Evaluaci\\xF3n de equipos\",subtitle:\"Elige equipo y califica 0\\u20135 (cada punto = 1 moneda para ese equipo)\",width:1100,children:[/*#__PURE__*/_jsx(\"div\",{style:{position:\"sticky\",top:12,zIndex:5,background:\"transparent\",paddingBottom:6,marginBottom:10},children:/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",gap:8,overflowX:\"auto\"},children:teams.map(t=>{const activeTab=active===t;return/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActive(t),style:{padding:\"8px 12px\",borderRadius:12,border:\"2px solid \".concat(activeTab?theme.rosa:theme.border),background:activeTab?\"#FFF3F7\":\"#fff\",fontWeight:800,cursor:\"pointer\",whiteSpace:\"nowrap\"},children:t},t);})})}),active&&/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread({},panelBox),children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:900,color:theme.azul,marginBottom:8},children:active}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"grid\",gap:10},children:Array.from({length:6}).map((_,i)=>{var _ratingsByTeam$active;const val=((_ratingsByTeam$active=ratingsByTeam[active])===null||_ratingsByTeam$active===void 0?void 0:_ratingsByTeam$active[i])||0;return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"160px 1fr 60px\",gap:10,alignItems:\"center\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:800},children:[\"Criterio \",i+1]}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:0,max:5,step:1,value:val,onChange:e=>rate(active,i,Number(e.target.value)),style:{width:\"100%\"}}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"right\",fontWeight:900},children:[val,\"/5\"]})]},i);})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:12},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:800,marginBottom:6},children:\"Comentario (opcional)\"}),/*#__PURE__*/_jsx(\"textarea\",{value:commentByTeam[active]||\"\",onChange:e=>setCommentByTeam(s=>_objectSpread(_objectSpread({},s),{},{[active]:e.target.value})),style:_objectSpread(_objectSpread({},baseInput),{},{minHeight:80}),placeholder:\"Escribe feedback para este equipo (opcional)\\u2026\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"flex-end\",marginTop:10},children:/*#__PURE__*/_jsx(Btn,{label:\"Enviar evaluaci\\xF3n de este equipo\",full:false,onClick:()=>submitFeedback(active)})})]})]});}/* --ADMIN DASHBOARD-- */function AdminDashboard(_ref19){let{analytics,THEMES,setTHEMES,flow,onBack,ranking,clearMetrics}=_ref19;const[tab,setTab]=useState(\"resumen\");const exportJSON=(name,data)=>{const blob=new Blob([JSON.stringify(data,null,2)],{type:\"application/json\"});const url=URL.createObjectURL(blob);const a=document.createElement(\"a\");a.href=url;a.download=\"\".concat(name,\".json\");a.click();URL.revokeObjectURL(url);};const totals={equipos:analytics.teams.length,estudiantes:analytics.teams.reduce((acc,t)=>{var _t$integrantes;return acc+(((_t$integrantes=t.integrantes)===null||_t$integrantes===void 0?void 0:_t$integrantes.length)||0);},0),reflexiones:analytics.reflections.length,rooms:analytics.roomsCreated};return/*#__PURE__*/_jsxs(Card,{title:\"Panel de Administrador\",subtitle:\"Configura el juego y revisa m\\xE9tricas\",width:1100,children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:8,flexWrap:\"wrap\",marginBottom:12},children:[[[\"resumen\",\"üìä Resumen\"],[\"temas\",\"üéØ Tem√°ticas & Desaf√≠os\"],[\"equipos\",\"üë• Equipos\"],[\"reflexiones\",\"üìù Reflexiones\"],[\"uso\",\"üìà Uso de desaf√≠os\"],[\"ranking\",\"üèÜ Ranking/Monedas\"]].map(_ref20=>{let[k,label]=_ref20;return/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTab(k),style:{padding:\"8px 12px\",borderRadius:12,border:\"2px solid \".concat(tab===k?theme.azul:theme.border),background:tab===k?\"#E3F2FD\":\"#fff\",fontWeight:800,cursor:\"pointer\"},children:label},k);}),/*#__PURE__*/_jsxs(\"div\",{style:{marginLeft:\"auto\",display:\"flex\",gap:8},children:[/*#__PURE__*/_jsx(Btn,{label:\"Exportar m\\xE9tricas\",full:false,variant:\"outline\",onClick:()=>exportJSON(\"udd_metrics\",analytics)}),/*#__PURE__*/_jsx(Btn,{label:\"Exportar configuraci\\xF3n\",full:false,variant:\"outline\",onClick:()=>exportJSON(\"udd_themes\",THEMES)}),/*#__PURE__*/_jsx(Btn,{label:\"Resetear m\\xE9tricas\",bg:\"#F44336\",full:false,onClick:()=>{if(confirm(\"¬øSeguro que quieres borrar todas las m√©tricas (equipos/uso/reflexiones)?\")){clearMetrics();alert(\"M√©tricas reseteadas.\");}}}),/*#__PURE__*/_jsx(Btn,{label:\"\\u2B05 Volver\",full:false,bg:theme.amarillo,fg:theme.texto,onClick:onBack})]})]}),tab===\"resumen\"&&/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"repeat(auto-fit, minmax(220px, 1fr))\",gap:12},children:[[{k:\"Salas creadas\",v:totals.rooms},{k:\"Equipos registrados\",v:totals.equipos},{k:\"Estudiantes (aprox.)\",v:totals.estudiantes},{k:\"Reflexiones recibidas\",v:totals.reflexiones}].map(card=>/*#__PURE__*/_jsxs(\"div\",{style:panelBox,children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:13,color:theme.muted},children:card.k}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:32,fontWeight:900},children:card.v})]},card.k)),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread({gridColumn:\"1 / -1\"},panelBox),children:[/*#__PURE__*/_jsx(\"div\",{style:badgeTitle,children:\"Sala actual\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontFamily:\"Roboto Mono, monospace\",fontWeight:900,fontSize:18},children:[\"C\\xF3digo: \",flow.roomCode||\"‚Äî\",\" \\xB7 Paso: \",flow.step,\" \\xB7 Equipos esperados: \",flow.expectedTeams||\"‚Äî\"]})]})]}),tab===\"temas\"&&/*#__PURE__*/_jsx(ThemeEditor,{THEMES:THEMES,setTHEMES:setTHEMES}),tab===\"equipos\"&&/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},panelBox),{},{textAlign:\"left\"}),children:[/*#__PURE__*/_jsx(\"div\",{style:badgeTitle,children:\"Equipos registrados\"}),analytics.teams.length===0?/*#__PURE__*/_jsx(\"div\",{style:{opacity:.7},children:\"Sin equipos a\\xFAn.\"}):/*#__PURE__*/_jsx(\"div\",{style:{display:\"grid\",gap:10},children:analytics.teams.slice().reverse().map((t,i)=>{var _t$integrantes2;return/*#__PURE__*/_jsxs(\"div\",{style:{border:\"1px solid \".concat(theme.border),borderRadius:12,padding:10},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:800},children:[t.teamName,\" \",/*#__PURE__*/_jsxs(\"span\",{style:{color:theme.muted},children:[\"\\xB7 sala \",t.roomCode]})]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,color:theme.muted},children:new Date(t.ts).toLocaleString()}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:6,display:\"grid\",gap:4},children:(_t$integrantes2=t.integrantes)===null||_t$integrantes2===void 0?void 0:_t$integrantes2.map((p,j)=>/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u2022 \",/*#__PURE__*/_jsx(\"b\",{children:p.nombre}),\" \\u2014 \",p.carrera]},j))})]},i);})})]}),tab===\"reflexiones\"&&/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},panelBox),{},{textAlign:\"left\"}),children:[/*#__PURE__*/_jsx(\"div\",{style:badgeTitle,children:\"Reflexiones finales\"}),analytics.reflections.length===0?/*#__PURE__*/_jsx(\"div\",{style:{opacity:.7},children:\"A\\xFAn no hay reflexiones.\"}):/*#__PURE__*/_jsx(\"div\",{style:{display:\"grid\",gap:10},children:analytics.reflections.slice().reverse().map((r,i)=>/*#__PURE__*/_jsxs(\"div\",{style:{border:\"1px solid \".concat(theme.border),borderRadius:12,padding:10},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:800},children:[r.teamName,\" \",/*#__PURE__*/_jsxs(\"span\",{style:{color:theme.muted},children:[\"\\xB7 sala \",r.roomCode]})]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,color:theme.muted},children:new Date(r.ts).toLocaleString()}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:6,whiteSpace:\"pre-wrap\"},children:r.text})]},i))})]}),tab===\"uso\"&&/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},panelBox),{},{textAlign:\"left\"}),children:[/*#__PURE__*/_jsx(\"div\",{style:badgeTitle,children:\"Uso de desaf\\xEDos\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,color:theme.muted,marginBottom:8},children:\"(Se incrementa cuando el profesor abre el mapa de empat\\xEDa con un desaf\\xEDo seleccionado)\"}),Object.keys(analytics.challengeUsage).length===0?/*#__PURE__*/_jsx(\"div\",{style:{opacity:.7},children:\"A\\xFAn no hay datos de uso.\"}):/*#__PURE__*/_jsx(\"div\",{style:{display:\"grid\",gap:8},children:Object.entries(analytics.challengeUsage).sort((a,b)=>b[1]-a[1]).map(_ref21=>{let[key,count]=_ref21;const[themeId,idxStr]=key.split(\"#\");const idx=Number(idxStr);const t=THEMES[themeId];const label=t!==null&&t!==void 0&&t.label&&t.desafios[idx]?\"\".concat(t.label,\" \\u2014 \").concat(t.desafios[idx].titulo):key;return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"1fr auto\",gap:8},children:[/*#__PURE__*/_jsx(\"div\",{children:label}),/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:900},children:count})]},key);})})]}),tab===\"ranking\"&&/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread({},panelBox),children:[/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread({marginBottom:8,textAlign:\"left\"},badgeTitle),children:[\"Monedas (sala actual \",flow.roomCode||\"‚Äî\",\")\"]}),/*#__PURE__*/_jsx(RankingBars,{data:ranking,onContinue:()=>{}})]})]});}/* --Theme Editor (admin)-- */function ThemeEditor(_ref22){let{THEMES,setTHEMES}=_ref22;const[current,setCurrent]=useState(Object.keys(THEMES)[0]);const[local,setLocal]=useState(THEMES);useEffect(()=>setLocal(THEMES),[THEMES]);const t=local[current];const save=()=>{setTHEMES(local);alert(\"Configuraci√≥n guardada.\");};const addChallenge=()=>{const next=_objectSpread({},local);next[current].desafios.push({titulo:\"Nuevo desaf√≠o\",descripcion:\"Descripci√≥n...\"});setLocal(next);};const removeChallenge=i=>{const next=_objectSpread({},local);next[current].desafios.splice(i,1);setLocal(next);};const updateChallenge=(i,patch)=>{const next=_objectSpread({},local);next[current].desafios[i]=_objectSpread(_objectSpread({},next[current].desafios[i]),patch);setLocal(next);};const updatePersona=patch=>{const next=_objectSpread({},local);next[current].persona=_objectSpread(_objectSpread({},next[current].persona),patch);setLocal(next);};return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gap:12},children:[/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",gap:8,justifyContent:\"center\",flexWrap:\"wrap\"},children:Object.keys(local).map(k=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrent(k),style:{padding:\"8px 12px\",borderRadius:12,border:\"2px solid \".concat(current===k?theme.azul:theme.border),background:current===k?\"#E3F2FD\":\"#fff\",fontWeight:800,cursor:\"pointer\"},children:local[k].label},String(k)))}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"1fr 1fr\",gap:12,alignItems:\"start\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},panelBox),{},{textAlign:\"left\"}),children:[/*#__PURE__*/_jsx(\"div\",{style:badgeTitle,children:\"Persona\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Nombre\"}),/*#__PURE__*/_jsx(\"input\",{style:_objectSpread(_objectSpread({},baseInput),{},{marginBottom:8}),value:t.persona.nombre,onChange:e=>updatePersona({nombre:e.target.value})}),/*#__PURE__*/_jsx(\"label\",{children:\"Edad\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",style:_objectSpread(_objectSpread({},baseInput),{},{marginBottom:8}),value:t.persona.edad,onChange:e=>updatePersona({edad:Number(e.target.value)||0})}),/*#__PURE__*/_jsx(\"label\",{children:\"Bio\"}),/*#__PURE__*/_jsx(\"textarea\",{style:_objectSpread(_objectSpread({},baseInput),{},{minHeight:100}),value:t.persona.bio,onChange:e=>updatePersona({bio:e.target.value})})]}),/*#__PURE__*/_jsxs(\"div\",{style:_objectSpread(_objectSpread({},panelBox),{},{textAlign:\"left\"}),children:[/*#__PURE__*/_jsx(\"div\",{style:badgeTitle,children:\"Desaf\\xEDos\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gap:10},children:[t.desafios.map((d,i)=>/*#__PURE__*/_jsxs(\"div\",{style:{border:\"1px solid \".concat(theme.border),borderRadius:12,padding:10},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gap:6},children:[/*#__PURE__*/_jsx(\"label\",{children:\"T\\xEDtulo\"}),/*#__PURE__*/_jsx(\"input\",{style:baseInput,value:d.titulo,onChange:e=>updateChallenge(i,{titulo:e.target.value})}),/*#__PURE__*/_jsx(\"label\",{children:\"Descripci\\xF3n\"}),/*#__PURE__*/_jsx(\"textarea\",{style:_objectSpread(_objectSpread({},baseInput),{},{minHeight:80}),value:d.descripcion,onChange:e=>updateChallenge(i,{descripcion:e.target.value})})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"flex-end\",marginTop:8},children:/*#__PURE__*/_jsx(Btn,{label:\"Eliminar\",full:false,bg:\"#F44336\",onClick:()=>{if(confirm(\"¬øEliminar desaf√≠o?\"))removeChallenge(i);}})})]},i)),/*#__PURE__*/_jsx(Btn,{label:\"Agregar desaf\\xEDo\",full:false,onClick:addChallenge})]})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"flex-end\",gap:8},children:/*#__PURE__*/_jsx(Btn,{label:\"Guardar cambios\",onClick:save,full:false})})]});}/* ===================== UTILS (final) ===================== */function useMediaQuery(q){const[m,setM]=useState(false);useEffect(()=>{const mq=window.matchMedia(q);const h=()=>setM(mq.matches);h();mq.addEventListener(\"change\",h);return()=>mq.removeEventListener(\"change\",h);},[q]);return m;}function shuffle(arr){const a=arr.slice();for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}function generateCode(){let len=arguments.length>0&&arguments[0]!==undefined?arguments[0]:5;const CHARS=\"ABCDEFGHJKLMNPQRSTUVWXYZ23456789\";let out=\"\";for(let i=0;i<len;i++){out+=CHARS[Math.floor(Math.random()*CHARS.length)];}return out;}/* sumar monedas a un equipo arbitrario (no necesariamente el propio) */function awardCoinsToTeam(roomCode,teamName,delta){if(!roomCode||!teamName||!delta)return;const map=readJSON(COINS_KEY,{});const key=\"\".concat(roomCode,\"::\").concat(teamName);map[key]=(map[key]||0)+delta;writeJSON(COINS_KEY,map);try{window.dispatchEvent(new StorageEvent(\"storage\",{key:COINS_KEY,newValue:JSON.stringify(map)}));}catch(_unused14){}}","map":{"version":3,"names":["React","useEffect","useLayoutEffect","useMemo","useRef","useState","memo","TeamworkMiniAnim","EmpathyAnimacion","CreatividadAnimacion","PitchAnimacion","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","mmss","sec","s","Math","max","floor","mStr","String","padStart","sStr","concat","theme","rosa","azul","amarillo","blanco","surfaceAlt","gris","texto","muted","border","shadow","GlobalFormCSS","children","appStyles","position","minHeight","overflowY","overflowX","fontFamily","color","baseInput","width","padding","borderRadius","boxSizing","maxWidth","background","panelBox","zIndex","boxShadow","badgeTitle","fontWeight","marginBottom","smallHint","fontSize","opacity","marginTop","JOINED_KEY","AutoCenter","_ref","contentRef","center","setCenter","recompute","_contentRef$current$o","_contentRef$current","vp","window","innerHeight","contentH","current","offsetHeight","ro","ResizeObserver","observe","addEventListener","disconnect","removeEventListener","style","display","flexDirection","justifyContent","alignItems","ref","justifyItems","Card","_ref2","title","subtitle","tight","textAlign","backdropFilter","margin","Btn","_ref3","onClick","bg","fg","label","full","disabled","variant","undefined","cursor","letterSpacing","transition","whiteSpace","onMouseDown","e","currentTarget","transform","onMouseUp","onMouseEnter","onMouseLeave","Background","inset","pointerEvents","overflow","filter","Orb","left","top","size","delay","Wave","reverse","GeoPiece","rotate","_ref4","height","animation","random","_ref5","viewBox","preserveAspectRatio","fill","d","_ref6","FLOW_KEY","READY_KEY","COINS_KEY","THEMES_KEY","ANALYTICS_KEY","readJSON","key","fallback","raw","localStorage","getItem","JSON","parse","_unused","writeJSON","value","setItem","stringify","_unused2","normalizeFlow","f","initial","base","_objectSpread","presentOrder","Array","isArray","currentIdx","pitchSeconds","useStorageSignal","keys","pollMs","arguments","length","tick","setTick","onStorage","includes","t","id","setInterval","clearInterval","useSharedFlow","isTeacher","flow","setFlow","newValue","parsed","_unused3","publish","next","newFlow","dispatchEvent","StorageEvent","_unused4","running","remaining","nf","_unused5","setStep","step","startTimer","seconds","pauseTimer","resetTimer","useAnalytics","analytics","setAnalytics","roomsCreated","challengeUsage","teams","reflections","feedbacks","_unused6","update","updater","prev","_unused7","App","mode","setMode","equiposQty","setEquiposQty","roomCode","setRoomCode","groupName","setGroupName","miNombre","setMiNombre","miCarrera","setMiCarrera","integrantes","setIntegrantes","teamReady","setTeamReady","coins","setCoins","isTablet","useMediaQuery","isMobile","joinedRoom","setJoinedRoom","sessionStorage","showAdminLogin","setShowAdminLogin","adminUser","setAdminUser","adminPass","setAdminPass","adminErr","setAdminErr","initialFlow","expectedTeams","storageTick","readyNow","readyCount","teamId","trim","analyticsApi","markReady","set","Set","add","arr","from","_unused8","teamName","split","a","nombre","carrera","ts","Date","now","startsWith","clearReadyForRoom","filtered","_unused9","teamsForCurrentRoom","map","Boolean","getTeamsForRoom","readyTeamNames","pruneCoinsForRoom","ready","newMap","Object","fromEntries","entries","_ref7","team","has","_unused0","_unused1","ranking","pairs","_ref8","_ref9","v","equipo","total","_ref0","sort","b","diffs","setDiffs","x","y","r","zone","hintsLeft","setHintsLeft","spotRef","clickSpot","rect","getBoundingClientRect","cx","clientX","cy","clientY","found","dx","dy","dist","hypot","c","useHint","hidden","find","h","tip","document","createElement","assign","appendChild","setTimeout","remove","makeGrid","goal","g","forEach","_ref1","grid","setGrid","scored","setScored","toggleCell","row","slice","cn","sc","cp","EMPATIA_FIELDS","empatia","setEmpatia","perfil","entorno","emociones","necesidades","limitaciones","motivaciones","activeBubble","setActiveBubble","onEmpatiaChange","k","_prev$k","wasEmpty","defaultTHEMES","salud","desafios","titulo","descripcion","persona","edad","bio","sustentabilidad","educacion","THEMES","setTHEMES","saveTHEMES","_unused10","temaSel","setTemaSel","desafioIndex","setDesafioIndex","desafioActual","isTabletMedia","isMobileMedia","bubbleSize","centerBubbleSize","bubblePositions","right","bottom","f1Tab","setF1Tab","VideoSpace","_ref10","aspectRatio","Instructions","_ref11","bullets","i","dangerouslySetInnerHTML","__html","BigTimer","_ref12","defaultSec","gap","flexWrap","placeholder","onChange","target","type","onKeyDown","AdminDashboard","onBack","clearMetrics","_flow$presentOrder$fl","_flow$presentOrder","gridTemplateColumns","Number","alignSelf","code","generateCode","_unused11","_unused12","alignContent","name","readySet","all","readyList","loop","ConfettiBurst","RankingBars","data","onContinue","ThemeChallengeSection","usage","showContinue","WheelOrder","onConfirm","order","PresentStageTeacher","currentTeam","pitchSec","onNext","nextIdx","placeItems","_unused13","toUpperCase","alert","maxHeight","p","borderBottom","paddingBottom","active","points","gridTemplateRows","z","outline","GridView","readOnly","onClickCell","flat","EmpathySection","accept","paddingLeft","EvaluationPanelStudent","analyticsUpdate","fromTeam","ta","getElementById","text","_ref13","cell","on","_ref14","idx","charAt","props","_EMPATIA_FIELDS$find","_EMPATIA_FIELDS$find2","_empatia$f$key","filled","items","setItems","EMOJIS","_","emoji","clearTimeout","_ref15","mounted","setMounted","pct","round","isFirst","isLast","secondOrThird","barBg","textShadow","lineHeight","backgroundSize","_ref16","setOrder","o","pool","picks","push","splice","shuffle","marginLeft","finalOrder","_ref17","_ref18","setActive","ratingsByTeam","setRatingsByTeam","commentByTeam","setCommentByTeam","rate","old","delta","awardCoinsToTeam","submitFeedback","ratings","comment","targetTeam","activeTab","_ratingsByTeam$active","val","min","_ref19","tab","setTab","exportJSON","blob","Blob","url","URL","createObjectURL","href","download","click","revokeObjectURL","totals","equipos","estudiantes","reduce","acc","_t$integrantes","reflexiones","rooms","_ref20","confirm","card","gridColumn","ThemeEditor","_t$integrantes2","toLocaleString","j","_ref21","count","themeId","idxStr","_ref22","setCurrent","local","setLocal","save","addChallenge","removeChallenge","updateChallenge","patch","updatePersona","q","m","setM","mq","matchMedia","matches","len","CHARS","out","_unused14"],"sources":["/workspaces/udd-EmprendimientoBS/web/src/App.tsx"],"sourcesContent":["// App.tsx\nimport React,{useEffect,useLayoutEffect,useMemo,useRef,useState,memo} from \"react\";\nimport TeamworkMiniAnim from \"./componentes/TeamworkMiniAnim\";\nimport EmpathyAnimacion from \"./componentes/EmpathyAnimacion\";\nimport CreatividadAnimacion from \"./componentes/CreatividadAnimacion\";\nimport PitchAnimacion from \"./componentes/PitchAnimacion\";\n\n/* ============ UTILES ============ */\n\nfunction mmss(sec: number): string {\n  const s = Math.max(0, Math.floor(sec || 0));\n  const mStr = String(Math.floor(s / 60)).padStart(2, \"0\");\n  const sStr = String(s % 60).padStart(2, \"0\");\n  return `${mStr}:${sStr}`;\n}\n\n/* --THEME-- */\nconst theme={rosa:\"#E91E63\",azul:\"#1976D2\",amarillo:\"#FFEB3B\",blanco:\"#FFFFFF\",surfaceAlt:\"#F7F9FC\",gris:\"#ECEFF1\",texto:\"#0D47A1\",muted:\"#6B7A90\",border:\"#E3E8EF\",shadow:\"0 16px 36px rgba(16,24,40,.14)\"};\n\n/* --GLOBAL CSS-- */\nconst GlobalFormCSS=()=>(<style>{`\n  *{-webkit-tap-highlight-color:transparent;} input,textarea,select{box-sizing:border-box;max-width:100%} body{margin:0}\n  button:focus-visible,input:focus-visible,textarea:focus-visible,select:focus-visible{outline:3px solid #93C5FD;outline-offset:2px}\n  @keyframes crownFloat{0%{transform:translateY(0)}50%{transform:translateY(-6px)}100%{transform:translateY(0)}}\n  @keyframes shimmer{0%{background-position:0% 0}100%{background-position:120% 0}}\n  @keyframes fall{0%{transform:translateY(-10vh) rotate(0deg);opacity:1}100%{transform:translateY(110vh) rotate(360deg);opacity:.9}}\n  @keyframes floatY{0%{transform:translateY(0)}50%{transform:translateY(-18px)}100%{transform:translateY(0)}}\n  @keyframes pulseSoft{0%{transform:scale(1);opacity:.65}50%{transform:scale(1.06);opacity:.85}100%{transform:scale(1);opacity:.65}}\n`}</style>);\n\n/* --BASE STYLES-- */\nconst appStyles:React.CSSProperties={position:\"relative\",minHeight:\"100dvh\",overflowY:\"auto\",overflowX:\"hidden\",fontFamily:\"Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif\",color:theme.texto};\nconst baseInput:React.CSSProperties={width:\"100%\",padding:12,borderRadius:12,border:`1px solid ${theme.border}`,boxSizing:\"border-box\",maxWidth:\"100%\",background:theme.blanco};\nconst panelBox:React.CSSProperties={background:theme.blanco,border:`1px solid ${theme.border}`,borderRadius:16,padding:12,position:\"relative\",zIndex:2,boxShadow:theme.shadow};\nconst badgeTitle:React.CSSProperties={fontWeight:900,color:theme.azul,marginBottom:6};\nconst smallHint:React.CSSProperties={fontSize:12,opacity:.7,marginTop:8};\nconst JOINED_KEY = \"udd_joined_room_v1\";\n\nconst AutoCenter:React.FC<{children:React.ReactNode}>=({children})=>{\n  const contentRef=useRef<HTMLDivElement|null>(null); const [center,setCenter]=useState(true);\n  const recompute=()=>{const vp=window.innerHeight;const padding=48;const contentH=contentRef.current?.offsetHeight??0;setCenter(contentH+padding<=vp);};\n  useLayoutEffect(()=>{recompute();const ro=new ResizeObserver(recompute);if(contentRef.current)ro.observe(contentRef.current);window.addEventListener(\"resize\",recompute);return()=>{ro.disconnect();window.removeEventListener(\"resize\",recompute)};},[]);\n  return(<div style={{position:\"relative\",width:\"100%\",minHeight:\"100dvh\",display:\"flex\",flexDirection:\"column\",justifyContent:center?\"center\":\"flex-start\",alignItems:\"center\",padding:24}}>\n    <div ref={contentRef} style={{width:\"100%\",display:\"grid\",justifyItems:\"center\"}}>{children}</div>\n  </div>);\n};\n\ntype CardProps = React.PropsWithChildren<{\n  title: string;\n  subtitle?: string;\n  width?: number;\n  tight?: boolean;\n}>;\n\nconst Card: React.FC<CardProps> = ({ title, subtitle, width = 520, children, tight }) => (\n  <div style={{width:`clamp(320px,92vw,${width}px)`,background:\"rgba(255,255,255,0.96)\",boxShadow:theme.shadow,border:`1px solid ${theme.border}`,borderRadius:20,padding:tight?18:24,textAlign:\"center\",backdropFilter:\"blur(2px)\",position:\"relative\",zIndex:3,margin:\"12px auto\"}}>\n    <h2 style={{margin:0,marginBottom:8,fontSize:26,fontWeight:900,color:theme.rosa}}>{title}</h2>\n    {subtitle && <p style={{marginTop:0,marginBottom:16,color:theme.azul}}>{subtitle}</p>}\n    {children}\n  </div>\n);\nconst Btn:React.FC<{onClick?:()=>void;bg?:string;fg?:string;label:string;full?:boolean;disabled?:boolean;variant?:\"solid\"|\"outline\"}>=memo(({onClick,bg=theme.azul,fg=theme.blanco,label,full=true,disabled,variant=\"solid\"})=>(\n  <button onClick={()=>onClick?.()} disabled={disabled} style={{width:full? \"100%\":undefined,padding:\"12px 16px\",borderRadius:14,border:variant===\"outline\"?`2px solid ${theme.azul}`:\"none\",cursor:disabled?\"not-allowed\":\"pointer\",fontWeight:800,letterSpacing:.2,background:disabled?\"#cfd8dc\":variant===\"outline\"?\"transparent\":bg,color:disabled?\"#607d8b\":variant===\"outline\"?theme.azul:fg,boxShadow:variant===\"outline\"?\"none\":\"0 6px 12px rgba(0,0,0,.12)\",transition:\"transform .06s ease, opacity .15s ease, box-shadow .15s ease\",whiteSpace:\"nowrap\"}}\n    onMouseDown={e=>!disabled&&(e.currentTarget.style.transform=\"scale(.98)\")}\n    onMouseUp={e=>!disabled&&(e.currentTarget.style.transform=\"scale(1)\")}\n    onMouseEnter={e=>{if(!disabled&&variant===\"solid\")e.currentTarget.style.boxShadow=\"0 8px 16px rgba(0,0,0,.16)\"}}\n    onMouseLeave={e=>{if(!disabled&&variant===\"solid\")e.currentTarget.style.boxShadow=\"0 6px 12px rgba(0,0,0,.12)\"}}\n  >{label}</button>\n));\n\n/* --FONDO-- */\nconst Background=memo(()=>(\n  <div style={{position:\"fixed\",inset:0,pointerEvents:\"none\",overflow:\"hidden\"}}>\n    <div style={{position:\"absolute\",inset:0,background:`linear-gradient(145deg, ${theme.rosa} 0%, ${theme.azul} 60%)`}}/>\n    <div style={{position:\"absolute\",inset:0,background:`radial-gradient(40% 35% at 85% 15%, ${theme.amarillo}55, transparent 65%)`,filter:\"blur(2px)\"}}/>\n    <Orb left=\"6%\" top=\"72%\" size={220} color={`${theme.amarillo}55`} delay={.2}/>\n    <Orb left=\"78%\" top=\"68%\" size={180} color={`${theme.rosa}44`} delay={.6}/>\n    <Orb left=\"12%\" top=\"18%\" size={140} color={`${theme.azul}55`} delay={.1}/>\n    <Wave color={`${theme.azul}`} opacity={.18} top={100}/>\n    <Wave color={`${theme.rosa}`} opacity={.14} top={170} reverse/>\n    <GeoPiece left=\"70%\" top=\"22%\" size={140} color={`${theme.blanco}18`} rotate/>\n    <GeoPiece left=\"28%\" top=\"78%\" size={160} color={`${theme.blanco}14`}/>\n  </div>\n));\nconst Orb:React.FC<{left:string;top:string;size:number;color:string;delay?:number}>=({left,top,size,color,delay=0})=>(<div style={{position:\"absolute\",left,top,width:size,height:size,borderRadius:\"50%\",background:color,filter:\"blur(6px)\",animation:`floatY ${5.5+Math.random()*2}s ease-in-out ${delay}s infinite`}}/>);\nconst Wave:React.FC<{color:string;opacity?:number;top?:number;reverse?:boolean}>=({color,opacity=.2,top=120,reverse})=>(\n  <svg viewBox=\"0 0 1440 320\" preserveAspectRatio=\"xMidYMid slice\" style={{position:\"absolute\",top,left:0,width:\"100%\",height:240,opacity,transform:reverse?\"scaleY(-1)\":undefined,animation:\"drift 12s ease-in-out infinite\"}}>\n    <path fill={color} d=\"M0,192 C240,240 480,240 720,192 C960,144 1200,144 1440,192 L1440,320 L0,320 Z\"/>\n  </svg>\n);\nconst GeoPiece:React.FC<{left:string;top:string;size:number;color:string;rotate?:boolean}>=({left,top,size,color,rotate})=>(\n  <div style={{position:\"absolute\",left,top,width:size,height:size,borderRadius:26,background:color,transform:\"rotate(12deg)\",animation:rotate?\"pulseSoft 7s ease-in-out infinite\":\"floatY 8s ease-in-out infinite\",boxShadow:\"0 20px 40px rgba(0,0,0,.08)\"}}/>\n);\n\n/* ============ FLOW/STATE ============ */\ntype FlowStep=\n  |\"lobby\"\n  |\"f1_video\"|\"f1_instr\"|\"f1_activity\"|\"f1_rank\"\n  |\"f2_video\"|\"f2_instr\"|\"f2_theme\"|\"f2_activity\"|\"f2_rank\"\n  |\"f3_video\"|\"f3_activity\"|\"f3_rank\"\n  |\"f4_video\"|\"f4_prep\"\n  |\"f4_wheel\"     \n  |\"f4_present\"    \n  |\"f4_rank\"      \n  |\"f5_video\"|\"f5_eval\"|\"f5_rank\"\n  |\"f6_video\"|\"f6_close\"\n  |\"qr\";\n\ntype FlowState={\n  step:FlowStep;\n  running:boolean;\n  remaining:number;\n  roomCode:string;\n  expectedTeams:number;\n  presentOrder:string[];  \n  currentIdx:number;       \n  pitchSeconds:number;    \n};\n\nconst FLOW_KEY=\"udd_flow_state_v1\",READY_KEY=\"udd_ready_teams_v1\",COINS_KEY=\"udd_coins_v1\";\nconst THEMES_KEY=\"udd_themes_v1\",ANALYTICS_KEY=\"udd_analytics_v1\";\n\ntype ThemeId=\"salud\"|\"sustentabilidad\"|\"educacion\";\ntype ThemePersona={nombre:string;edad:number;bio:string};\ntype ThemeChallenge={titulo:string;descripcion:string};\ntype ThemeConfig=Record<ThemeId,{label:string;desafios:ThemeChallenge[];persona:ThemePersona}>;\ntype Analytics={\n  roomsCreated:number;\n  challengeUsage:Record<string,number>;\n  teams:{roomCode:string;teamName:string;integrantes:{nombre:string;carrera:string}[];ts:number;}[];\n  reflections:{roomCode:string;teamName:string;text:string;ts:number;}[];\n  feedbacks:{roomCode:string;fromTeam:string;targetTeam:string;ratings:number[];comment?:string;ts:number;}[];\n};\n\nfunction readJSON<T>(key:string,fallback:T):T{try{const raw=localStorage.getItem(key);return raw?JSON.parse(raw):fallback;}catch{return fallback}}\nfunction writeJSON(key:string,value:any){try{localStorage.setItem(key,JSON.stringify(value));}catch{}}\n\nfunction normalizeFlow(f:any, initial:FlowState):FlowState{\n  const base = {...initial, ...(f||{})};\n  return {\n    ...base,\n    presentOrder: Array.isArray(f?.presentOrder) ? f.presentOrder : [],\n    currentIdx: typeof f?.currentIdx === \"number\" ? f.currentIdx : 0,\n    pitchSeconds: typeof f?.pitchSeconds === \"number\" ? f.pitchSeconds : initial.pitchSeconds,\n  };\n}\n\n/* --STORAGE SIGNAL-- */\nfunction useStorageSignal(keys:string[],pollMs=800){const [tick,setTick]=useState(0);\n  useEffect(()=>{const onStorage=(e:StorageEvent)=>{if(!e.key)return;if(keys.includes(e.key))setTick(t=>t+1)};window.addEventListener(\"storage\",onStorage);const id=window.setInterval(()=>setTick(t=>t+1),pollMs);return()=>{window.removeEventListener(\"storage\",onStorage);window.clearInterval(id)};},[keys,pollMs]);\n  return tick;\n}\n\n/* --SHARED FLOW-- */\nfunction useSharedFlow(isTeacher:boolean,initial:FlowState){\n  const [flow,setFlow]=useState<FlowState>(()=>normalizeFlow(readJSON(FLOW_KEY,initial), initial));\n  useEffect(()=>{\n    const onStorage=(e:StorageEvent)=>{\n      if(e.key===FLOW_KEY&&e.newValue){\n        try{\n          const parsed=JSON.parse(e.newValue);\n          setFlow(normalizeFlow(parsed, initial));\n        }catch{}\n      }\n    };\n    window.addEventListener(\"storage\",onStorage);\n    return()=>window.removeEventListener(\"storage\",onStorage)\n  },[]);\n  const publish=(next:Partial<FlowState>)=>{\n    const newFlow=normalizeFlow({...flow,...next}, initial);\n    setFlow(newFlow);\n    writeJSON(FLOW_KEY,newFlow);\n    try{window.dispatchEvent(new StorageEvent(\"storage\",{key:FLOW_KEY,newValue:JSON.stringify(newFlow)}))}catch{}\n  };\n  useEffect(()=>{if(!isTeacher||!flow.running)return;const id=window.setInterval(()=>{setFlow(f=>{const left=Math.max(0,f.remaining-1);const nf={...f,remaining:left,running:left>0&&f.running};writeJSON(FLOW_KEY,nf);try{window.dispatchEvent(new StorageEvent(\"storage\",{key:FLOW_KEY,newValue:JSON.stringify(nf)}))}catch{};return nf})},1000);return()=>window.clearInterval(id)},[isTeacher,flow.running]);\n  const setStep=(step:FlowStep,remaining?:number)=>publish({step,remaining:remaining??flow.remaining,running:false});\n  const startTimer=(seconds?:number)=>publish({remaining:seconds??flow.remaining,running:true});\n  const pauseTimer=()=>publish({running:false});\n  const resetTimer=(seconds:number)=>publish({remaining:seconds,running:false});\n  return {flow,setStep,startTimer,pauseTimer,resetTimer,publish};\n}\n\n/* --ANALYTICS HOOK-- */\nfunction useAnalytics(){const [analytics,setAnalytics]=useState<Analytics>(()=>readJSON<Analytics>(ANALYTICS_KEY,{roomsCreated:0,challengeUsage:{},teams:[],reflections:[],feedbacks:[]}));\n  useEffect(()=>{const onStorage=(e:StorageEvent)=>{if(e.key===ANALYTICS_KEY&&e.newValue){try{setAnalytics(JSON.parse(e.newValue))}catch{}}};window.addEventListener(\"storage\",onStorage);return()=>window.removeEventListener(\"storage\",onStorage)},[]);\n  const update=(updater:(a:Analytics)=>Analytics)=>{setAnalytics(prev=>{const next=updater(prev);writeJSON(ANALYTICS_KEY,next);try{window.dispatchEvent(new StorageEvent(\"storage\",{key:ANALYTICS_KEY,newValue:JSON.stringify(next)}))}catch{};return next})};\n  return {analytics,update};\n}\n\n/* ===================== APP ===================== */\nexport default function App(){\n  const [mode,setMode]=useState<\"inicio\"|\"prof\"|\"alumno\"|\"admin\">(\"inicio\");\n  const [equiposQty,setEquiposQty]=useState(4);\n  const [roomCode,setRoomCode]=useState(\"\"); const [groupName,setGroupName]=useState(\"\"); const [miNombre,setMiNombre]=useState(\"\"); const [miCarrera,setMiCarrera]=useState(\"\");\n  const [integrantes,setIntegrantes]=useState<{nombre:string;carrera:string}[]>([]); const [teamReady,setTeamReady]=useState(false);\n  const [coins,setCoins]=useState(0);\n  const isTablet=useMediaQuery(\"(max-width: 1180px)\"); const isMobile=useMediaQuery(\"(max-width: 640px)\");\n  const [joinedRoom,setJoinedRoom] = useState<string>(()=>sessionStorage.getItem(JOINED_KEY)||\"\");\n\n  // --- Login Admin ---\n  const [showAdminLogin, setShowAdminLogin] = useState(false);\n  const [adminUser, setAdminUser] = useState(\"\");\n  const [adminPass, setAdminPass] = useState(\"\");\n  const [adminErr, setAdminErr] = useState(\"\");\n\n  const initialFlow:FlowState={\n    step:\"lobby\",\n    running:false,\n    remaining:5*60,    \n    roomCode:\"\",\n    expectedTeams:0,\n    /* NUEVO */\n    presentOrder:[],\n    currentIdx:0,\n    pitchSeconds:90    \n  };\n\n  const isTeacher = mode === \"prof\";\n  const {flow,setStep,startTimer,pauseTimer,resetTimer,publish} = useSharedFlow(isTeacher, initialFlow);\n\n  const storageTick = useStorageSignal(\n    mode===\"prof\" ? [READY_KEY,COINS_KEY,FLOW_KEY,ANALYTICS_KEY,THEMES_KEY]\n                  : mode===\"alumno\" ? [COINS_KEY,FLOW_KEY,ANALYTICS_KEY,THEMES_KEY]\n                                    : [FLOW_KEY,ANALYTICS_KEY,THEMES_KEY],\n    800\n  );\n\n  const readyNow = useMemo(() => readyCount(), [storageTick, flow.roomCode, flow.expectedTeams]);\n\n\n  const teamId = flow.roomCode && (groupName || \"(sin-nombre)\")\n  ? `${flow.roomCode}::${(groupName || \"\").trim() || \"sin-nombre\"}`\n  : \"\";\n\n  const analyticsApi=useAnalytics(); const {analytics,update}=analyticsApi;\n\n  const markReady=()=>{const set=new Set<string>(readJSON<string[]>(READY_KEY,[])); if(teamId)set.add(teamId); const arr=Array.from(set); writeJSON(READY_KEY,arr); try{window.dispatchEvent(new StorageEvent(\"storage\",{key:READY_KEY,newValue:JSON.stringify(arr)}))}catch{}; if(teamId){const teamName=teamId.split(\"::\")[1]||\"Equipo\"; update(a=>({...a,teams:[...a.teams,{roomCode:flow.roomCode,teamName,integrantes:integrantes.length?integrantes:[{nombre:miNombre||\"Integrante\",carrera:miCarrera||\"‚Äî\"}],ts:Date.now()}]}));} setTeamReady(true);};\n  function readyCount(){\n    const set = new Set<string>(readJSON<string[]>(READY_KEY, []));\n    return Array.from(set).filter(id => id.startsWith(`${flow.roomCode}::`)).length;\n  }\n  const clearReadyForRoom=()=>{const arr=readJSON<string[]>(READY_KEY,[]); const filtered=arr.filter(id=>!id.startsWith(`${flow.roomCode}::`)); writeJSON(READY_KEY,filtered); try{window.dispatchEvent(new StorageEvent(\"storage\",{key:READY_KEY,newValue:JSON.stringify(filtered)}))}catch{};};\n  function teamsForCurrentRoom(analytics:Analytics, roomCode:string){\n    return analytics.teams\n      .filter(t=>t.roomCode===roomCode)\n      .map(t=>t.teamName)\n      .filter(Boolean);\n  }\n  function getTeamsForRoom(analytics: Analytics, roomCode: string): string[] {\n    return teamsForCurrentRoom(analytics, roomCode);\n  }\n  \n\n  function readyTeamNames(roomCode:string){\n    const arr = readJSON<string[]>(READY_KEY,[]);\n    return new Set(\n      arr\n        .filter(id=>id.startsWith(`${roomCode}::`))\n        .map(id=>id.split(\"::\")[1]||\"\")\n    );\n  }\nfunction pruneCoinsForRoom(roomCode:string){\n  const map = readJSON<Record<string,number>>(COINS_KEY,{});\n  const ready = readyTeamNames(roomCode);\n  const newMap = Object.fromEntries(\n    Object.entries(map).filter(([key])=>{\n      if(!key.startsWith(`${roomCode}::`)) return true; \n      const team = key.split(\"::\")[1] || \"\";\n      return ready.has(team); \n    })\n  );\n  writeJSON(COINS_KEY,newMap);\n  try {\n    window.dispatchEvent(new StorageEvent(\"storage\",{key:COINS_KEY,newValue:JSON.stringify(newMap)}));\n  } catch {}\n}\n\nuseEffect(()=>{\n  if(!teamId || mode!==\"alumno\" || !teamReady) return;\n  const map = readJSON<Record<string,number>>(COINS_KEY,{});\n  map[teamId] = coins;\n  writeJSON(COINS_KEY,map);\n  try {\n    window.dispatchEvent(new StorageEvent(\"storage\",{key:COINS_KEY,newValue:JSON.stringify(map)}));\n  } catch {}\n}, [coins, teamId, mode, teamReady]);\n\nconst ranking = useMemo(()=>{\n  const map = readJSON<Record<string,number>>(COINS_KEY,{});\n  const ready = readyTeamNames(flow.roomCode);\n  const pairs = Object.entries(map)\n    .filter(([id]) => id.startsWith(`${flow.roomCode}::`))\n    .map(([id, v]) => ({ equipo: id.split(\"::\")[1] || \"Equipo\", total: v || 0 }))\n    .filter(({equipo}) => ready.has(equipo)); \n  return pairs.sort((a,b)=> b.total - a.total);\n}, [flow.roomCode, flow.step, storageTick]);\n\n  /* --F1: Spot the Difference-- */\n  type Diff={x:number;y:number;r:number;zone:number;found?:boolean};\n  const [diffs,setDiffs]=useState<Diff[]>([{x:.2,y:.25,r:.05,zone:0},{x:.35,y:.7,r:.05,zone:1},{x:.68,y:.35,r:.05,zone:2},{x:.8,y:.7,r:.05,zone:3}]);\n  const [hintsLeft,setHintsLeft]=useState(2); const spotRef=useRef<HTMLDivElement|null>(null);\n  const clickSpot=(e:React.MouseEvent<HTMLDivElement>)=>{if(!spotRef.current||!flow.running)return; const rect=spotRef.current.getBoundingClientRect(); const cx=(e.clientX-rect.left)/rect.width; const cy=(e.clientY-rect.top)/rect.height;\n    setDiffs(arr=>arr.map(d=>{if(d.found)return d; const dx=d.x-cx,dy=d.y-cy; const dist=Math.hypot(dx,dy); if(dist<d.r){setCoins(c=>c+1); return {...d,found:true}} return d;}));\n  };\n  const useHint=()=>{if(hintsLeft<=0||!spotRef.current)return; const hidden=diffs.find(d=>!d.found); if(!hidden)return; setHintsLeft(h=>h-1); setCoins(c=>Math.max(0,c-1)); const tip=document.createElement(\"div\");\n    Object.assign(tip.style,{position:\"absolute\",left:`${hidden.x*100}%`,top:`${hidden.y*100}%`,transform:\"translate(-50%,-50%)\",width:`${hidden.r*150}px`,height:`${hidden.r*150}px`,border:`3px dashed ${theme.amarillo}`,borderRadius:\"50%\",pointerEvents:\"none\"} as CSSStyleDeclaration);\n    spotRef.current.appendChild(tip); setTimeout(()=>tip.remove(),1200);\n  };\n\n  /* --F1: Matrix-- */\n  const size=5; const makeGrid=()=>Array.from({length:size},()=>Array.from({length:size},()=>false));\n  const [goal]=useState<boolean[][]>(()=>{const g=makeGrid(); [[1,1],[1,2],[1,3],[2,0],[2,4],[3,1],[3,2],[3,3],[4,2]].forEach(([r,c])=>g[r][c]=true); return g;});\n  const [grid,setGrid]=useState<boolean[][]>(()=>makeGrid()); const [scored,setScored]=useState<boolean[][]>(()=>makeGrid());\n  const toggleCell=(r:number,c:number)=>{if(!flow.running)return; setGrid(prev=>{const next=prev.map(row=>row.slice()); next[r][c]=!next[r][c]; if(next[r][c]===goal[r][c]&&!scored[r][c]){setCoins(cn=>cn+1); setScored(sc=>{const cp=sc.map(row=>row.slice()); cp[r][c]=true; return cp;});} return next;});};\n\n  /* --F2: Empat√≠a-- */\n  const EMPATIA_FIELDS=[{key:\"perfil\",label:\"Perfil\"},{key:\"entorno\",label:\"Entorno\"},{key:\"emociones\",label:\"Emociones\"},{key:\"necesidades\",label:\"Necesidades\"},{key:\"limitaciones\",label:\"Limitaciones\"},{key:\"motivaciones\",label:\"Motivaciones\"}] as const;\n  type EmpKey=(typeof EMPATIA_FIELDS)[number][\"key\"];\n  const [empatia,setEmpatia]=useState<Record<EmpKey,string>>({perfil:\"\",entorno:\"\",emociones:\"\",necesidades:\"\",limitaciones:\"\",motivaciones:\"\"});\n  const [activeBubble,setActiveBubble]=useState<EmpKey>(\"perfil\");\n  const onEmpatiaChange=(k:EmpKey,v:string)=>{setEmpatia(prev=>{const wasEmpty=!prev[k]?.trim(); const next={...prev,[k]:v}; if(wasEmpty&&next[k].trim())setCoins(c=>c+1); return next;});};\n\n  /* --TEMAS/Desaf√≠os */\n  const defaultTHEMES:ThemeConfig={salud:{label:\"Salud\",desafios:[{titulo:\"Desaf√≠o 1\",descripcion:\"Mejorar acceso a atenci√≥n b√°sica en barrios alejados.\"},{titulo:\"Desaf√≠o 2\",descripcion:\"Reducir tiempos de espera en consultas no cr√≠ticas.\"},{titulo:\"Desaf√≠o 3\",descripcion:\"Apoyo a cuidadores de adultos mayores.\"}],persona:{nombre:\"Mar√≠a\",edad:62,bio:\"Cuida a su pareja con movilidad reducida; vive a 40 min del centro de salud.\"}},\n    sustentabilidad:{label:\"Sustentabilidad\",desafios:[{titulo:\"Desaf√≠o 1\",descripcion:\"Disminuir residuos en campus y comunidad.\"},{titulo:\"Desaf√≠o 2\",descripcion:\"Optimizar uso de agua y energ√≠a en hogares.\"},{titulo:\"Desaf√≠o 3\",descripcion:\"Movilidad sostenible para trayectos cortos.\"}],persona:{nombre:\"Diego\",edad:24,bio:\"Estudiante que vive en residencia; quiere reducir su huella y ahorrar.\"}},\n    educacion:{label:\"Educaci√≥n\",desafios:[{titulo:\"Desaf√≠o 1\",descripcion:\"Motivar h√°bitos de estudio en estudiantes con poco tiempo.\"},{titulo:\"Desaf√≠o 2\",descripcion:\"Facilitar aprendizaje pr√°ctico en primer a√±o.\"},{titulo:\"Desaf√≠o 3\",descripcion:\"Mejorar integraci√≥n de estudiantes internacionales.\"}],persona:{nombre:\"Aisha\",edad:19,bio:\"Estudiante internacional de primer a√±o; barrera idiom√°tica y poco tiempo.\"}}\n  };\n  const [THEMES,setTHEMES]=useState<ThemeConfig>(()=>readJSON<ThemeConfig>(THEMES_KEY,defaultTHEMES));\n  const saveTHEMES=(next:ThemeConfig)=>{setTHEMES(next); writeJSON(THEMES_KEY,next); try{window.dispatchEvent(new StorageEvent(\"storage\",{key:THEMES_KEY,newValue:JSON.stringify(next)}))}catch{}};\n  const [temaSel,setTemaSel]=useState<ThemeId>(\"salud\"); const [desafioIndex,setDesafioIndex]=useState(0); const desafioActual=THEMES[temaSel].desafios[desafioIndex];\n\n  /* --Bubbles size-- */\n  const isTabletMedia=useMediaQuery(\"(max-width: 1180px)\"); const isMobileMedia=useMediaQuery(\"(max-width: 640px)\");\n  const bubbleSize=isMobileMedia?84:isTabletMedia?96:108; const centerBubbleSize=isMobileMedia?115:isTabletMedia?128:138;\n  const bubblePositions:Record<EmpKey,React.CSSProperties>=useMemo(()=>({perfil:{left:\"8%\",top:\"12%\"},limitaciones:{left:\"26%\",top:\"8%\"},motivaciones:{right:\"26%\",top:\"8%\"},entorno:{right:\"8%\",top:\"12%\"},emociones:{left:\"10%\",bottom:\"10%\"},necesidades:{right:\"10%\",bottom:\"10%\"},\n  }),[isTabletMedia,isMobileMedia]);\n\n  /* --Alumno F1 Tab-- */\n  const [f1Tab,setF1Tab]=useState<\"spot\"|\"matrix\">(\"spot\");\n\n  /* --UI helpers-- */\n  const VideoSpace:React.FC<{title:string}>=({title})=>(\n    <Card title={`Por qu√© es importante: ${title}`} subtitle=\"(Video corto explicativo)\" width={900}>\n      <div style={{width:\"100%\",aspectRatio:\"16/9\",background:theme.gris,borderRadius:16,border:`2px dashed ${theme.border}`,display:\"flex\",alignItems:\"center\",justifyContent:\"center\",color:\"#90A4AE\",fontWeight:700,pointerEvents:\"none\"}}>Video aqu√≠</div>\n    </Card>\n  );\n  const Instructions:React.FC<{title:string;bullets:string[]}>=({title,bullets})=>(\n    <Card title=\"Instrucciones\" subtitle={title} width={900} tight>\n      <div style={{textAlign:\"left\"}}><ol>{bullets.map((b,i)=>(<li key={i} dangerouslySetInnerHTML={{__html:b}}/>))}</ol></div>\n    </Card>\n  );\n  const BigTimer:React.FC<{label?:string;defaultSec:number}>=({label,defaultSec})=>(\n    <div style={{...panelBox,textAlign:\"center\"}}>\n      {label&&<div style={{fontWeight:900,color:theme.azul,marginBottom:6}}>{label}</div>}\n      <div style={{fontSize:64,fontWeight:900,letterSpacing:1,marginBottom:12}}>{mmss(flow.remaining)}</div>\n      <div style={{display:\"flex\",gap:8,justifyContent:\"center\",flexWrap:\"wrap\"}}>\n        <Btn onClick={()=>startTimer()} label=\"‚ñ∂ Iniciar\" full={false}/>\n        <Btn onClick={()=>pauseTimer()} label=\"‚è∏ Pausa\" full={false}/>\n        <Btn onClick={()=>resetTimer(defaultSec)} label=\"‚ü≤ Reset\" full={false} variant=\"outline\"/>\n      </div>\n    </div>\n  );\n\n  /* ===================== SCREENS ===================== */\n\n  {/* --INICIO  */}\n  if(mode===\"inicio\")return(\n    <div style={appStyles}>\n      <Background/>\n      <GlobalFormCSS/>\n      <AutoCenter>\n        {!showAdminLogin ? (\n          <Card title=\"Juego de Emprendimiento UDD\" subtitle=\"Selecciona tu perfil\" width={900}>\n            <div style={{display:\"flex\",gap:12,marginTop:12,flexWrap:\"wrap\",justifyContent:\"center\"}}>\n              <Btn onClick={()=>setMode(\"prof\")} label=\"üë©‚Äçüè´ Profesor\"/>\n              <Btn onClick={()=>setMode(\"alumno\")} bg={theme.rosa} label=\"üßë‚Äçüéì Alumno\"/>\n              <Btn onClick={()=>{\n                setShowAdminLogin(true);\n                setAdminUser(\"\"); setAdminPass(\"\"); setAdminErr(\"\");\n              }} bg={theme.amarillo} fg={theme.texto} label=\"üõ†Ô∏è Administrador\"/>\n            </div>\n          </Card>\n        ) : (\n          <Card title=\"Acceso Administrador\" subtitle=\"Ingresa tus credenciales\" width={520}>\n            <div style={{display:\"grid\",gap:10,marginTop:8}}>\n              <input\n                placeholder=\"Usuario\"\n                value={adminUser}\n                onChange={e=>setAdminUser(e.target.value)}\n                style={baseInput}\n              />\n              <input\n                placeholder=\"Contrase√±a\"\n                type=\"password\"\n                value={adminPass}\n                onChange={e=>setAdminPass(e.target.value)}\n                style={baseInput}\n                onKeyDown={e=>{\n                  if(e.key===\"Enter\"){\n                    if(adminUser===\"1\" && adminPass===\"1\"){\n                      setMode(\"admin\");\n                      setShowAdminLogin(false);\n                      setAdminUser(\"\"); setAdminPass(\"\"); setAdminErr(\"\");\n                    }else{\n                      setAdminErr(\"Usuario o contrase√±a incorrectos\");\n                    }\n                  }\n                }}\n              />\n              {adminErr && <div style={{color:\"#D32F2F\",fontWeight:700,fontSize:13}}>{adminErr}</div>}\n              <div style={{display:\"flex\",gap:10,justifyContent:\"space-between\",marginTop:6}}>\n                <Btn\n                  label=\"‚¨Ö Volver\"\n                  bg={theme.amarillo}\n                  fg={theme.texto}\n                  full={false}\n                  onClick={()=>{ setShowAdminLogin(false); setAdminErr(\"\"); }}\n                />\n                <Btn\n                  label=\"Ingresar\"\n                  full={false}\n                  onClick={()=>{\n                    if(adminUser===\"1\" && adminPass===\"1\"){\n                      setMode(\"admin\");\n                      setShowAdminLogin(false);\n                      setAdminUser(\"\"); setAdminPass(\"\"); setAdminErr(\"\");\n                    }else{\n                      setAdminErr(\"Usuario o contrase√±a incorrectos\");\n                    }\n                  }}\n                />\n              </div>\n            </div>\n          </Card>\n        )}\n      </AutoCenter>\n    </div>\n  );\n\n  {/* --ADMIN-- */}\n  if(mode===\"admin\"){return(<div style={appStyles}><Background/><GlobalFormCSS/><AutoCenter>\n    <AdminDashboard analytics={analytics} THEMES={THEMES} setTHEMES={saveTHEMES} flow={flow} onBack={()=>setMode(\"inicio\")} ranking={ranking}\n      clearMetrics={()=>update(()=>({roomsCreated:0,challengeUsage:{},teams:[],reflections:[],feedbacks:[]}))}\n      />\n  </AutoCenter></div>)}\n\n  {/* --PROFESOR-- */}\n  if(mode===\"prof\"){return(<div style={appStyles}><Background/><GlobalFormCSS/><AutoCenter>\n\n {/* --CREAR SALA-- */}\n{!flow.roomCode?(\n  <Card title=\"Crear Nueva Sala\" subtitle=\"Define cantidad de equipos\" width={820}>\n    <div style={{display:\"grid\",gridTemplateColumns:\"1fr 1fr\",gap:12}}>\n      <div>\n        <label style={{fontSize:12,fontWeight:800,color:theme.azul}}>Cantidad de equipos</label>\n        <select\n          value={String(equiposQty)}\n          onChange={e=>setEquiposQty(Number(e.target.value))}\n          style={{...baseInput,padding:10,marginTop:6}}\n        >\n          <option value=\"3\">3</option>\n          <option value=\"4\">4</option>\n        </select>\n      </div>\n\n      <div style={{alignSelf:\"end\"}}>\n        <Btn\n          onClick={()=>{\n            const code = generateCode();\n\n            writeJSON(READY_KEY, []);\n            try {\n              window.dispatchEvent(new StorageEvent(\"storage\", {key: READY_KEY, newValue: JSON.stringify([])}));\n            } catch {}\n\n            writeJSON(COINS_KEY, {});\n            try {\n              window.dispatchEvent(new StorageEvent(\"storage\", {key: COINS_KEY, newValue: JSON.stringify({})}));\n            } catch {}\n\n            publish({\n              roomCode: code,\n              expectedTeams: equiposQty,\n              step: \"lobby\",\n              remaining: 5*60,\n              running: false\n            });\n\n            update(a => ({...a, roomsCreated: a.roomsCreated + 1}));\n          }}\n          bg={theme.rosa}\n          label=\"Generar C√≥digo\"\n        />\n      </div>\n    </div>\n  </Card>\n):null}\n\n    {/* --LOBBY-- */}\n    {flow.roomCode&&flow.step===\"lobby\"&&(\n  <div style={{width:\"clamp(320px,92vw,1100px)\", display:\"grid\", gridTemplateColumns:\"1fr 320px\", gap:12}}>\n    <Card title=\"Sala creada\" subtitle=\"Comparte el c√≥digo y espera a los equipos\" width={700}>\n      <div style={{fontSize:32,fontFamily:\"Roboto Mono, ui-monospace, SFMono-Regular, Menlo, monospace\",marginBottom:8,color:theme.azul}}>\n        {flow.roomCode}\n      </div>\n      <div style={{fontSize:13,opacity:.8,marginBottom:12}}>\n        Equipos listos: <b>{readyNow}</b> / <b>{flow.expectedTeams}</b>\n      </div>\n      <Btn\n        onClick={()=>{ if(readyNow<flow.expectedTeams) return; setStep(\"f1_video\"); }}\n        label=\"Continuar con todos\"\n        disabled={readyNow<flow.expectedTeams}\n      />\n    </Card>\n\n    {/* Sidebar en vivo */}\n    <div style={{display:\"grid\",gap:12, alignContent:\"start\"}}>\n      <div style={panelBox as React.CSSProperties}>\n        <div style={badgeTitle}>üë• Equipos creados</div>\n        {teamsForCurrentRoom(analytics, flow.roomCode).length===0 ? (\n          <div style={{opacity:.7}}>A√∫n no se crean grupos‚Ä¶</div>\n        ) : (\n          <div style={{display:\"grid\",gap:6}}>\n            {teamsForCurrentRoom(analytics, flow.roomCode).map((name,i)=>(\n              <div key={i} style={{display:\"grid\", gridTemplateColumns:\"1fr auto\", gap:8}}>\n                <div><b>{name}</b></div>\n                <div style={{fontSize:12, opacity:.7}}>#{i+1}</div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      <div style={panelBox as React.CSSProperties}>\n        <div style={badgeTitle}>‚úÖ Marcados ‚Äúlisto‚Äù</div>\n        {(() => {\n          const readySet = readyTeamNames(flow.roomCode);\n          const all = teamsForCurrentRoom(analytics, flow.roomCode);\n          const readyList = all.filter(t=>readySet.has(t));\n          return readyList.length===0 ? (\n            <div style={{opacity:.7}}>Sin equipos listos a√∫n‚Ä¶</div>\n          ) : (\n            <div style={{display:\"grid\",gap:6}}>\n              {readyList.map((t,i)=>(\n                <div key={i}>‚Ä¢ <b>{t}</b></div>\n              ))}\n            </div>\n          )\n        })()}\n      </div>\n    </div>\n  </div>\n)}\n\n{/* --F1 VIDEO (PROFESOR)-- */}\n{flow.step===\"f1_video\" && (\n  <>\n    <div style={{ marginBottom: 12 }}>\n      <TeamworkMiniAnim loop /> \n    </div>\n\n    {/* Bot√≥n solo para profesor */}\n    <div style={{ display:\"flex\", justifyContent:\"center\" }}>\n      <Btn\n        onClick={()=>setStep(\"f1_instr\")}\n        label=\"Continuar con todos\"\n        full={false}\n      />\n    </div>\n  </>\n)}\n\n{flow.step===\"f1_instr\"&&(<><Instructions title=\"Fase 1 ‚Äî Trabajo en equipo\" bullets={[\"Juego 1: <b>Spot the Difference</b>.\",\"Juego 2: <b>Matriz de luces</b>.\",\"El tiempo es compartido; ustedes deciden c√≥mo distribuirlo.\"]}/>\n  <Btn onClick={()=>{resetTimer(5*60); setStep(\"f1_activity\",5*60)}} label=\"Abrir juegos y timer\" full={false}/></>)}\n{flow.step===\"f1_activity\"&&(<Card title=\"Fase 1 ‚Äî En curso\" subtitle=\"Timer visible para todos\" width={720}><BigTimer label=\"Tiempo F1 (Diferencias/Matriz)\" defaultSec={5*60}/>\n  <div style={{display:\"flex\",justifyContent:\"center\",marginTop:12}}><Btn onClick={()=>setStep(\"f1_rank\")} label=\"Terminar y ver ranking\" full={false}/></div></Card>)}\n{flow.step===\"f1_rank\"&&(<Card title=\"Ranking ‚Äî Fase 1\" subtitle=\"Resultados en vivo\" width={900}><ConfettiBurst/><RankingBars data={ranking} onContinue={()=>setStep(\"f2_video\")}/></Card>)}\n\n{/* --F2 VIDEO (PROFESOR) -- */}\n{flow.step===\"f2_video\" && (\n  <>\n    <div style={{ marginBottom: 12 }}>\n      <EmpathyAnimacion loop />\n    </div>\n    <div style={{ display:\"flex\", justifyContent:\"center\" }}>\n      <Btn\n        onClick={()=>setStep(\"f2_instr\")}\n        label=\"Continuar con todos\"\n        full={false}\n      />\n    </div>\n  </>\n)}\n\n{flow.step===\"f2_instr\"&&(<><Instructions title=\"Fase 2 ‚Äî Empat√≠a\" bullets={[\"Elige tem√°tica y desaf√≠o.\",\"Completen el <b>mapa de empat√≠a</b> (10:00).\"]}/>\n  <Btn onClick={()=>setStep(\"f2_theme\")} label=\"Ir a Tem√°tica y Desaf√≠o\" full={false}/></>)}\n{flow.step===\"f2_theme\"&&(<Card title=\"Tem√°ticas y desaf√≠o\" subtitle=\"Cuando est√©n listos, inicia el mapa\" width={980}>\n  <ThemeChallengeSection THEMES={THEMES} temaSel={temaSel} setTemaSel={setTemaSel} desafioIndex={desafioIndex} setDesafioIndex={setDesafioIndex} desafioActual={desafioActual} isTablet={isTablet} onContinue={()=>{}}/>\n  <div style={{display:\"flex\",justifyContent:\"center\",marginTop:12}}>\n    <Btn onClick={()=>{update(a=>{const key=`${temaSel}#${desafioIndex}`; const usage={...a.challengeUsage}; usage[key]=(usage[key]||0)+1; return {...a,challengeUsage:usage};}); resetTimer(10*60); setStep(\"f2_activity\",10*60);}} label=\"Abrir mapa y timer\" full={false}/>\n  </div>\n</Card>)}\n{flow.step===\"f2_activity\"&&(<Card title=\"Fase 2 ‚Äî En curso\" subtitle=\"Mapa de empat√≠a (timer)\" width={720}><BigTimer label=\"Tiempo F2 (Empat√≠a)\" defaultSec={10*60}/>\n  <div style={{display:\"flex\",justifyContent:\"center\",marginTop:12}}><Btn onClick={()=>setStep(\"f2_rank\")} label=\"Terminar y ver ranking\" full={false}/></div></Card>)}\n{flow.step===\"f2_rank\"&&(<Card title=\"Ranking ‚Äî Fase 2\" subtitle=\"Resultados en vivo\" width={900}><RankingBars data={ranking} onContinue={()=>setStep(\"f3_video\")}/></Card>)}\n\n{flow.step===\"f3_video\"&&(\n  <>\n    <div style={{ marginBottom: 12 }}>\n      <CreatividadAnimacion loop />\n    </div>\n    <Btn\n      onClick={()=>{\n        resetTimer(15*60);             \n        setStep(\"f3_activity\",15*60);\n      }}\n      label=\"Abrir actividad y timer\"\n      full={false}\n    />\n  </>\n)}\n\n{flow.step===\"f3_activity\"&&(<Card title=\"Fase 3 ‚Äî En curso\" subtitle=\"Creatividad (timer)\" width={720}><BigTimer label=\"Tiempo F3 (Creatividad)\" defaultSec={15*60}/>\n  <div style={{display:\"flex\",justifyContent:\"center\",marginTop:12}}><Btn onClick={()=>setStep(\"f3_rank\")} label=\"Terminar y ver ranking\" full={false}/></div></Card>)}\n{flow.step===\"f3_rank\"&&(<Card title=\"Ranking ‚Äî Fase 3\" subtitle=\"Resultados en vivo\" width={900}><RankingBars data={ranking} onContinue={()=>setStep(\"f4_video\")}/></Card>)}\n\n{/* --F4 VIDEO (PROFESOR) -- */}\n{flow.step===\"f4_video\"&&(\n  <PitchAnimacion\n    showContinue\n    onContinue={()=>{\n      resetTimer(10*60);              \n      setStep(\"f4_prep\", 10*60);\n    }}\n  />\n)}\n\n{/* --F4 PREP-- */}\n{flow.step===\"f4_prep\"&&(\n  <Card title=\"Fase 4 ‚Äî Preparaci√≥n del Pitch\" subtitle=\"Timer visible\" width={720}>\n    <BigTimer label=\"Tiempo F4 (Preparaci√≥n)\" defaultSec={10*60}/>\n    <div style={{display:\"flex\",justifyContent:\"center\",marginTop:12}}>\n      <Btn onClick={()=>setStep(\"f4_wheel\")} label=\"Ir a RUEDA de orden\" full={false}/>\n    </div>\n  </Card>\n)}\n{/* --F4 WHEEL (orden de presentaci√≥n)-- */}\n{flow.step===\"f4_wheel\"&&(\n  <Card title=\"Fase 4 ‚Äî Orden de Presentaci√≥n\" subtitle=\"Gira la ruleta o genera orden aleatorio\" width={980}>\n    <WheelOrder\n      teams={getTeamsForRoom(analytics, flow.roomCode)}\n      onConfirm={(order)=>{\n        publish({presentOrder:order,currentIdx:0});\n        resetTimer(flow.pitchSeconds);\n        setStep(\"f4_present\", flow.pitchSeconds);\n      }}\n    />\n  </Card>\n)}\n\n{/* --F4 PRESENT (profesor controla los turnos)-- */}\n{flow.step===\"f4_present\"&&(\n  <PresentStageTeacher\n    currentTeam={flow.presentOrder?.[flow.currentIdx] ?? \"-\"}\n    pitchSec={flow.pitchSeconds}\n    startTimer={()=>startTimer()}\n    pauseTimer={()=>pauseTimer()}\n    resetTimer={(s)=>resetTimer(s)}\n    remaining={flow.remaining}\n    onNext={()=>{\n      const nextIdx=flow.currentIdx+1;\n      if(nextIdx>=flow.presentOrder.length){\n        setStep(\"f5_video\");\n      }else{\n        publish({currentIdx:nextIdx});\n        resetTimer(flow.pitchSeconds);\n        setStep(\"f4_present\", flow.pitchSeconds);\n      }\n    }}\n  />\n)}\n\n{/* --F5 (profesor) -- */}\n{flow.step===\"f5_video\"&&(\n  <>\n    <VideoSpace title=\"Evaluaci√≥n y retroalimentaci√≥n\" />\n    <div style={{ display:\"flex\", justifyContent:\"center\", marginTop:12 }}>\n      <Btn onClick={()=>setStep(\"f5_eval\")} label=\"Abrir evaluaci√≥n\" full={false}/>\n    </div>\n  </>\n)}\n\n{flow.step===\"f5_eval\"&&(\n  <Card title=\"Fase 5 ‚Äî Evaluaci√≥n\" subtitle=\"Cada equipo califica a los dem√°s\" width={900}>\n    <div style={{fontSize:13,opacity:.8,marginBottom:12}}>\n      Los estudiantes ver√°n una interfaz con 6 criterios (deslizadores 0‚Äì5) y comentario opcional. Cada punto suma 1 moneda al equipo evaluado.\n    </div>\n    <div style={{display:\"flex\",gap:10,justifyContent:\"center\"}}>\n      <Btn onClick={()=>setStep(\"f5_rank\")} label=\"Ver ranking actualizado\" full={false}/>\n    </div>\n  </Card>\n)}\n\n{flow.step===\"f5_rank\"&&(\n  <Card title=\"Ranking ‚Äî Fase 5\" subtitle=\"Resultados en vivo\" width={900}>\n    <RankingBars data={ranking} onContinue={()=>setStep(\"f6_video\")}/>\n  </Card>\n)}\n\n{/* --F6 / CIERRE (profesor)-- */}\n{flow.step===\"f6_video\"&&(\n  <>\n    <VideoSpace title=\"Cierre y reflexi√≥n\"/>\n    <Btn onClick={()=>setStep(\"f6_close\")} label=\"Ir a cierre\" full={false}/>\n  </>\n)}\n\n{flow.step===\"f6_close\"&&(\n  <Card title=\"Cierre y Apoyo\" subtitle=\"Reflexi√≥n final (demo)\" width={900} tight>\n    <div style={{textAlign:\"left\"}}>\n      <p style={{marginTop:0}}>üéâ ¬°Felicitaciones! Pidan a cada equipo escribir su reflexi√≥n final.</p>\n      <textarea placeholder=\"(Vista profesor) ‚Äî Aqu√≠ solo mostramos un ejemplo\" style={{...baseInput,minHeight:120}}/>\n    </div>\n    <div style={{display:\"flex\",justifyContent:\"center\",gap:10,marginTop:12}}>\n      <Btn onClick={()=>setStep(\"qr\")} bg={theme.azul} label=\"Ir a QR\" full={false}/>\n    </div>\n  </Card>\n)}\n\n{flow.step===\"qr\"&&(\n  <Card title=\"¬°Eval√∫a el juego!\" subtitle=\"Escanea el c√≥digo QR con tu celular\" width={700}>\n    <div style={{width:260,height:260,margin:\"12px auto\",background:\"#fff\",border:`3px dashed ${theme.border}`,borderRadius:16,display:\"grid\",placeItems:\"center\",color:\"#90A4AE\",fontWeight:800}}>QR aqu√≠</div>\n    <Btn\n      onClick={()=>{\n        // reset de sala\n        publish({roomCode:\"\",expectedTeams:0,step:\"lobby\",remaining:5*60,running:false});\n        clearReadyForRoom();\n        writeJSON(COINS_KEY,{});\n        try{window.dispatchEvent(new StorageEvent(\"storage\",{key:COINS_KEY,newValue:JSON.stringify({})}))}catch{}\n      }}\n      bg={theme.rosa}\n      label=\"Terminar\"\n      full={false}\n    />\n  </Card>\n)}\n\n</AutoCenter></div>)}\n\n{/* ================= ALUMNO ================= */}\nif(mode===\"alumno\"){return(<div style={appStyles}><Background/><GlobalFormCSS/><AutoCenter>\n\n{/* --LOGIN (Alumno ingresa c√≥digo)-- */}\n{(!joinedRoom || joinedRoom !== flow.roomCode) && (\n  <Card title=\"Alumno\" subtitle=\"Ingresa el c√≥digo de sala para continuar\" width={520}>\n    <input\n      placeholder=\"C√≥digo de sala\"\n      value={roomCode}\n      onChange={e=>setRoomCode(e.target.value.toUpperCase())}\n      style={{...baseInput,textAlign:\"center\",fontWeight:700,marginBottom:14}}\n    />\n    <Btn\n      onClick={()=>{\n        const f=readJSON<FlowState>(FLOW_KEY,initialFlow);\n        if(!f.roomCode){\n          alert(\"A√∫n no hay sala activa. Espera al profesor.\");\n          return;\n        }\n        if(f.roomCode !== roomCode.trim()){\n          alert(\"C√≥digo incorrecto. Verifica con el profesor.\");\n          return;\n        }\n        sessionStorage.setItem(JOINED_KEY, f.roomCode);\n        setJoinedRoom(f.roomCode);\n      }}\n      label=\"Entrar a la sala\"\n    />\n    <Btn onClick={()=>setMode(\"inicio\")} bg={theme.amarillo} fg={theme.texto} label=\"‚¨Ö Back\"/>\n  </Card>\n)}\n\n{/* --CREAR GRUPO-- */}\n{joinedRoom === flow.roomCode && flow.roomCode && !teamReady && (\n  <Card title={`Sala ${flow.roomCode}`} subtitle=\"Crea tu grupo y marca listo\" width={980}>\n    <div style={{display:\"grid\",gridTemplateColumns:isTablet?\"1fr\":\"1fr 1fr auto\",gap:10,marginBottom:12}}>\n      <input placeholder=\"Nombre de grupo\" value={groupName} onChange={e=>setGroupName(e.target.value)} style={baseInput}/>\n      <div style={{display:\"grid\",gridTemplateColumns:\"1fr 1fr\",gap:10}}>\n        <input placeholder=\"Tu nombre\" value={miNombre} onChange={e=>setMiNombre(e.target.value)} style={baseInput}/>\n        <input placeholder=\"Tu carrera\" value={miCarrera} onChange={e=>setMiCarrera(e.target.value)} style={baseInput}/>\n      </div>\n      <Btn\n        onClick={()=>{\n          if(!groupName.trim()){\n            alert(\"Primero escribe el nombre del grupo.\");\n            return;\n          }\n          setIntegrantes(arr=>[...arr,{ nombre: (miNombre||\"Integrante\"), carrera: (miCarrera||\"‚Äî\") }]);\n          setMiNombre(\"\");\n          setMiCarrera(\"\");\n        }}\n        bg={theme.rosa}\n        label=\"Agregar integrante\"\n        full={false}\n      />\n    </div>\n\n    <div style={{textAlign:\"left\",maxHeight:220,overflowY:\"auto\",padding:8,border:`1px dashed ${theme.border}`,borderRadius:12,background:\"#fff\"}}>\n      {integrantes.length===0 && (<div style={{opacity:.7}}>A√∫n no hay integrantes‚Ä¶</div>)}\n      {integrantes.map((p,i)=>(\n        <div key={i} style={{display:\"grid\",gridTemplateColumns:\"40px 1fr 1fr\",gap:10,padding:\"8px 0\",alignItems:\"center\",borderBottom: i<integrantes.length-1 ? \"1px solid #eee\" : \"none\"}}>\n          <div style={{fontWeight:800,color:theme.azul}}>{i+1}.</div>\n          <div style={{fontWeight:700}}>{p.nombre}</div>\n          <div style={{opacity:.8}}>{p.carrera}</div>\n        </div>\n      ))}\n    </div>\n\n    <div style={{display:\"flex\",gap:10,marginTop:12,justifyContent:\"space-between\",flexWrap:\"wrap\"}}>\n      <Btn onClick={()=>setMode(\"inicio\")} bg={theme.amarillo} fg={theme.texto} label=\"‚¨Ö Back\" full={false}/>\n      <Btn onClick={markReady} label=\"Marcar listo y esperar al profesor\" full={false} disabled={!groupName.trim()}/>\n    </div>\n  </Card>\n)}\n\n{/* --ESPERA (alumno listo, profesor a√∫n no inicia)-- */}\n{joinedRoom===flow.roomCode && flow.roomCode && teamReady && flow.step===\"lobby\" && (\n  <Card title=\"Esperando al profesor\" subtitle=\"A√∫n no inicia la fase 1\" width={720}>\n    <div style={{textAlign:\"center\",fontSize:18,padding:20}}>\n      ‚è≥ Esperando a que el profesor comience...\n    </div>\n    <div style={{textAlign:\"center\",opacity:.7,fontSize:14}}>\n      Verifica en la sala del profesor que tu grupo aparece como <b>listo</b>.\n    </div>\n  </Card>\n)}\n\n{/* --F1 (Alumno con pesta√±as)-- */}\n{flow.step===\"f1_video\"&&<TeamworkMiniAnim />}\n{flow.step===\"f1_instr\"&&<Instructions title=\"Fase 1 ‚Äî Trabajo en equipo\" bullets={[\"El profesor controla el tiempo y el avance.\",\"Usa las pesta√±as para cambiar entre <b>Diferencias</b> y <b>Matriz</b>.\",\"Ambos comparten el mismo temporizador.\"]}/>}\n\n{flow.step===\"f1_activity\"&&(\n  <Card title=\"Fase 1 ‚Äî Actividades\" subtitle={`Tiempo: ${mmss(flow.remaining)} ¬∑ Monedas: ${coins}`} width={1100}>\n    <div style={{position:\"sticky\",top:12,zIndex:5,background:\"transparent\",paddingBottom:6,marginBottom:10}}>\n      <div style={{display:\"flex\",gap:8,overflowX:\"auto\"}}>\n        {[{key:\"spot\",label:\"üîé Diferencias\"},{key:\"matrix\",label:\"üî≤ Matriz\"}].map(t=>{\n          const active=f1Tab===(t.key as \"spot\"|\"matrix\");\n          return(\n            <button key={t.key} onClick={()=>setF1Tab(t.key as \"spot\"|\"matrix\")} style={{padding:\"8px 12px\",borderRadius:12,border:`2px solid ${active?theme.rosa:theme.border}`,background:active?\"#FFF3F7\":\"#fff\",fontWeight:800,cursor:\"pointer\",whiteSpace:\"nowrap\"}}>\n              {t.label}\n            </button>\n          );\n        })}\n      </div>\n    </div>\n\n    {f1Tab===\"spot\"?(\n      <>\n        <div style={{fontSize:13,marginBottom:8,opacity:.9}}>Toca en la <b>imagen izquierda</b> donde veas una diferencia. Puedes usar hasta 2 pistas (‚àí1 moneda).</div>\n        <div style={{display:\"grid\",gridTemplateColumns:isTablet?\"1fr\":\"1fr 1fr\",gap:16}}>\n          {/* izquierda clickeable */}\n          <div ref={spotRef} onClick={clickSpot} style={{position:\"relative\",width:\"100%\",aspectRatio:\"16/7\",background:\"#fff\",borderRadius:16,overflow:\"hidden\",cursor:flow.running?\"crosshair\":\"not-allowed\",border:`1px solid ${theme.border}`}}>\n            <svg viewBox=\"0 0 100 100\" preserveAspectRatio=\"none\" style={{position:\"absolute\",inset:0,width:\"100%\",height:\"100%\"}}>\n              <rect x=\"5\" y=\"10\" width=\"20\" height=\"20\" fill=\"#90CAF9\"/><circle cx=\"50\" cy=\"25\" r=\"10\" fill=\"#F48FB1\"/>\n              <polygon points=\"80,15 90,35 70,35\" fill=\"#A5D6A7\"/><polygon points=\"30,70 40,90 20,90\" fill={theme.amarillo}/>\n            </svg>\n            <div style={{position:\"absolute\",inset:0,display:\"grid\",gridTemplateColumns:\"1fr 1fr\",gridTemplateRows:\"1fr 1fr\"}}>\n              {[\"A\",\"B\",\"C\",\"D\"].map(z=>(\n                <div key={z} style={{outline:\"1px dashed rgba(0,0,0,.06)\",padding:6,fontSize:12,color:\"#78909C\"}}>{z}</div>\n              ))}\n            </div>\n            {diffs.filter(d=>d.found).map((d,i)=>(\n              <div key={i} style={{position:\"absolute\",left:`${d.x*100}%`,top:`${d.y*100}%`,transform:\"translate(-50%,-50%)\",width:d.r*200,height:d.r*200,borderRadius:\"50%\",border:`3px solid ${theme.rosa}`,boxShadow:\"0 0 0 4px rgba(233,30,99,.2)\"}}/>\n            ))}\n          </div>\n          {/* derecha referencia */}\n          <div style={{position:\"relative\",width:\"100%\",aspectRatio:\"16/7\",...panelBox,overflow:\"hidden\"}}>\n            <svg viewBox=\"0 0 100 100\" preserveAspectRatio=\"none\" style={{position:\"absolute\",inset:0,width:\"100%\",height:\"100%\"}}>\n              <rect x=\"5\" y=\"10\" width=\"20\" height=\"22\" fill=\"#90CAF9\"/><circle cx=\"50\" cy=\"25\" r=\"9\" fill=\"#F48FB1\"/>\n              <polygon points=\"82,17 92,37 72,37\" fill=\"#A5D6A7\"/><rect x=\"22\" y=\"80\" width=\"16\" height=\"8\" fill={theme.amarillo}/>\n            </svg>\n          </div>\n        </div>\n        <div style={{display:\"flex\",gap:10,justifyContent:\"space-between\",alignItems:\"center\",marginTop:12,flexWrap:\"wrap\"}}>\n          <div style={{fontSize:13,opacity:.8}}>Encontradas: {diffs.filter(d=>d.found).length}/4 ¬∑ Pistas: {hintsLeft}</div>\n          <Btn onClick={useHint} bg={theme.amarillo} fg={theme.texto} label=\"üí° Pista (‚àí1)\" full={false} disabled={hintsLeft<=0||!flow.running}/>\n        </div>\n      </>\n    ):(\n      <>\n        <div style={{fontSize:13,marginBottom:8,opacity:.9}}>Reproduce el <b>patr√≥n objetivo</b> en tu tablero. El tiempo sigue corriendo.</div>\n        <div style={{display:\"grid\",gridTemplateColumns:isTablet?\"1fr\":\"1fr 1fr\",gap:16,alignItems:\"start\"}}>\n          <div style={panelBox}>\n            <div style={badgeTitle}>Patr√≥n objetivo</div>\n            <GridView readOnly grid={goal} size={5} onClickCell={()=>{}}/>\n            <div style={smallHint}>Celdas encendidas: {goal.flat().filter(Boolean).length}</div>\n          </div>\n          <div style={panelBox}>\n            <div style={badgeTitle}>Tablero del equipo</div>\n            <GridView grid={grid} size={5} onClickCell={toggleCell}/>\n            <div style={smallHint}>Progreso: {grid.flat().filter((v,i)=>v===goal.flat()[i]).length}/{5*5} coincidencias</div>\n          </div>\n        </div>\n      </>\n    )}\n  </Card>\n)}\n{/* --F1 Rank (Alumno) -- */}\n{flow.step===\"f1_rank\"&&(\n  <Card title=\"Ranking ‚Äî Fase 1\" subtitle=\"Resultados en vivo\" width={900}>\n    <RankingBars data={ranking} onContinue={()=>setStep(\"f2_video\")}/>\n  </Card>\n)}\n{/* --F2 Alumno-- */}\n{flow.step===\"f2_video\" && <EmpathyAnimacion loop /> }\n{flow.step===\"f2_instr\"&&<Instructions title=\"Fase 2 ‚Äî Empat√≠a\" bullets={[\"El profesor anunciar√° la tem√°tica/desaf√≠o.\",\"Completa el mapa de empat√≠a. El tiempo lo controla el profesor.\"]}/>}\n{flow.step===\"f2_theme\"&&(\n  <Card title=\"Tem√°tica y desaf√≠o\" subtitle=\"Esperando al profesor para iniciar el mapa\" width={980}>\n    <ThemeChallengeSection THEMES={THEMES} temaSel={temaSel} setTemaSel={setTemaSel} desafioIndex={desafioIndex} setDesafioIndex={setDesafioIndex} desafioActual={desafioActual} isTablet={isTablet} onContinue={()=>{}}/>\n  </Card>\n)}\n{flow.step===\"f2_activity\"&&(\n  <Card title={`Etapa 2 ‚Äî ${THEMES[temaSel].label}: ${desafioActual.titulo}`} subtitle={`Tiempo: ${mmss(flow.remaining)} ¬∑ Monedas: ${coins}`} width={1100}>\n    <EmpathySection\n      isTablet={isTablet} isMobile={isMobile}\n      bubbleSize={bubbleSize} centerBubbleSize={centerBubbleSize} bubblePositions={bubblePositions}\n      EMPATIA_FIELDS={EMPATIA_FIELDS} empatia={empatia}\n      setActiveBubble={setActiveBubble} activeBubble={activeBubble}\n      onEmpatiaChange={onEmpatiaChange}\n    />\n  </Card>\n)}\n{/* --F2 Rank (Alumno) -- */}\n{flow.step===\"f2_rank\"&&(\n  <Card title=\"Ranking ‚Äî Fase 2\" subtitle=\"Resultados en vivo\" width={900}>\n    <RankingBars data={ranking} onContinue={()=>setStep(\"f3_video\")}/>\n  </Card>\n)}\n{/* --F3 Alumno-- */}\n{flow.step===\"f3_video\" && <CreatividadAnimacion loop /> }\n{flow.step===\"f3_activity\"&&(\n  <Card title=\"Etapa 3 ‚Äî Creatividad (LEGO)\" subtitle={`Tiempo: ${mmss(flow.remaining)} ¬∑ Monedas: ${coins}`} width={900}>\n    <div style={{display:\"grid\",gridTemplateColumns:isTablet?\"1fr\":\"1fr 1fr\",gap:10,alignItems:\"center\"}}>\n      <div>\n        <p style={{marginTop:0}}>Sube una foto de tu soluci√≥n (demo):</p>\n        <input type=\"file\" accept=\"image/*\"/>\n      </div>\n      <div>\n        <p style={{marginTop:0}}>Mini-retos (3 monedas c/u):</p>\n        <div style={{display:\"grid\",gap:8}}>\n          {[\"Prototipo montado\",\"Soluci√≥n explicada\",\"Foto clara\"].map(r=>(\n            <Btn key={r} onClick={()=>setCoins(c=>c+3)} bg={\"#C8E6C9\"} fg={\"#1B5E20\"} label={`‚úî ${r}`}/>\n          ))}\n        </div>\n      </div>\n    </div>\n  </Card>\n)}\n{/* --F3 Rank (Alumno) -- */}\n{flow.step===\"f3_rank\"&&(\n  <Card title=\"Ranking ‚Äî Fase 3\" subtitle=\"Resultados en vivo\" width={900}>\n    <RankingBars data={ranking} onContinue={()=>setStep(\"f4_video\")}/>\n  </Card>\n)}\n{/* --F4 Alumno-- */}\n{flow.step===\"f4_video\"&&(<PitchAnimacion />)}\n{flow.step===\"f4_prep\"&&(\n  <Card title=\"Etapa 4 ‚Äî Comunicaci√≥n (preparaci√≥n)\" subtitle={`Tiempo: ${mmss(flow.remaining)}`} width={1100} tight>\n    <div style={{display:\"grid\",gridTemplateColumns:isTablet?\"1fr\":\"380px 1fr\",gap:12,textAlign:\"left\"}}>\n      <div style={{...panelBox}}>\n        <div style={badgeTitle}>Estructura recomendada</div>\n        <ol style={{marginTop:0,paddingLeft:18}}>\n          <li><b>Hook</b> (problema en 1 frase)</li>\n          <li><b>Usuario</b> y evidencia breve</li>\n          <li><b>Soluci√≥n</b> y c√≥mo funciona</li>\n          <li><b>Valor</b> (qu√© mejora, m√©tricas)</li>\n          <li><b>Impacto</b> y pr√≥ximos pasos</li>\n        </ol>\n      </div>\n      <div style={{...panelBox}}>\n        <div style={badgeTitle}>Borrador del pitch</div>\n        <textarea placeholder=\"Escribe tu pitch...\" style={{...baseInput,minHeight:260}}/>\n      </div>\n    </div>\n  </Card>\n)}\n{flow.step===\"f4_present\"&&(\n  <EvaluationPanelStudent\n    roomCode={flow.roomCode}\n    teams={getTeamsForRoom(analytics, flow.roomCode)}\n    analyticsUpdate={update}\n    fromTeam={(teamId.split(\"::\")[1]||\"Equipo\")}\n    \n  />\n)}\n\n{flow.step===\"f5_video\"&&(\n  <Card title=\"¬°Eval√∫a el juego!\" subtitle=\"Escanea el c√≥digo QR con tu celular\" width={700}>\n    <div\n      style={{\n        width:260,\n        height:260,\n        margin:\"12px auto\",\n        background:\"#fff\",\n        border:`3px dashed ${theme.border}`,\n        borderRadius:16,\n        display:\"grid\",\n        placeItems:\"center\",\n        color:\"#90A4AE\",\n        fontWeight:800\n      }}\n    >\n      QR aqu√≠\n    </div>\n  </Card>\n)}\n\n\n{/* --F5 Rank (Alumno) -- */}\n{flow.step===\"f5_rank\"&&(\n  <Card title=\"Ranking ‚Äî Fase 5\" subtitle=\"Resultados en vivo\" width={900}>\n    <RankingBars data={ranking} onContinue={()=>setStep(\"f6_video\")}/>\n  </Card>\n)}\n{/* --F6 / QR Alumno-- */}\n{flow.step===\"f6_video\"&&(<VideoSpace title=\"Cierre y reflexi√≥n\"/>)}\n{flow.step===\"f6_close\"&&(\n  <Card title=\"Cierre y Apoyo\" subtitle={`Monedas finales: ${coins}`} width={900} tight>\n    <div style={{textAlign:\"left\"}}>\n      <p style={{marginTop:0}}>üéâ ¬°Felicitaciones! Escribe tu reflexi√≥n final.</p>\n      <textarea id=\"reflexionText\" placeholder=\"Escribe tu reflexi√≥n...\" style={{...baseInput,minHeight:120}}/>\n      <div style={{display:\"flex\",justifyContent:\"flex-end\",marginTop:8}}>\n        <Btn\n          label=\"Enviar reflexi√≥n\"\n          full={false}\n          onClick={()=>{\n            const ta=document.getElementById(\"reflexionText\") as HTMLTextAreaElement|null;\n            const text=(ta?.value||\"\").trim();\n            if(!text){alert(\"Escribe una reflexi√≥n primero\");return;}\n            const teamName=teamId.split(\"::\")[1]||\"Equipo\";\n            update(a=>({...a,reflections:[...a.reflections,{roomCode:flow.roomCode,teamName,text,ts:Date.now()}]}));\n            alert(\"¬°Gracias! Reflexi√≥n registrada.\"); if(ta)ta.value=\"\";\n          }}\n        />\n      </div>\n    </div>\n  </Card>\n)}\n{flow.step===\"qr\"&&(\n  <Card title=\"¬°Eval√∫a el juego!\" subtitle=\"Escanea el c√≥digo QR con tu celular\" width={700}>\n    <div style={{width:260,height:260,margin:\"12px auto\",background:\"#fff\",border:`3px dashed ${theme.border}`,borderRadius:16,display:\"grid\",placeItems:\"center\",color:\"#90A4AE\",fontWeight:800}}>QR aqu√≠</div>\n  </Card>\n)}\n\n</AutoCenter></div>)}\n\nreturn null;\n}\n\n/* ===================== REUSABLES ===================== */\nfunction GridView({grid,size,onClickCell,readOnly}:{grid:boolean[][];size:number;onClickCell:(r:number,c:number)=>void;readOnly?:boolean;}){\n  const isTablet=useMediaQuery(\"(max-width: 1180px)\"); const isMobile=useMediaQuery(\"(max-width: 640px)\"); const cell=isMobile?22:isTablet?28:34;\n  return(<div style={{display:\"grid\",gridTemplateColumns:`repeat(${size}, ${cell}px)`,gap:6,justifyContent:\"center\"}}>\n    {grid.map((row,r)=>row.map((on,c)=>(\n      <button key={`${r}-${c}`} onClick={()=>!readOnly&&onClickCell(r,c)} style={{width:cell,height:cell,borderRadius:8,border:`1px solid ${theme.border}`,background:on?theme.rosa:\"#FFFFFF\",boxShadow:on?\"inset 0 0 0 3px rgba(233,30,99,.15)\":\"none\",cursor:readOnly?\"default\":\"pointer\"}}/>\n    )))}\n  </div>);\n}\n\n/* --Tema/Desaf√≠o UI-- */\nfunction ThemeChallengeSection({THEMES,temaSel,setTemaSel,desafioIndex,setDesafioIndex,desafioActual,isTablet,onContinue}:any){\n  return(<>\n    <div style={{display:\"flex\",gap:8,justifyContent:\"center\",marginBottom:12,flexWrap:\"wrap\",position:\"relative\",zIndex:3}}>\n      {(Object.keys(THEMES) as (keyof typeof THEMES)[]).map(key=>{\n        const active=temaSel===key;\n        return(\n          <Btn key={String(key)} onClick={()=>setTemaSel(key)} bg={active?theme.azul:\"#BBDEFB\"} fg={active?theme.blanco:theme.texto} label={THEMES[key].label} full={false}/>\n        );\n      })}\n    </div>\n    <div style={{display:\"grid\",gridTemplateColumns:isTablet?\"1fr\":\"280px 1fr 360px\",gap:16,alignItems:\"start\"}}>\n      <div style={panelBox}>\n        <div style={{...badgeTitle,marginBottom:8}}>Desaf√≠os</div>\n        <div style={{display:\"grid\",gap:8}}>\n          {THEMES[temaSel].desafios.map((d:any,idx:number)=>{\n            const active=desafioIndex===idx;\n            return(\n              <button key={idx} onClick={()=>setDesafioIndex(idx)} style={{textAlign:\"left\",padding:10,borderRadius:12,border:`2px solid ${active?theme.rosa:theme.border}`,background:active?\"#FFF3F7\":\"#fff\",fontWeight:700,cursor:\"pointer\"}}>\n                {d.titulo}\n              </button>\n            )\n          })}\n        </div>\n      </div>\n      <div style={{...panelBox,padding:10}}>\n        <div style={{...badgeTitle,marginBottom:6}}>Video de contexto</div>\n        <div style={{width:\"100%\",aspectRatio:\"16/9\",background:theme.surfaceAlt,borderRadius:12,border:`2px dashed ${theme.border}`,display:\"grid\",placeItems:\"center\",color:\"#90A4AE\",fontWeight:700,pointerEvents:\"none\"}}>Video aqu√≠</div>\n      </div>\n      <div style={{...panelBox,textAlign:\"left\",padding:16}}>\n        <div style={{fontWeight:900,color:theme.rosa,marginBottom:6}}>{desafioActual.titulo}</div>\n        <p style={{marginTop:0}}>{desafioActual.descripcion}</p>\n        <div style={{display:\"grid\",gridTemplateColumns:\"auto 1fr\",gap:12,alignItems:\"center\",background:\"#FAFAFA\",padding:10,borderRadius:12,border:\"1px solid #eee\",marginBottom:10}}>\n          <div style={{width:56,height:56,borderRadius:\"50%\",background:theme.rosa,color:theme.blanco,display:\"grid\",placeItems:\"center\",fontWeight:900,boxShadow:\"0 0 0 4px rgba(233,30,99,.15)\"}}>\n            {THEMES[temaSel].persona.nombre.charAt(0)}\n          </div>\n          <div>\n            <div style={{fontWeight:800,color:theme.azul}}>{THEMES[temaSel].persona.nombre} ¬∑ {THEMES[temaSel].persona.edad} a√±os</div>\n            <div style={{fontSize:13,opacity:.85}}>{THEMES[temaSel].persona.bio}</div>\n          </div>\n        </div>\n        <div style={{display:\"flex\",justifyContent:\"flex-end\"}}><Btn onClick={onContinue} label=\"Elegir y continuar\" full={false}/></div>\n      </div>\n    </div>\n  </>);\n}\n/* ===================== REUSABLES (resto de componentes) ===================== */\n\n/* --(mapa de empat√≠a) -- */\nfunction EmpathySection(props:any){\n  const {\n    isTablet,isMobile,\n    bubbleSize,centerBubbleSize,bubblePositions,\n    EMPATIA_FIELDS,empatia,\n    setActiveBubble,activeBubble,\n    onEmpatiaChange\n  } = props;\n\n  return (\n    <div style={{display:\"grid\",gridTemplateColumns:isTablet?\"1fr\":\"420px 1fr\",gap:16,textAlign:\"left\"}}>\n      <div style={{position:\"relative\",height:isMobile?300:340,...panelBox,overflow:\"hidden\"}}>\n        <div style={{\n          position:\"absolute\",left:\"50%\",top:\"55%\",\n          transform:\"translate(-50%,-50%)\",\n          width:centerBubbleSize,height:centerBubbleSize,\n          borderRadius:\"50%\",background:\"#FFF3F7\",\n          border:`3px solid ${theme.rosa}`,\n          display:\"grid\",placeItems:\"center\",\n          fontWeight:900,color:theme.rosa,textAlign:\"center\",padding:12\n        }}>\n          Persona\n        </div>\n\n        {EMPATIA_FIELDS.map((f:any)=>{\n          const filled = !!empatia[f.key]?.trim();\n          const active = activeBubble===f.key;\n          return (\n            <button\n              key={f.key}\n              onClick={()=>setActiveBubble(f.key)}\n              style={{\n                position:\"absolute\",\n                ...(bubblePositions[f.key]||{}),\n                width:bubbleSize,height:bubbleSize,borderRadius:\"50%\",\n                border:`3px solid ${active?theme.azul:theme.rosa}`,\n                background:filled?\"#E1F5FE\":\"#FFFDE7\",\n                color:theme.texto,fontWeight:800,cursor:\"pointer\",\n                boxShadow:active?\"0 0 0 6px rgba(25,118,210,.15)\":\"0 6px 14px rgba(0,0,0,.08)\"\n              }}\n              title={f.label}\n            >\n              {filled?\"‚úî \":\"\"}{f.label}\n            </button>\n          )\n        })}\n      </div>\n\n      <div style={panelBox}>\n        <div style={{fontWeight:900,color:theme.azul,marginBottom:6}}>\n          {EMPATIA_FIELDS.find((x:any)=>x.key===activeBubble)?.label}\n        </div>\n        <textarea\n          value={empatia[activeBubble]}\n          onChange={e=>onEmpatiaChange(activeBubble,e.target.value)}\n          placeholder={`Escribe sobre ${EMPATIA_FIELDS.find((x:any)=>x.key===activeBubble)?.label}...`}\n          style={{...baseInput,minHeight:160}}\n        />\n        <div style={{fontSize:12,opacity:.75,marginTop:8}}>\n          Consejos: ejemplos concretos, verbos en acci√≥n, datos o citas del usuario.\n        </div>\n        <div style={{fontSize:13,opacity:.85,marginTop:12}}>\n          Completadas: {EMPATIA_FIELDS.filter((f:any)=>empatia[f.key].trim()).length}/{EMPATIA_FIELDS.length}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n/* --Confetti-- */\nconst ConfettiBurst:React.FC=()=>{\n  const [items,setItems]=useState<{id:number;left:number;delay:number;emoji:string}[]>([]);\n  useEffect(()=>{\n    const EMOJIS=[\"üéâ\",\"üéä\",\"‚ú®\",\"üèÜ\",\"üéà\",\"üí•\",\"‚≠ê\"];\n    const arr=Array.from({length:28}).map((_,i)=>({\n      id:i,left:Math.random()*100,delay:Math.random()*.8,\n      emoji:EMOJIS[Math.floor(Math.random()*EMOJIS.length)]\n    }));\n    setItems(arr);\n    const t=setTimeout(()=>setItems([]),2500);\n    return()=>clearTimeout(t);\n  },[]);\n  return(\n    <div style={{position:\"absolute\",inset:0,overflow:\"hidden\",pointerEvents:\"none\"}}>\n      {items.map(p=>(\n        <div\n          key={p.id}\n          style={{\n            position:\"absolute\",top:-20,left:`${p.left}%`,\n            fontSize:22,animation:`fall ${1.8+Math.random()*.9}s ease-in ${p.delay}s forwards`\n          }}>\n          {p.emoji}\n        </div>\n      ))}\n    </div>\n  );\n};\n\n/* --RankingBars-- */\nfunction RankingBars({data,onContinue}:{data:{equipo:string;total:number}[];onContinue:()=>void;}){\n  const [mounted,setMounted]=useState(false);\n  useEffect(()=>setMounted(true),[]);\n  const max=Math.max(1,...data.map(d=>d.total||0));\n\n  return (\n    <>\n      <div style={{...panelBox}}>\n        {data.length===0 && <div style={{opacity:.7}}>A√∫n no hay datos de equipos‚Ä¶</div>}\n        {data.map((r,i)=>{\n          const pct=Math.round((r.total/max)*100);\n          const isFirst=i===0;\n          const isLast=i===data.length-1;\n          const secondOrThird=!isFirst&&!isLast;\n          const barBg=isFirst\n            ? `linear-gradient(90deg, ${theme.amarillo}, #FFF59D, ${theme.amarillo})`\n            : secondOrThird\n            ? `linear-gradient(90deg, ${theme.azul}22, ${theme.azul}66)`\n            : \"#CFD8DC\";\n          return (\n            <div key={r.equipo} style={{display:\"grid\",gridTemplateColumns:\"56px 1fr 90px\",gap:8,alignItems:\"center\",marginBottom:12}}>\n              <div style={{fontWeight:900,fontSize:18,color:theme.blanco,textShadow:\"0 1px 2px rgba(0,0,0,.3)\"}}>\n                {i+1}\n                {isFirst && <div style={{fontSize:22,lineHeight:\"16px\",animation:\"crownFloat 1.6s ease-in-out infinite\"}}>üëë</div>}\n                {isLast && <div style={{fontSize:18,lineHeight:\"16px\"}}>üîó</div>}\n              </div>\n              <div style={{position:\"relative\"}}>\n                <div style={{position:\"absolute\",left:10,top:-18,fontWeight:800,color:isLast?\"#607D8B\":theme.texto}}>\n                  {r.equipo}{i===1&&data.length>=2?\" ü•à\":i===2&&data.length>=3?\" ü•â\":\"\"}\n                </div>\n                <div style={{height:28,background:\"#F1F5F9\",borderRadius:14,overflow:\"hidden\",boxShadow:\"inset 0 0 0 1px #e2e8f0\"}}>\n                  <div\n                    style={{\n                      height:\"100%\",width:mounted?`${pct}%`:0,transition:\"width .9s ease\",\n                      background:barBg,backgroundSize:isFirst?\"200% 100%\":undefined,\n                      animation:isFirst?\"shimmer 2.4s linear infinite\":undefined,\n                      borderRadius:14,position:\"relative\",filter:isLast?\"grayscale(.3)\":\"none\"\n                    }}\n                  />\n                </div>\n              </div>\n              <div style={{textAlign:\"right\",fontWeight:900,fontSize:18}}>{r.total}</div>\n            </div>\n          )\n        })}\n      </div>\n      <div style={{display:\"flex\",justifyContent:\"center\",gap:10,marginTop:12}}>\n        <Btn onClick={onContinue} label=\"Continuar\" full={false}/>\n      </div>\n    </>\n  );\n}\n\n/* --Ruleta/Orden presentaciones (profesor)-- */\nfunction WheelOrder({teams,onConfirm}:{teams:string[];onConfirm:(order:string[])=>void;}){\n  const [order,setOrder]=useState<string[]>([]);\n  const remaining=teams.filter(t=>!order.includes(t));\n\n  return(\n    <div style={{...panelBox}}>\n      <div style={{...badgeTitle}}>Ruleta / Orden aleatorio</div>\n      <div style={{display:\"grid\",gap:10}}>\n        <div style={{display:\"grid\",gridTemplateColumns:\"1fr 1fr\",gap:10}}>\n          <div>\n            <div style={{fontWeight:800,marginBottom:6}}>Equipos disponibles</div>\n            <div style={{border:`1px dashed ${theme.border}`,borderRadius:12,padding:10,background:\"#fff\",minHeight:80}}>\n              {remaining.length===0\n                ? <div style={{opacity:.6}}>Sin equipos pendientes</div>\n                : remaining.map((t,i)=>(<div key={i}>‚Ä¢ {t}</div>))}\n            </div>\n          </div>\n          <div>\n            <div style={{fontWeight:800,marginBottom:6}}>Orden elegido</div>\n            <div style={{border:`1px dashed ${theme.border}`,borderRadius:12,padding:10,background:\"#fff\",minHeight:80}}>\n              {order.length===0\n                ? <div style={{opacity:.6}}>A√∫n no hay orden‚Ä¶</div>\n                : order.map((t,i)=>(<div key={i}><b>{i+1}.</b> {t}</div>))}\n            </div>\n          </div>\n        </div>\n\n        <div style={{display:\"flex\",gap:8,flexWrap:\"wrap\"}}>\n          <Btn\n            full={false}\n            label=\"üé∞ Girar (agrega 1 equipo)\"\n            onClick={()=>{\n              if(remaining.length===0) return;\n              const next=remaining[Math.floor(Math.random()*remaining.length)];\n              setOrder(o=>[...o,next]);\n            }}\n          />\n          <Btn\n            full={false}\n            variant=\"outline\"\n            label=\"üé≤ Girar 3 veces\"\n            onClick={()=>{\n              let pool=remaining.slice(); const picks:string[]=[];\n              for(let i=0;i<3 && pool.length;i++){\n                const idx=Math.floor(Math.random()*pool.length);\n                picks.push(pool[idx]); pool.splice(idx,1);\n              }\n              setOrder(o=>[...o,...picks]);\n            }}\n          />\n          <Btn\n            full={false}\n            variant=\"outline\"\n            label=\"üîÄ Generar todo al azar\"\n            onClick={()=> setOrder(o=>[...o, ...shuffle(remaining)])}\n          />\n          <Btn full={false} bg=\"#F44336\" label=\"‚Ü∫ Limpiar\" onClick={()=>setOrder([])}/>\n          <div style={{marginLeft:\"auto\"}}>\n            <Btn\n              full={false}\n              label=\"‚úÖ Confirmar orden y comenzar\"\n              onClick={()=>{\n                const finalOrder=order.length?order:[...shuffle(teams)];\n                onConfirm(finalOrder);\n              }}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n/* --Escenario Pitch (profesor) -- */\nfunction PresentStageTeacher({\n  currentTeam,onNext,pitchSec,startTimer,pauseTimer,resetTimer,remaining\n}:{currentTeam:string;onNext:()=>void;pitchSec:number;startTimer:()=>void;pauseTimer:()=>void;resetTimer:(s:number)=>void;remaining:number;}){\n  return(\n    <div style={{display:\"grid\",gap:12}}>\n      <Card title=\"Pitch en curso\" subtitle={`Presenta: ${currentTeam}`} width={900}>\n        <div\n          style={{\n            width:\"100%\",aspectRatio:\"16/7\",borderRadius:16,border:`2px solid ${theme.border}`,\n            display:\"grid\",placeItems:\"center\",background:\"linear-gradient(135deg,#fff 0%, #F1F5F9 60%)\"\n          }}\n        >\n          <div style={{fontSize:28,fontWeight:900,color:theme.azul}}>üé§ Escenario ‚Äî {currentTeam}</div>\n        </div>\n\n        <div style={{marginTop:12}}>\n          <div style={{...panelBox,textAlign:\"center\"}}>\n            <div style={{fontWeight:900,color:theme.azul,marginBottom:6}}>Tiempo de pitch</div>\n            <div style={{fontSize:64,fontWeight:900,letterSpacing:1,marginBottom:12}}>{mmss(remaining)}</div>\n            <div style={{display:\"flex\",gap:8,justifyContent:\"center\",flexWrap:\"wrap\"}}>\n              <Btn onClick={()=>startTimer()} label=\"‚ñ∂ Iniciar\" full={false}/>\n              <Btn onClick={()=>pauseTimer()} label=\"‚è∏ Pausa\" full={false}/>\n              <Btn onClick={()=>resetTimer(pitchSec)} label=\"‚ü≤ Reset\" full={false} variant=\"outline\"/>\n            </div>\n          </div>\n        </div>\n\n        <div style={{display:\"flex\",justifyContent:\"center\",marginTop:12}}>\n          <Btn onClick={onNext} label=\"Siguiente grupo\" full={false}/>\n        </div>\n      </Card>\n    </div>\n  );\n}\n\nfunction EvaluationPanelStudent({\n  roomCode,teams,analyticsUpdate,fromTeam\n}:{roomCode:string;teams:string[];analyticsUpdate:(fn:(a:Analytics)=>Analytics)=>void;fromTeam:string;}){\n  const [active,setActive]=useState(teams[0]||\"\");\n  const [ratingsByTeam,setRatingsByTeam]=useState<Record<string,number[]>>(\n    ()=>Object.fromEntries(teams.map(t=>[t,[0,0,0,0,0,0]]))\n  );\n  const [commentByTeam,setCommentByTeam]=useState<Record<string,string>>(\n    ()=>Object.fromEntries(teams.map(t=>[t,\"\"]))\n  );\n\n  useEffect(()=>{\n    if(teams.length && !active) setActive(teams[0]);\n  },[teams,active]);\n\n  const rate=(team:string,idx:number,value:number)=>{\n    setRatingsByTeam(prev=>{\n      const current=prev[team]||[0,0,0,0,0,0];\n      const next=current.slice();\n      const old=current[idx]||0;\n      next[idx]=value;\n\n      const delta=value-old;\n      if(delta!==0) awardCoinsToTeam(roomCode, team, delta);\n\n      return {...prev,[team]:next};\n    });\n  };\n\n  const submitFeedback=(team:string)=>{\n    const ratings=ratingsByTeam[team]||[0,0,0,0,0,0];\n    const comment=(commentByTeam[team]||\"\").trim();\n    analyticsUpdate(a=>({...a,feedbacks:[...a.feedbacks,{\n      roomCode, fromTeam, targetTeam:team, ratings,\n      comment:comment||undefined, ts:Date.now()\n    }]}));\n    alert(\"¬°Gracias! Evaluaci√≥n registrada para \" + team);\n  };\n\n  return(\n    <Card title=\"Evaluaci√≥n de equipos\" subtitle=\"Elige equipo y califica 0‚Äì5 (cada punto = 1 moneda para ese equipo)\" width={1100}>\n      {/* Pesta√±as */}\n      <div style={{position:\"sticky\",top:12,zIndex:5,background:\"transparent\",paddingBottom:6,marginBottom:10}}>\n        <div style={{display:\"flex\",gap:8,overflowX:\"auto\"}}>\n          {teams.map(t=>{\n            const activeTab=active===t;\n            return(\n              <button\n                key={t}\n                onClick={()=>setActive(t)}\n                style={{\n                  padding:\"8px 12px\",borderRadius:12,\n                  border:`2px solid ${activeTab?theme.rosa:theme.border}`,\n                  background:activeTab?\"#FFF3F7\":\"#fff\",\n                  fontWeight:800,cursor:\"pointer\",whiteSpace:\"nowrap\"\n                }}>\n                {t}\n              </button>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Barras 0-5 */}\n      {active && (\n        <div style={{...panelBox}}>\n          <div style={{fontWeight:900,color:theme.azul,marginBottom:8}}>{active}</div>\n          <div style={{display:\"grid\",gap:10}}>\n            {Array.from({length:6}).map((_,i)=>{\n              const val=ratingsByTeam[active]?.[i]||0;\n              return(\n                <div key={i} style={{display:\"grid\",gridTemplateColumns:\"160px 1fr 60px\",gap:10,alignItems:\"center\"}}>\n                  <div style={{fontWeight:800}}>Criterio {i+1}</div>\n                  <input\n                    type=\"range\" min={0} max={5} step={1}\n                    value={val}\n                    onChange={e=>rate(active,i,Number(e.target.value))}\n                    style={{width:\"100%\"}}\n                  />\n                  <div style={{textAlign:\"right\",fontWeight:900}}>{val}/5</div>\n                </div>\n              );\n            })}\n          </div>\n\n          <div style={{marginTop:12}}>\n            <div style={{fontWeight:800,marginBottom:6}}>Comentario (opcional)</div>\n            <textarea\n              value={commentByTeam[active]||\"\"}\n              onChange={e=>setCommentByTeam(s=>({...s,[active]:e.target.value}))}\n              style={{...baseInput,minHeight:80}}\n              placeholder=\"Escribe feedback para este equipo (opcional)‚Ä¶\"\n            />\n          </div>\n\n          <div style={{display:\"flex\",justifyContent:\"flex-end\",marginTop:10}}>\n            <Btn label=\"Enviar evaluaci√≥n de este equipo\" full={false} onClick={()=>submitFeedback(active)}/>\n          </div>\n        </div>\n      )}\n    </Card>\n  );\n}\n\n/* --ADMIN DASHBOARD-- */\nfunction AdminDashboard({\n  analytics,THEMES,setTHEMES,flow,onBack,ranking,clearMetrics\n}:{analytics:Analytics;THEMES:any;setTHEMES:(t:any)=>void;flow:any;onBack:()=>void;ranking:{equipo:string;total:number}[];clearMetrics:()=>void;}){\n  const [tab,setTab]=useState<\"resumen\"|\"temas\"|\"equipos\"|\"reflexiones\"|\"uso\"|\"ranking\">(\"resumen\");\n\n  const exportJSON=(name:string,data:any)=>{\n    const blob=new Blob([JSON.stringify(data,null,2)],{type:\"application/json\"});\n    const url=URL.createObjectURL(blob);\n    const a=document.createElement(\"a\");\n    a.href=url; a.download=`${name}.json`; a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  const totals={\n    equipos:analytics.teams.length,\n    estudiantes:analytics.teams.reduce((acc,t)=>acc+(t.integrantes?.length||0),0),\n    reflexiones:analytics.reflections.length,\n    rooms:analytics.roomsCreated\n  };\n\n  return(\n    <Card title=\"Panel de Administrador\" subtitle=\"Configura el juego y revisa m√©tricas\" width={1100}>\n      <div style={{display:\"flex\",gap:8,flexWrap:\"wrap\",marginBottom:12}}>\n        {[\n          [\"resumen\",\"üìä Resumen\"],\n          [\"temas\",\"üéØ Tem√°ticas & Desaf√≠os\"],\n          [\"equipos\",\"üë• Equipos\"],\n          [\"reflexiones\",\"üìù Reflexiones\"],\n          [\"uso\",\"üìà Uso de desaf√≠os\"],\n          [\"ranking\",\"üèÜ Ranking/Monedas\"]\n        ].map(([k,label])=>(\n          <button\n            key={k}\n            onClick={()=>setTab(k as any)}\n            style={{\n              padding:\"8px 12px\",borderRadius:12,\n              border:`2px solid ${tab===k?theme.azul:theme.border}`,\n              background:tab===k?\"#E3F2FD\":\"#fff\",\n              fontWeight:800,cursor:\"pointer\"\n            }}>\n            {label}\n          </button>\n        ))}\n        <div style={{marginLeft:\"auto\",display:\"flex\",gap:8}}>\n          <Btn label=\"Exportar m√©tricas\" full={false} variant=\"outline\" onClick={()=>exportJSON(\"udd_metrics\",analytics)}/>\n          <Btn label=\"Exportar configuraci√≥n\" full={false} variant=\"outline\" onClick={()=>exportJSON(\"udd_themes\",THEMES)}/>\n          <Btn label=\"Resetear m√©tricas\" bg=\"#F44336\" full={false} onClick={()=>{\n            if(confirm(\"¬øSeguro que quieres borrar todas las m√©tricas (equipos/uso/reflexiones)?\")){\n              clearMetrics(); alert(\"M√©tricas reseteadas.\");\n            }\n          }}/>\n          <Btn label=\"‚¨Ö Volver\" full={false} bg={theme.amarillo} fg={theme.texto} onClick={onBack}/>\n        </div>\n      </div>\n\n      {tab===\"resumen\"&&(\n        <div style={{display:\"grid\",gridTemplateColumns:\"repeat(auto-fit, minmax(220px, 1fr))\",gap:12}}>\n          {[\n            {k:\"Salas creadas\",v:totals.rooms},\n            {k:\"Equipos registrados\",v:totals.equipos},\n            {k:\"Estudiantes (aprox.)\",v:totals.estudiantes},\n            {k:\"Reflexiones recibidas\",v:totals.reflexiones}\n          ].map(card=>(\n            <div key={card.k} style={panelBox}>\n              <div style={{fontSize:13,color:theme.muted}}>{card.k}</div>\n              <div style={{fontSize:32,fontWeight:900}}>{card.v}</div>\n            </div>\n          ))}\n          <div style={{gridColumn:\"1 / -1\",...panelBox}}>\n            <div style={badgeTitle}>Sala actual</div>\n            <div style={{fontFamily:\"Roboto Mono, monospace\",fontWeight:900,fontSize:18}}>\n              C√≥digo: {flow.roomCode||\"‚Äî\"} ¬∑ Paso: {flow.step} ¬∑ Equipos esperados: {flow.expectedTeams||\"‚Äî\"}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {tab===\"temas\"&&<ThemeEditor THEMES={THEMES} setTHEMES={setTHEMES}/>}\n\n      {tab===\"equipos\"&&(\n        <div style={{...panelBox,textAlign:\"left\"}}>\n          <div style={badgeTitle}>Equipos registrados</div>\n          {analytics.teams.length===0\n            ? (<div style={{opacity:.7}}>Sin equipos a√∫n.</div>)\n            : (\n              <div style={{display:\"grid\",gap:10}}>\n                {analytics.teams.slice().reverse().map((t:any,i:number)=>(\n                  <div key={i} style={{border:`1px solid ${theme.border}`,borderRadius:12,padding:10}}>\n                    <div style={{fontWeight:800}}>{t.teamName} <span style={{color:theme.muted}}>¬∑ sala {t.roomCode}</span></div>\n                    <div style={{fontSize:12,color:theme.muted}}>{new Date(t.ts).toLocaleString()}</div>\n                    <div style={{marginTop:6,display:\"grid\",gap:4}}>\n                      {t.integrantes?.map((p:any,j:number)=>(\n                        <div key={j}>‚Ä¢ <b>{p.nombre}</b> ‚Äî {p.carrera}</div>\n                      ))}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n        </div>\n      )}\n\n      {tab===\"reflexiones\"&&(\n        <div style={{...panelBox,textAlign:\"left\"}}>\n          <div style={badgeTitle}>Reflexiones finales</div>\n          {analytics.reflections.length===0\n            ? (<div style={{opacity:.7}}>A√∫n no hay reflexiones.</div>)\n            : (\n              <div style={{display:\"grid\",gap:10}}>\n                {analytics.reflections.slice().reverse().map((r:any,i:number)=>(\n                  <div key={i} style={{border:`1px solid ${theme.border}`,borderRadius:12,padding:10}}>\n                    <div style={{fontWeight:800}}>{r.teamName} <span style={{color:theme.muted}}>¬∑ sala {r.roomCode}</span></div>\n                    <div style={{fontSize:12,color:theme.muted}}>{new Date(r.ts).toLocaleString()}</div>\n                    <div style={{marginTop:6,whiteSpace:\"pre-wrap\"}}>{r.text}</div>\n                  </div>\n                ))}\n              </div>\n            )}\n        </div>\n      )}\n\n      {tab===\"uso\"&&(\n        <div style={{...panelBox,textAlign:\"left\"}}>\n          <div style={badgeTitle}>Uso de desaf√≠os</div>\n          <div style={{fontSize:12,color:theme.muted,marginBottom:8}}>\n            (Se incrementa cuando el profesor abre el mapa de empat√≠a con un desaf√≠o seleccionado)\n          </div>\n          {Object.keys(analytics.challengeUsage).length===0\n            ? (<div style={{opacity:.7}}>A√∫n no hay datos de uso.</div>)\n            : (\n              <div style={{display:\"grid\",gap:8}}>\n                {Object.entries(analytics.challengeUsage).sort((a,b)=>b[1]-a[1]).map(([key,count])=>{\n                  const [themeId,idxStr]=key.split(\"#\"); const idx=Number(idxStr);\n                  const t=THEMES[themeId as keyof typeof THEMES];\n                  const label=t?.label&&t.desafios[idx]?`${t.label} ‚Äî ${t.desafios[idx].titulo}`:key;\n                  return(\n                    <div key={key} style={{display:\"grid\",gridTemplateColumns:\"1fr auto\",gap:8}}>\n                      <div>{label}</div>\n                      <div style={{fontWeight:900}}>{count}</div>\n                    </div>\n                  );\n                })}\n              </div>\n            )}\n        </div>\n      )}\n\n      {tab===\"ranking\"&&(\n        <div style={{...panelBox}}>\n          <div style={{marginBottom:8,textAlign:\"left\",...badgeTitle}}>\n            Monedas (sala actual {flow.roomCode||\"‚Äî\"})\n          </div>\n          <RankingBars data={ranking} onContinue={()=>{}}/>\n        </div>\n      )}\n    </Card>\n  );\n}\n\n/* --Theme Editor (admin)-- */\nfunction ThemeEditor({THEMES,setTHEMES}:{THEMES:any;setTHEMES:(t:any)=>void;}){\n  type ThemeId = keyof typeof THEMES;\n  const [current,setCurrent]=useState<ThemeId>(Object.keys(THEMES)[0] as ThemeId);\n  const [local,setLocal]=useState<any>(THEMES);\n  useEffect(()=>setLocal(THEMES),[THEMES]);\n\n  const t=local[current];\n  const save=()=>{ setTHEMES(local); alert(\"Configuraci√≥n guardada.\"); };\n  const addChallenge=()=>{ const next={...local}; next[current].desafios.push({titulo:\"Nuevo desaf√≠o\",descripcion:\"Descripci√≥n...\"}); setLocal(next); };\n  const removeChallenge=(i:number)=>{ const next={...local}; next[current].desafios.splice(i,1); setLocal(next); };\n  const updateChallenge=(i:number,patch:Partial<{titulo:string;descripcion:string}>)=>{\n    const next={...local}; next[current].desafios[i]={...next[current].desafios[i],...patch}; setLocal(next);\n  };\n  const updatePersona=(patch:Partial<{nombre:string;edad:number;bio:string}>)=>{\n    const next={...local}; next[current].persona={...next[current].persona,...patch}; setLocal(next);\n  };\n\n  return(\n    <div style={{display:\"grid\",gap:12}}>\n      <div style={{display:\"flex\",gap:8,justifyContent:\"center\",flexWrap:\"wrap\"}}>\n        {(Object.keys(local) as ThemeId[]).map(k=>(\n          <button\n            key={String(k)}\n            onClick={()=>setCurrent(k)}\n            style={{\n              padding:\"8px 12px\",borderRadius:12,\n              border:`2px solid ${current===k?theme.azul:theme.border}`,\n              background:current===k?\"#E3F2FD\":\"#fff\",\n              fontWeight:800,cursor:\"pointer\"\n            }}>\n            {local[k].label}\n          </button>\n        ))}\n      </div>\n\n      <div style={{display:\"grid\",gridTemplateColumns:\"1fr 1fr\",gap:12,alignItems:\"start\"}}>\n        <div style={{...panelBox,textAlign:\"left\"}}>\n          <div style={badgeTitle}>Persona</div>\n          <label>Nombre</label>\n          <input style={{...baseInput,marginBottom:8}} value={t.persona.nombre} onChange={e=>updatePersona({nombre:e.target.value})}/>\n          <label>Edad</label>\n          <input type=\"number\" style={{...baseInput,marginBottom:8}} value={t.persona.edad} onChange={e=>updatePersona({edad:Number(e.target.value)||0})}/>\n          <label>Bio</label>\n          <textarea style={{...baseInput,minHeight:100}} value={t.persona.bio} onChange={e=>updatePersona({bio:e.target.value})}/>\n        </div>\n\n        <div style={{...panelBox,textAlign:\"left\"}}>\n          <div style={badgeTitle}>Desaf√≠os</div>\n          <div style={{display:\"grid\",gap:10}}>\n            {t.desafios.map((d:any,i:number)=>(\n              <div key={i} style={{border:`1px solid ${theme.border}`,borderRadius:12,padding:10}}>\n                <div style={{display:\"grid\",gap:6}}>\n                  <label>T√≠tulo</label>\n                  <input style={baseInput} value={d.titulo} onChange={e=>updateChallenge(i,{titulo:e.target.value})}/>\n                  <label>Descripci√≥n</label>\n                  <textarea style={{...baseInput,minHeight:80}} value={d.descripcion} onChange={e=>updateChallenge(i,{descripcion:e.target.value})}/>\n                </div>\n                <div style={{display:\"flex\",justifyContent:\"flex-end\",marginTop:8}}>\n                  <Btn label=\"Eliminar\" full={false} bg=\"#F44336\" onClick={()=>{ if(confirm(\"¬øEliminar desaf√≠o?\")) removeChallenge(i); }}/>\n                </div>\n              </div>\n            ))}\n            <Btn label=\"Agregar desaf√≠o\" full={false} onClick={addChallenge}/>\n          </div>\n        </div>\n      </div>\n\n      <div style={{display:\"flex\",justifyContent:\"flex-end\",gap:8}}>\n        <Btn label=\"Guardar cambios\" onClick={save} full={false}/>\n      </div>\n    </div>\n  );\n}\n\n/* ===================== UTILS (final) ===================== */\nfunction useMediaQuery(q:string){\n  const [m,setM]=useState(false);\n  useEffect(()=>{\n    const mq=window.matchMedia(q);\n    const h=()=>setM(mq.matches);\n    h();\n    mq.addEventListener(\"change\",h);\n    return()=>mq.removeEventListener(\"change\",h)\n  },[q]);\n  return m;\n}\n\nfunction shuffle<T>(arr:T[]):T[]{\n  const a=arr.slice();\n  for(let i=a.length-1;i>0;i--){\n    const j=Math.floor(Math.random()*(i+1));\n    [a[i],a[j]]=[a[j],a[i]];\n  }\n  return a;\n}\nfunction generateCode(len:number=5): string {\n  const CHARS = \"ABCDEFGHJKLMNPQRSTUVWXYZ23456789\";\n  let out = \"\";\n  for (let i=0;i<len;i++){\n    out += CHARS[Math.floor(Math.random()*CHARS.length)];\n  }\n  return out;\n}\n\n/* sumar monedas a un equipo arbitrario (no necesariamente el propio) */\nfunction awardCoinsToTeam(roomCode:string, teamName:string, delta:number){\n  if(!roomCode||!teamName||!delta) return;\n  const map=readJSON<Record<string,number>>(COINS_KEY,{});\n  const key=`${roomCode}::${teamName}`;\n  map[key]=(map[key]||0)+delta;\n  writeJSON(COINS_KEY,map);\n  try{window.dispatchEvent(new StorageEvent(\"storage\",{key:COINS_KEY,newValue:JSON.stringify(map)}))}catch{}\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}